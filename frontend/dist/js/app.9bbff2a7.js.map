{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?9b05","webpack:///./src/components/JsMind/JsMind.vue?d500","webpack:///./src/App.vue?fe5c","webpack:///src/App.vue","webpack:///./src/App.vue?a7d1","webpack:///./src/App.vue","webpack:///./src/router/index.js","webpack:///./src/components/JsMind/JsMind.vue?0f05","webpack:///src/components/JsMind/JsMind.vue","webpack:///./src/components/JsMind/JsMind.vue?bf52","webpack:///./src/components/JsMind/JsMind.vue","webpack:///./src/components/JsMind/index.js","webpack:///./src/store.js","webpack:///./src/main.js","webpack:///./src/components/JsMind/jsmind.draggable.js","webpack:///./src/components/JsMind/jsmind.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","_v","staticRenderFns","component","Vue","use","VueRouter","routes","path","router","base","process","refresh","style","height","_m","staticStyle","staticClass","props","values","required","options","mounted","init","jm","default_options","updated","watch","methods","jsMind","install","Vuex","store","Store","state","mapData","codeData","config","productionTip","JsMind","VueAnalytics","id","render","h","App","$mount","$w","$d","__name__","draggable","jdom","util","dom","clear_selection","getSelection","removeAllRanges","selection","empty","line_width","lookup_delay","lookup_interval","e_canvas","canvas_ctx","shadow","shadow_w","shadow_h","active_node","target_node","target_direct","client_w","client_h","offset_x","offset_y","hlookup_delay","hlookup_timer","capture","moved","_create_canvas","_create_shadow","_event_bind","resize","view","e_nodes","width","size","w","e_panel","ctx","getContext","visibility","zIndex","cursor","opacity","reset_shadow","el","innerHTML","left","top","backgroundImage","backgroundSize","transform","clientWidth","clientHeight","show_shadow","hide_shadow","_magnet_shadow","node","lineWidth","strokeStyle","lineCap","_clear_lines","_canvas_lineto","sp","x","y","np","clearRect","x1","y1","x2","y2","beginPath","moveTo","lineTo","stroke","_lookup_close_node","nl","root","get_root","root_location","get_location","root_size","get_size","root_x","sw","sh","sx","offsetLeft","sy","offsetTop","direct","direction","right","nodes","mind","min_distance","Number","MAX_VALUE","distance","closest_node","closest_p","shadow_p","nodeid","isroot","Math","abs","result_node","lookup_close_node","node_data","jd","container","add_event","evt","dragstart","drag","dragend","get_editable","jview","srcElement","tagName","toLowerCase","get_binded_nodeid","get_node","clientX","touches","clientY","client_hw","floor","client_hh","clearInterval","setInterval","preventDefault","px","py","src_node","move_node","inherited","sibling_nodes","children","sc","delta_y","node_before","beforeid","dy","jm_event_handle","event_type","draggable_plugin","plugin","add_event_listener","register_plugin","__version__","__author__","_noop","logger","log","debug","warn","info","$g","getElementById","$c","$t","hasChildNodes","firstChild","nodeValue","createTextNode","$h","HTMLElement","$i","nodeType","ownerDocument","String","startsWith","DEFAULT_OPTIONS","editable","theme","support_html","engine","hmargin","vmargin","line_color","layout","hspace","vspace","pspace","default_event_handle","enable_mousedown_handle","enable_click_handle","enable_dblclick_handle","shortcut","enable","handles","mapping","addchild","addbrother","editnode","delnode","toggle","up","down","current","version","opts","json","merge","inited","event_handles","center","show","edit","select","meta","ctrl","alt","sId","iIndex","sTopic","oData","bIsRoot","oParent","eDirection","bExpanded","index","topic","parent","expanded","_data","compare","node1","node2","i1","i2","pnode","pid","vd","abs_x","abs_y","author","selected","set_root","_put_node","add_node","parent_node","idx","is_node","the_parent_node","nodeindex","isNaN","children_len","_reindex","insert_node_before","the_node_before","node_index","get_node_before","the_node","insert_node_after","node_after","the_node_after","reVal","get_node_after","brothers","parentid","_move_node","_flow_node_direction","len","_move_node_internal","sibling","si","remove_node","ci","k","sort","format","node_tree","example","get_mind","source","df","_parse","get_data","_buildnode","node_root","_extract_data","_extract_subnode","node_json","node_parent","node_array","_array","narray","reverse","root_id","_extract_root","root_json","extract_count","node_direction","sub_extract_count","_array_node","freemind","xml","xml_doc","_parse_xml","xml_root","_find_root","_load_node","xmllines","_buildmap","join","DOMParser","parser","parseFromString","ActiveXObject","async","loadXML","childNodes","parent_id","xml_node","node_id","node_topic","topic_children","topic_child","textContent","_load_attributes","node_expanded","node_position","child","attr","attr_data","pos","ajax","_xhr","xhr","XMLHttpRequest","_eurl","url","encodeURIComponent","param","method","callback","fail_callback","a","tmp_param","onreadystatechange","readyState","status","string2json","responseText","open","setRequestHeader","send","post","addEventListener","attachEvent","file","read","file_data","fn_callback","reader","FileReader","readAsText","save","blob","Blob","BlobBuilder","MozBlobBuilder","WebKitBlobBuilder","MSBlobBuilder","bb","append","getBlob","navigator","msSaveBlob","URL","webkitURL","bloburl","createObjectURL","anchor","download","body","createEvent","initEvent","dispatchEvent","location","json2string","JSON","json_str","stringify","parse","b","toString","uuid","newid","Date","getTime","random","substr","text","is_empty","replace","opts_layout","opts_view","data_provider","layout_provider","view_provider","shortcut_provider","init_plugins","enable_edit","disable_edit","enable_event_handle","event_handle","disable_event_handle","set_theme","theme_old","reset_theme","reset_custom_style","mousedown_handle","click_handle","dblclick_handle","element","select_node","select_clear","isexpander","is_expander","toggle_node","begin_edit","edit_node_begin","end_edit","edit_node_end","save_location","relayout","restore_location","expand_node","collapse_node","expand_all","collapse_all","expand_to_depth","depth","_reset","reset","_show","load","invoke_event_handle","get_meta","data_format","from","reset_node_custom_style","isWhenIncluded","add_YN_tail","afterid","update_node","have_YN_tail","isInsert","yes_id","no_id","is_visible","get_selected_node","is_node_visible","find_node_before","prev","ni","find_node_after","getthis","set_node_color","bgcolor","fgcolor","set_node_font_style","weight","set_node_background_image","image","rotation","set_node_background_rotation","_invoke_event_handle","mind_data","isside","bounds","cache_valid","layout_direction","layout_offset","_layout_direction_root","layout_data","children_count","side_index","_layout_direction_side","subnode","outer_height","left_nodes","right_nodes","unshift","outer_height_left","_layout_offset_subnodes","outer_height_right","max","total_height","nodes_count","node_outer_height","base_y","pd","set_visible","middle_height","_layout_offset_subnodes_height","get_node_offset","offset_cache","_offset_","offset_p","get_node_point","view_data","get_node_point_in","get_node_point_out","pout_cache","_pout_","get_expander_point","ex_p","ceil","get_min_size","pout","part_layout","target_depth","curr_nodes","curr_depth","root_layout_data","visible","is_expand","graph_canvas","set_size","clear","draw_line","pin","offset","_bezier_to","copy_to","dest_canvas_ctx","drawImage","bezierCurveTo","_line_to","graph_svg","e_svg","lines","createElementNS","line","img","Image","btoa","XMLSerializer","serializeToString","selected_node","editing_node","graph","e_editor","className","actualZoom","zoomStep","minZoom","maxZoom","v","keyCode","stopPropagation","obj","event_name","parentElement","clear_lines","clear_nodes","theme_name","init_nodes","expand_size","min_size","min_width","min_height","init_nodes_size","doc_frag","createDocumentFragment","create_node_element","add_yes_no","d_e","expander","_reset_node_custom_style","clear_node_custom_style","get_editing_node","is_editing","ncs","getComputedStyle","parseInt","getPropertyValue","focus","get_view_offset","_x","_y","show_nodes","show_lines","zoomIn","setZoom","zoomOut","zoom","_center_root","outer_w","outer_h","_offset","scrollLeft","scrollTop","keep_center","_saved_location","node_element","p_expander","expander_text","display","backgroundColor","color","fontSize","fontWeight","fontStyle","scaledImageData","toDataURL","_mapping","handle","handler","handle_addchild","handle_addbrother","handle_editnode","handle_delnode","handle_toggle","handle_up","handle_down","handle_left","handle_right","enable_shortcut","disable_shortcut","kc","metaKey","ctrlKey","altKey","shiftKey","_jm","up_node","down_node","_handle_direction","childrencount","plugins","sender","_init_plugins","fn_init","define","global"],"mappings":"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","file":"js/app.9bbff2a7.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-1779c4b4\":\"1e26ddf9\",\"chunk-2d0b16b3\":\"e065f68b\",\"chunk-741f5406\":\"8f49ce40\",\"chunk-379134ea\":\"80357bc5\",\"chunk-7b24b002\":\"0f0e1cf8\",\"chunk-d67babc0\":\"43cb3d31\",\"chunk-e32b1f48\":\"adf749b5\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"chunk-7b24b002\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-1779c4b4\":\"31d6cfe0\",\"chunk-2d0b16b3\":\"31d6cfe0\",\"chunk-741f5406\":\"31d6cfe0\",\"chunk-379134ea\":\"31d6cfe0\",\"chunk-7b24b002\":\"3c232a27\",\"chunk-d67babc0\":\"31d6cfe0\",\"chunk-e32b1f48\":\"31d6cfe0\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./JsMind.vue?vue&type=style&index=0&id=2313babd&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./JsMind.vue?vue&type=style&index=0&id=2313babd&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('h1',{attrs:{\"id\":\"toc_0\"}},[_c('router-link',{attrs:{\"to\":\"/\"}},[_vm._v(\" Analyzing context\")])],1),_c('p',[_vm._v(\"Tools for analyzing complicate context for developers…\")]),_c('br'),_c('br'),_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n<template>\n  <div id=\"app\">\n    <h1 id=\"toc_0\"><router-link to='/'>\n        Analyzing context</router-link></h1>\n\n    <p>Tools for analyzing complicate context for developers&hellip;</p>\n    <br><br>\n\n    <router-view/>\n\n  </div>\n</template>\n\n<script>\n//import FramePage from './components/FrontPage.vue'\nexport default {\n  name: 'App',\n  // components: {\n  //   FramePage\n  // }\n    methods:{\n        goHome(){\n            var router = this.$router \n            router.push({\n                name:Home,\n            })\n        }\n    }\n\n\n}\n</script>\n\n<style>\n\n@import url(http://fonts.googleapis.com/earlyaccess/notosanskr.css);\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\np,\nblockquote {\n    margin: 0;\n    padding: 0;\n}\nbody {\n    /*font-family: \"Helvetica Neue\", Helvetica, \"Hiragino Sans GB\", Arial, sans-serif;*/\n    font-family: 'Noto Sans KR', sans-serif;\n    font-size: 13px;\n    line-height: 18px;\n    color: #737373;\n    background-color: white;\n    margin: 10px 13px 10px 13px;\n}\ntable {\n\tmargin: 10px 0 15px 0;\n\tborder-collapse: collapse;\n}\ntd,th {\n\tborder: 1px solid #ddd;\n\tpadding: 3px 10px;\n}\nth {\n\tpadding: 5px 10px;\n}\n\na {\n    color: #737373;\n    text-decoration: none;\n}\na:hover {\n    color: #0050a3;\n    text-decoration: none;\n}\na img {\n    border: none;\n}\np {\n    margin-bottom: 9px;\n}\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n    color: #404040;\n    line-height: 36px;\n}\nh1 {\n    margin-bottom: 18px;\n    font-size: 30px;\n}\nh2 {\n    font-size: 24px;\n}\nh3 {\n    font-size: 18px;\n}\nh4 {\n    font-size: 16px;\n}\nh5 {\n    font-size: 14px;\n}\nh6 {\n    font-size: 13px;\n}\nhr {\n    margin: 0 0 19px;\n    border: 0;\n    border-bottom: 1px solid #ccc;\n}\nblockquote {\n    padding: 13px 13px 21px 15px;\n    margin-bottom: 18px;\n    font-family:georgia,serif;\n    font-style: italic;\n}\nblockquote:before {\n    content:\"\\201C\";\n    font-size:40px;\n    margin-left:-10px;\n    font-family:georgia,serif;\n    color:#eee;\n}\nblockquote p {\n    font-size: 14px;\n    font-weight: 300;\n    line-height: 18px;\n    margin-bottom: 0;\n    font-style: italic;\n}\ncode, pre {\n    font-family: Monaco, Andale Mono, Courier New, monospace;\n}\ncode {\n    background-color: #fee9cc;\n    color: rgba(0, 0, 0, 0.75);\n    padding: 1px 3px;\n    font-size: 12px;\n    -webkit-border-radius: 3px;\n    -moz-border-radius: 3px;\n    border-radius: 3px;\n}\npre {\n    display: block;\n    padding: 14px;\n    margin: 0 0 18px;\n    line-height: 16px;\n    font-size: 11px;\n    border: 1px solid #d9d9d9;\n    white-space: pre-wrap;\n    word-wrap: break-word;\n}\npre code {\n    background-color: #fff;\n    color:#737373;\n    font-size: 11px;\n    padding: 0;\n}\nsup {\n    font-size: 0.83em;\n    vertical-align: super;\n    line-height: 0;\n}\n* {\n\t-webkit-print-color-adjust: exact;\n}\n@media screen and (min-width: 914px) {\n    body {\n        width: 854px;\n        margin:10px auto;\n    }\n}\n@media print {\n\tbody,code,pre code,h1,h2,h3,h4,h5,h6 {\n\t\tcolor: black;\n\t}\n\ttable, pre {\n\t\tpage-break-inside: avoid;\n\t}\n}\n\n\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=50f30a52&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport VueRouter from 'vue-router'\n\nVue.use(VueRouter)\n\n  const routes = [\n  {\n    path: '/',\n    name: 'Home',\n    component: () => import ('../components/FrontPage.vue')\n  },\n  {\n    path: '/mindmapinput',\n    name: 'mindmapinput',\n    // route level code-splitting\n    // this generates a separate chunk (about.[hash].js) for this route\n    // which is lazy-loaded when the route is visited.\n    component: () => import('../components/MindmapInput.vue')\n  },\n  {\n    path: '/mindmapresult',\n    name: 'mindmapresult',\n    component: () => import('../components/MindmapResult.vue')\n  },\n  {\n    path: '/mcdcinput',\n    name: 'mcdcinput',\n    component: () => import('../components/MCDCInput.vue')\n  },  {\n    path: '/mcdcresult',\n    name: 'mcdcresult',\n    component: () => import('../components/MCDCResult.vue')\n  },\n  {\n    path: '/errorpage',\n    name: 'errorpage',\n    component: () => import('../components/errorPage.vue')\n  },\n  \n]\n\nconst router = new VueRouter({\n  //mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n})\n\nexport default router\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{key:_vm.refresh,style:({height: _vm.height})},[_c('div',{attrs:{\"id\":\"jsmind_container\"}}),_vm._m(0)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"display\":\"none\"}},[_c('input',{staticClass:\"file\",attrs:{\"type\":\"file\",\"id\":\"image-chooser\",\"accept\":\"image/*\"}})])}]\n\nexport { render, staticRenderFns }","<template>\n<div :key='refresh' :style=\"{height}\">\n      <div id=\"jsmind_container\"></div>\n  \n  <div style=\"display:none\">\n      <input class=\"file\" type=\"file\" id=\"image-chooser\" accept=\"image/*\"/>\n    </div>\n</div>\n</template>\n\n<script>\nimport  \"./jsmind.js\";\nimport \"./jsmind.css\";\nimport './jsmind.draggable.js'\n//import './jsmind.screenshot.js'\nexport default {\n  name: \"jsMind\",\n  props: {\n    values: {\n      type: Object,\n      required: true\n    },\n    options: {\n      type: Object\n    },\n    height:{\n      type:String,\n      required:true\n    }\n  },\n  mounted() {\n    this.init()\n  },\n  data(){\n    return{\n      jm:{},\n      refresh:1,\n      value:{},\n       // 默认配置\n      default_options : {\n      container: \"jsmind_container\",\n      editable: true, // 是否启用编辑\n      theme: \"primary\", // 主题\n      mode: \"full\", // 显示模式\n      support_html: true, // 是否支持节点里的HTML元素\n      view: {\n        engine: \"canvas\", // 思维导图各节点之间线条的绘制引擎\n        hmargin: 100, // 思维导图距容器外框的最小水平距离\n        vmargin: 50, // 思维导图距容器外框的最小垂直距离\n        line_width: 2, // 思维导图线条的粗细\n        line_color: \"#555\" // 思维导图线条的颜色\n      },\n      layout: {\n        hspace: 30, // 节点之间的水平间距\n        vspace: 20, // 节点之间的垂直间距\n        pspace: 13 // 节点与连接线之间的水平间距（用于容纳节点收缩/展开控制器）\n      },\n      shortcut: {\n        enable: true, // 是否启用快捷键\n        handles: {\n          SavePNG(){\n            this.jm.screenshot.shootDownload();\n          }\n        }, // 命名的快捷键事件处理器\n        mapping: {\n          // 快捷键映射\n          addchild: 45, // <Insert>\n          addbrother: 13, // <Enter>\n          editnode: 113, // <F2>\n          delnode: 46, // <Delete>\n          toggle: 32, // <Space>\n          left: 37, // <Left>\n          up: 38, // <Up>\n          right: 39, // <Right>\n          down: 40 ,// <Down>\n          SavePNG:jsMind.key.ctrl + 83\n        }\n      }\n    }\n    }\n  },\n  updated(){\n    this.init()\n  },\n  watch:{\n\n    options(){\n     this.$nextTick(()=>{\n      this.refresh++\n     })\n    }\n  },\n  methods:{\n    init(){\n      if(this.jm.get_data){\n        this.value=this.jm.get_data()\n      }else{\n        this.value=this.values\n      }\n      const options = Object.assign(this.default_options, this.options);\n      this.jm=window.jsMind.show(options,this.value)\n    }\n  }\n};\n</script>\n<style scoped>\n#jsmind_container {\n  height: 100%;\n  width: 100%;\n  border : 1px;\n  border-style:solid;\n\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./JsMind.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./JsMind.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./JsMind.vue?vue&type=template&id=2313babd&scoped=true&\"\nimport script from \"./JsMind.vue?vue&type=script&lang=js&\"\nexport * from \"./JsMind.vue?vue&type=script&lang=js&\"\nimport style0 from \"./JsMind.vue?vue&type=style&index=0&id=2313babd&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2313babd\",\n  null\n  \n)\n\nexport default component.exports","import jsMind from './JsMind.vue'\njsMind.install = Vue => {\n    Vue.component(jsMind.name, jsMind)\n}\n\nif (typeof window !== 'undefined' && window.Vue) {\n    window.Vue.component(jsMind.name, jsMind)\n}\n\nexport default jsMind;\n","import Vue from \"vue\";\nimport Vuex from \"vuex\";\n\nVue.use(Vuex)\n\nexport const store = new Vuex.Store({\n    state: {\n        mapData : \"none\",\n        codeData : \"none\"\n    }\n})\n","import Vue from 'vue'\nimport App from './App.vue'\nimport router from './router'\nimport JsMind from './components/JsMind/index'\nimport VueAnalytics from 'vue-analytics'\nimport {store} from \"./store\"\n\nVue.config.productionTip = false\nVue.use(JsMind)\nVue.use(VueAnalytics,{\n  id : 'UA-112917851-2',\n  router,\n})\n\nnew Vue({\n  router,\n  store: store,\n  render: h => h(App)\n}).$mount('#app')\n\n","/*\n * Released under BSD License\n * Copyright (c) 2014-2015 hizzgdev@163.com\n * \n * Project Home:\n *   https://github.com/hizzgdev/jsmind/\n */\n\n(function ($w) {\n    'use strict';\n    var $d = $w.document;\n    var __name__ = 'jsMind';\n    var jsMind = $w[__name__];\n    if (!jsMind) { return; }\n    if (typeof jsMind.draggable != 'undefined') { return; }\n\n    var jdom = jsMind.util.dom;\n    var clear_selection = 'getSelection' in $w ? function () {\n        $w.getSelection().removeAllRanges();\n    } : function () {\n        $d.selection.empty();\n    };\n\n    var options = {\n        line_width: 5,\n        lookup_delay: 500,\n        lookup_interval: 80\n    };\n\n    jsMind.draggable = function (jm) {\n        this.jm = jm;\n        this.e_canvas = null;\n        this.canvas_ctx = null;\n        this.shadow = null;\n        this.shadow_w = 0;\n        this.shadow_h = 0;\n        this.active_node = null;\n        this.target_node = null;\n        this.target_direct = null;\n        this.client_w = 0;\n        this.client_h = 0;\n        this.offset_x = 0;\n        this.offset_y = 0;\n        this.hlookup_delay = 0;\n        this.hlookup_timer = 0;\n        this.capture = false;\n        this.moved = false;\n    };\n\n    jsMind.draggable.prototype = {\n        init: function () {\n            this._create_canvas();\n            this._create_shadow();\n            this._event_bind();\n        },\n\n        resize: function () {\n            this.jm.view.e_nodes.appendChild(this.shadow);\n            this.e_canvas.width = this.jm.view.size.w;\n            this.e_canvas.height = this.jm.view.size.h;\n        },\n\n        _create_canvas: function () {\n            var c = $d.createElement('canvas');\n            this.jm.view.e_panel.appendChild(c);\n            var ctx = c.getContext('2d');\n            this.e_canvas = c;\n            this.canvas_ctx = ctx;\n        },\n\n        _create_shadow: function () {\n            var s = $d.createElement('jmnode');\n            s.style.visibility = 'hidden';\n            s.style.zIndex = '3';\n            s.style.cursor = 'move';\n            s.style.opacity = '0.7';\n            this.shadow = s;\n        },\n\n        reset_shadow: function (el) {\n            var s = this.shadow.style;\n            this.shadow.innerHTML = el.innerHTML;\n            s.left = el.style.left;\n            s.top = el.style.top;\n            s.width = el.style.width;\n            s.height = el.style.height;\n            s.backgroundImage = el.style.backgroundImage;\n            s.backgroundSize = el.style.backgroundSize;\n            s.transform = el.style.transform;\n            this.shadow_w = this.shadow.clientWidth;\n            this.shadow_h = this.shadow.clientHeight;\n\n        },\n\n        show_shadow: function () {\n            if (!this.moved) {\n                this.shadow.style.visibility = 'visible';\n            }\n        },\n\n        hide_shadow: function () {\n            this.shadow.style.visibility = 'hidden';\n        },\n\n        _magnet_shadow: function (node) {\n            if (!!node) {\n                this.canvas_ctx.lineWidth = options.line_width;\n                this.canvas_ctx.strokeStyle = 'rgba(0,0,0,0.3)';\n                this.canvas_ctx.lineCap = 'round';\n                this._clear_lines();\n                this._canvas_lineto(node.sp.x, node.sp.y, node.np.x, node.np.y);\n            }\n        },\n\n        _clear_lines: function () {\n            this.canvas_ctx.clearRect(0, 0, this.jm.view.size.w, this.jm.view.size.h);\n        },\n\n        _canvas_lineto: function (x1, y1, x2, y2) {\n            this.canvas_ctx.beginPath();\n            this.canvas_ctx.moveTo(x1, y1);\n            this.canvas_ctx.lineTo(x2, y2);\n            this.canvas_ctx.stroke();\n        },\n\n        _lookup_close_node: function () {\n            var root = this.jm.get_root();\n            var root_location = root.get_location();\n            var root_size = root.get_size();\n            var root_x = root_location.x + root_size.w / 2;\n\n            var sw = this.shadow_w;\n            var sh = this.shadow_h;\n            var sx = this.shadow.offsetLeft;\n            var sy = this.shadow.offsetTop;\n\n            var ns, nl;\n\n            var direct = (sx + sw / 2) >= root_x ?\n                jsMind.direction.right : jsMind.direction.left;\n            var nodes = this.jm.mind.nodes;\n            var node = null;\n            var min_distance = Number.MAX_VALUE;\n            var distance = 0;\n            var closest_node = null;\n            var closest_p = null;\n            var shadow_p = null;\n            for (var nodeid in nodes) {\n                var np, sp;\n                node = nodes[nodeid];\n                if (node.isroot || node.direction == direct) {\n                    if (node.id == this.active_node.id) {\n                        continue;\n                    }\n                    ns = node.get_size();\n                    nl = node.get_location();\n                    if (direct == jsMind.direction.right) {\n                        if (sx - nl.x - ns.w <= 0) { continue; }\n                        distance = Math.abs(sx - nl.x - ns.w) + Math.abs(sy + sh / 2 - nl.y - ns.h / 2);\n                        np = { x: nl.x + ns.w - options.line_width, y: nl.y + ns.h / 2 };\n                        sp = { x: sx + options.line_width, y: sy + sh / 2 };\n                    } else {\n                        if (nl.x - sx - sw <= 0) { continue; }\n                        distance = Math.abs(sx + sw - nl.x) + Math.abs(sy + sh / 2 - nl.y - ns.h / 2);\n                        np = { x: nl.x + options.line_width, y: nl.y + ns.h / 2 };\n                        sp = { x: sx + sw - options.line_width, y: sy + sh / 2 };\n                    }\n                    if (distance < min_distance) {\n                        closest_node = node;\n                        closest_p = np;\n                        shadow_p = sp;\n                        min_distance = distance;\n                    }\n                }\n            }\n            var result_node = null;\n            if (!!closest_node) {\n                result_node = {\n                    node: closest_node,\n                    direction: direct,\n                    sp: shadow_p,\n                    np: closest_p\n                };\n            }\n            return result_node;\n        },\n\n        lookup_close_node: function () {\n            var node_data = this._lookup_close_node();\n            if (!!node_data) {\n                this._magnet_shadow(node_data);\n                this.target_node = node_data.node;\n                this.target_direct = node_data.direction;\n            }\n        },\n\n        _event_bind: function () {\n            var jd = this;\n            var container = this.jm.view.container;\n            jdom.add_event(container, 'mousedown', function (e) {\n                var evt = e || event;\n                jd.dragstart.call(jd, evt);\n            });\n            jdom.add_event(container, 'mousemove', function (e) {\n                var evt = e || event;\n                jd.drag.call(jd, evt);\n            });\n            jdom.add_event(container, 'mouseup', function (e) {\n                var evt = e || event;\n                jd.dragend.call(jd, evt);\n            });\n            jdom.add_event(container, 'touchstart', function (e) {\n                var evt = e || event;\n                jd.dragstart.call(jd, evt);\n            });\n            jdom.add_event(container, 'touchmove', function (e) {\n                var evt = e || event;\n                jd.drag.call(jd, evt);\n            });\n            jdom.add_event(container, 'touchend', function (e) {\n                var evt = e || event;\n                jd.dragend.call(jd, evt);\n            });\n        },\n\n        dragstart: function (e) {\n            if (!this.jm.get_editable()) { return; }\n            if (this.capture) { return; }\n            this.active_node = null;\n\n            var jview = this.jm.view;\n            var el = e.target || event.srcElement;\n            if (el.tagName.toLowerCase() != 'jmnode') { return; }\n            var nodeid = jview.get_binded_nodeid(el);\n            if (!!nodeid) {\n                var node = this.jm.get_node(nodeid);\n                if (!node.isroot) {\n                    this.reset_shadow(el);\n                    this.active_node = node;\n                    this.offset_x = (e.clientX || e.touches[0].clientX) - el.offsetLeft;\n                    this.offset_y = (e.clientY || e.touches[0].clientY) - el.offsetTop;\n                    this.client_hw = Math.floor(el.clientWidth / 2);\n                    this.client_hh = Math.floor(el.clientHeight / 2);\n                    if (this.hlookup_delay != 0) {\n                        $w.clearTimeout(this.hlookup_delay);\n                    }\n                    if (this.hlookup_timer != 0) {\n                        $w.clearInterval(this.hlookup_timer);\n                    }\n                    var jd = this;\n                    this.hlookup_delay = $w.setTimeout(function () {\n                        jd.hlookup_delay = 0;\n                        jd.hlookup_timer = $w.setInterval(function () {\n                            jd.lookup_close_node.call(jd);\n                        }, options.lookup_interval);\n                    }, options.lookup_delay);\n                    this.capture = true;\n                }\n            }\n        },\n\n        drag: function (e) {\n            if (!this.jm.get_editable()) { return; }\n            if (this.capture) {\n                e.preventDefault();\n                this.show_shadow();\n                this.moved = true;\n                clear_selection();\n                var px = (e.clientX || e.touches[0].clientX) - this.offset_x;\n                var py = (e.clientY || e.touches[0].clientY) - this.offset_y;\n                var cx = px + this.client_hw;\n                var cy = py + this.client_hh;\n                this.shadow.style.left = px + 'px';\n                this.shadow.style.top = py + 'px';\n                clear_selection();\n            }\n        },\n\n        dragend: function (e) {\n            if (!this.jm.get_editable()) { return; }\n            if (this.capture) {\n                if (this.hlookup_delay != 0) {\n                    $w.clearTimeout(this.hlookup_delay);\n                    this.hlookup_delay = 0;\n                    this._clear_lines();\n                }\n                if (this.hlookup_timer != 0) {\n                    $w.clearInterval(this.hlookup_timer);\n                    this.hlookup_timer = 0;\n                    this._clear_lines();\n                }\n                if (this.moved) {\n                    var src_node = this.active_node;\n                    var target_node = this.target_node;\n                    var target_direct = this.target_direct;\n                    this.move_node(src_node, target_node, target_direct);\n                }\n                this.hide_shadow();\n            }\n            this.moved = false;\n            this.capture = false;\n        },\n\n        move_node: function (src_node, target_node, target_direct) {\n            var shadow_h = this.shadow.offsetTop;\n            if (!!target_node && !!src_node && !jsMind.node.inherited(src_node, target_node)) {\n                // lookup before_node\n                var sibling_nodes = target_node.children;\n                var sc = sibling_nodes.length;\n                var node = null;\n                var delta_y = Number.MAX_VALUE;\n                var node_before = null;\n                var beforeid = '_last_';\n                while (sc--) {\n                    node = sibling_nodes[sc];\n                    if (node.direction == target_direct && node.id != src_node.id) {\n                        var dy = node.get_location().y - shadow_h;\n                        if (dy > 0 && dy < delta_y) {\n                            delta_y = dy;\n                            node_before = node;\n                            beforeid = '_first_';\n                        }\n                    }\n                }\n                if (!!node_before) { beforeid = node_before.id; }\n                this.jm.move_node(src_node.id, beforeid, target_node.id, target_direct);\n            }\n            this.active_node = null;\n            this.target_node = null;\n            this.target_direct = null;\n        },\n\n        jm_event_handle: function (type, data) {\n            if (type === jsMind.event_type.resize) {\n                this.resize();\n            }\n        }\n    };\n\n    var draggable_plugin = new jsMind.plugin('draggable', function (jm) {\n        var jd = new jsMind.draggable(jm);\n        jd.init();\n        jm.add_event_listener(function (type, data) {\n            jd.jm_event_handle.call(jd, type, data);\n        });\n    });\n\n    jsMind.register_plugin(draggable_plugin);\n\n})(window);\n","/*\n * Released under BSD License\n * Copyright (c) 2014-2016 hizzgdev@163.com\n *\n * Project Home:\n *   https://github.com/hizzgdev/jsmind/\n */\n\n; (function ($w) {\n    'use strict';\n    // set 'jsMind' as the library name.\n    // __name__ should be a const value, Never try to change it easily.\n    var __name__ = 'jsMind';\n    // library version\n    var __version__ = '0.4.6';\n    // author\n    var __author__ = 'hizzgdev@163.com';\n\n    // an noop function define\n    var _noop = function () { };\n    var logger = (typeof console === 'undefined') ? {\n        log: _noop, debug: _noop, error: _noop, warn: _noop, info: _noop\n    } : console;\n\n    // check global variables\n    if (typeof module === 'undefined' || !module.exports) {\n        if (typeof $w[__name__] != 'undefined') {\n            logger.log(__name__ + ' has been already exist.');\n            return;\n        }\n    }\n\n    // shortcut of methods in dom\n    var $d = $w.document;\n    var $g = function (id) { return $d.getElementById(id); };\n    var $c = function (tag) { return $d.createElement(tag); };\n    var $t = function (n, t) { if (n.hasChildNodes()) { n.firstChild.nodeValue = t; } else { n.appendChild($d.createTextNode(t)); } };\n\n    var $h = function (n, t) {\n        if (t instanceof HTMLElement) {\n            n.innerHTML = '';\n            n.appendChild(t)\n        } else {\n            n.innerHTML = t;\n        }\n    };\n    // detect isElement\n    var $i = function (el) { return !!el && (typeof el === 'object') && (el.nodeType === 1) && (typeof el.style === 'object') && (typeof el.ownerDocument === 'object'); };\n    if (typeof String.prototype.startsWith != 'function') { String.prototype.startsWith = function (p) { return this.slice(0, p.length) === p; }; }\n\n    var DEFAULT_OPTIONS = {\n        container: '',   // id of the container\n        editable: false, // you can change it in your options\n        theme: null,\n        mode: 'full',    // full or side\n        support_html: true,\n\n        view: {\n            engine: 'canvas',\n            hmargin: 100,\n            vmargin: 50,\n            line_width: 2,\n            line_color: '#555'\n        },\n        layout: {\n            hspace: 30,\n            vspace: 20,\n            pspace: 13\n        },\n        default_event_handle: {\n            enable_mousedown_handle: true,\n            enable_click_handle: true,\n            enable_dblclick_handle: true\n        },\n        shortcut: {\n            enable: true,\n            handles: {\n            },\n            mapping: {\n                addchild: 45, // Insert\n                addbrother: 13, // Enter\n                editnode: 113,// F2\n                delnode: 46, // Delete\n                toggle: 32, // Space\n                left: 37, // Left\n                up: 38, // Up\n                right: 39, // Right\n                down: 40, // Down\n            }\n        },\n    };\n\n    // core object\n    var jm = function (options) {\n        jm.current = this;\n\n        this.version = __version__;\n        var opts = {};\n        jm.util.json.merge(opts, DEFAULT_OPTIONS);\n        jm.util.json.merge(opts, options);\n\n        if (!opts.container) {\n            logger.error('the options.container should not be null or empty.');\n            return;\n        }\n        this.options = opts;\n        this.inited = false;\n        this.mind = null;\n        this.event_handles = [];\n        this.init();\n    };\n\n    // ============= static object =============================================\n    jm.direction = { left: -1, center: 0, right: 1 };\n    jm.event_type = { show: 1, resize: 2, edit: 3, select: 4 };\n    jm.key = { meta: 1 << 13, ctrl: 1 << 12, alt: 1 << 11, shift: 1 << 10 };\n\n    jm.node = function (sId, iIndex, sTopic, oData, bIsRoot, oParent, eDirection, bExpanded) {\n        if (!sId) { logger.error('invalid nodeid'); return; }\n        if (typeof iIndex != 'number') { logger.error('invalid node index'); return; }\n        if (typeof bExpanded === 'undefined') { bExpanded = true; }\n        this.id = sId;\n        this.index = iIndex;\n        this.topic = sTopic;\n        this.data = oData || {};\n        this.isroot = bIsRoot;\n        this.parent = oParent;\n        this.direction = eDirection;\n        this.expanded = !!bExpanded;\n        this.children = [];\n        this._data = {};\n    };\n\n    jm.node.compare = function (node1, node2) {\n        // '-1' is alwary the last\n        var r = 0;\n        var i1 = node1.index;\n        var i2 = node2.index;\n        if (i1 >= 0 && i2 >= 0) {\n            r = i1 - i2;\n        } else if (i1 == -1 && i2 == -1) {\n            r = 0;\n        } else if (i1 == -1) {\n            r = 1;\n        } else if (i2 == -1) {\n            r = -1;\n        } else {\n            r = 0;\n        }\n        //logger.debug(i1+' <> '+i2+'  =  '+r);\n        return r;\n    };\n\n    jm.node.inherited = function (pnode, node) {\n        if (!!pnode && !!node) {\n            if (pnode.id === node.id) {\n                return true;\n            }\n            if (pnode.isroot) {\n                return true;\n            }\n            var pid = pnode.id;\n            var p = node;\n            while (!p.isroot) {\n                p = p.parent;\n                if (p.id === pid) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n\n    jm.node.prototype = {\n        get_location: function () {\n            var vd = this._data.view;\n            return {\n                x: vd.abs_x,\n                y: vd.abs_y\n            };\n        },\n        get_size: function () {\n            var vd = this._data.view;\n            return {\n                w: vd.width,\n                h: vd.height\n            }\n        }\n    };\n\n\n    jm.mind = function () {\n        this.name = null;\n        this.author = null;\n        this.version = null;\n        this.root = null;\n        this.selected = null;\n        this.nodes = {};\n    };\n\n    jm.mind.prototype = {\n        get_node: function (nodeid) {\n            if (nodeid in this.nodes) {\n                return this.nodes[nodeid];\n            } else {\n                logger.warn('the node[id=' + nodeid + '] can not be found');\n                return null;\n            }\n        },\n\n        set_root: function (nodeid, topic, data) {\n            if (this.root == null) {\n                this.root = new jm.node(nodeid, 0, topic, data, true);\n                this._put_node(this.root);\n            } else {\n                logger.error('root node is already exist');\n            }\n        },  \n        add_node: function (parent_node, nodeid, topic, data, idx, direction, expanded) {\n            if (!jm.util.is_node(parent_node)) {\n                var the_parent_node = this.get_node(parent_node);\n                if (!the_parent_node) {\n                    logger.error('the parent_node[id=' + parent_node + '] can not be found.');\n                    return null;\n                } else {\n     \n                    return this.add_node(the_parent_node, nodeid, topic, data, idx, direction, expanded);\n\n                }\n            }\n            var nodeindex = idx || -1;\n            var node = null;\n            if (parent_node.isroot) {\n                var d = jm.direction.right;\n                if (isNaN(direction)) {\n                    var children = parent_node.children;\n                    var children_len = children.length;\n                    var r = 0;\n                    for (var i = 0; i < children_len; i++) { if (children[i].direction === jm.direction.left) { r--; } else { r++; } }\n                    d = (children_len > 1 && r > 0) ? jm.direction.left : jm.direction.right\n                } else {\n                    d = (direction != jm.direction.left) ? jm.direction.right : jm.direction.left;\n                }\n                node = new jm.node(nodeid, nodeindex, topic, data, false, parent_node, d, expanded);\n            } else {\n                node = new jm.node(nodeid, nodeindex, topic, data, false, parent_node, parent_node.direction, expanded);\n            }\n            if (this._put_node(node)) {\n                parent_node.children.push(node);\n                this._reindex(parent_node);\n\n            } else {\n                logger.error('fail, the nodeid \\'' + node.id + '\\' has been already exist.');\n                node = null;\n            }\n            \n            return node;\n        },\n\n\n        insert_node_before: function (node_before, nodeid, topic, data) {\n            if (!jm.util.is_node(node_before)) {\n                var the_node_before = this.get_node(node_before);\n                if (!the_node_before) {\n                    logger.error('the node_before[id=' + node_before + '] can not be found.');\n                    return null;\n                } else {\n                    return this.insert_node_before(the_node_before, nodeid, topic, data);\n                }\n            }\n            var node_index = node_before.index - 0.5;\n            return this.add_node(node_before.parent, nodeid, topic, data, node_index,'','','insert');\n        },\n\n        get_node_before: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return null;\n                } else {\n                    return this.get_node_before(the_node);\n                }\n            }\n            if (node.isroot) { return null; }\n            var idx = node.index - 2;\n            if (idx >= 0) {\n                return node.parent.children[idx];\n            } else {\n                return null;\n            }\n        },\n\n        insert_node_after: function (node_after, nodeid, topic, data) {\n            if (!jm.util.is_node(node_after)) {\n                var the_node_after = this.get_node(node_before);\n                if (!the_node_after) {\n                    logger.error('the node_after[id=' + node_after + '] can not be found.');\n                    return null;\n                } else {\n                    return this.insert_node_after(the_node_after, nodeid, topic, data);\n                }\n            }\n            var node_index = node_after.index + 0.5;\n            var reVal= this.add_node(node_after.parent, nodeid, topic, data, node_index,'','','insert')\n            return reVal\n\n        },\n\n\n\n        get_node_after: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return null;\n                } else {\n                    return this.get_node_after(the_node);\n                }\n            }\n            if (node.isroot) { return null; }\n            var idx = node.index;\n            var brothers = node.parent.children;\n            if (brothers.length >= idx) {\n                return node.parent.children[idx];\n            } else {\n                return null;\n            }\n        },\n\n        move_node: function (node, beforeid, parentid, direction) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return null;\n                } else {\n                    return this.move_node(the_node, beforeid, parentid, direction);\n                }\n            }\n            if (!parentid) {\n                parentid = node.parent.id;\n            }\n            return this._move_node(node, beforeid, parentid, direction);\n        },\n\n        _flow_node_direction: function (node, direction) {\n            if (typeof direction === 'undefined') {\n                direction = node.direction;\n            } else {\n                node.direction = direction;\n            }\n            var len = node.children.length;\n            while (len--) {\n                this._flow_node_direction(node.children[len], direction);\n            }\n        },\n\n        _move_node_internal: function (node, beforeid) {\n            if (!!node && !!beforeid) {\n                if (beforeid == '_last_') {\n                    node.index = -1;\n                    this._reindex(node.parent);\n                } else if (beforeid == '_first_') {\n                    node.index = 0;\n                    this._reindex(node.parent);\n                } else {\n                    var node_before = (!!beforeid) ? this.get_node(beforeid) : null;\n                    if (node_before != null && node_before.parent != null && node_before.parent.id == node.parent.id) {\n                        node.index = node_before.index - 0.5;\n                        this._reindex(node.parent);\n                    }\n                }\n            }\n            return node;\n        },\n\n        _move_node: function (node, beforeid, parentid, direction) {\n            if (!!node && !!parentid) {\n                if (node.parent.id != parentid) {\n                    // remove from parent's children\n                    var sibling = node.parent.children;\n                    var si = sibling.length;\n                    while (si--) {\n                        if (sibling[si].id == node.id) {\n                            sibling.splice(si, 1);\n                            break;\n                        }\n                    }\n                    node.parent = this.get_node(parentid);\n                    node.parent.children.push(node);\n                }\n\n                if (node.parent.isroot) {\n                    if (direction == jm.direction.left) {\n                        node.direction = direction;\n                    } else {\n                        node.direction = jm.direction.right;\n                    }\n                } else {\n                    node.direction = node.parent.direction;\n                }\n                this._move_node_internal(node, beforeid);\n                this._flow_node_direction(node);\n            }\n            return node;\n        },\n\n        remove_node: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return false;\n                } else {\n                    return this.remove_node(the_node);\n                }\n            }\n            if (!node) {\n                logger.error('fail, the node can not be found');\n                return false;\n            }\n            if (node.isroot) {\n                logger.error('fail, can not remove root node');\n                return false;\n            }\n            if (this.selected != null && this.selected.id == node.id) {\n                this.selected = null;\n            }\n            // clean all subordinate nodes\n            var children = node.children;\n            var ci = children.length;\n            while (ci--) {\n                this.remove_node(children[ci]);\n            }\n            // clean all children\n            children.length = 0;\n            // remove from parent's children\n            var sibling = node.parent.children;\n            var si = sibling.length;\n            while (si--) {\n                if (sibling[si].id == node.id) {\n                    sibling.splice(si, 1);\n                    break;\n                }\n            }\n            // remove from global nodes\n            delete this.nodes[node.id];\n            // clean all properties\n            for (var k in node) {\n                delete node[k];\n            }\n            // remove it's self\n            node = null;\n            //delete node;\n            return true;\n        },\n\n        _put_node: function (node) {\n            if (node.id in this.nodes) {\n                logger.warn('the nodeid \\'' + node.id + '\\' has been already exist.');\n                return false;\n            } else {\n                this.nodes[node.id] = node;\n                return true;\n            }\n        },\n\n        _reindex: function (node) {\n            if (node instanceof jm.node) {\n                node.children.sort(jm.node.compare);\n                for (var i = 0; i < node.children.length; i++) {\n                    node.children[i].index = i + 1;\n                }\n            }\n        },\n    };\n\n    jm.format = {\n        node_tree: {\n            example: {\n                \"meta\": {\n                    \"name\": __name__,\n                    \"author\": __author__,\n                    \"version\": __version__\n                },\n                \"format\": \"node_tree\",\n                \"data\": { \"id\": \"root\", \"topic\": \"jsMind Example\" }\n            },\n            get_mind: function (source) {\n                var df = jm.format.node_tree;\n                var mind = new jm.mind();\n                mind.name = source.meta.name;\n                mind.author = source.meta.author;\n                mind.version = source.meta.version;\n                df._parse(mind, source.data);\n                return mind;\n            },\n            get_data: function (mind) {\n                var df = jm.format.node_tree;\n                var json = {};\n                json.meta = {\n                    name: mind.name,\n                    author: mind.author,\n                    version: mind.version\n                };\n                json.format = 'node_tree';\n                json.data = df._buildnode(mind.root);\n                return json;\n            },\n\n            _parse: function (mind, node_root) {\n                var df = jm.format.node_tree;\n                var data = df._extract_data(node_root);\n                mind.set_root(node_root.id, node_root.topic, data);\n                if ('children' in node_root) {\n                    var children = node_root.children;\n                    for (var i = 0; i < children.length; i++) {\n                        df._extract_subnode(mind, mind.root, children[i]);\n                    }\n                }\n            },\n\n            _extract_data: function (node_json) {\n                var data = {};\n                for (var k in node_json) {\n                    if (k == 'id' || k == 'topic' || k == 'children' || k == 'direction' || k == 'expanded') {\n                        continue;\n                    }\n                    data[k] = node_json[k];\n                }\n                return data;\n            },\n\n            _extract_subnode: function (mind, node_parent, node_json) {\n                var df = jm.format.node_tree;\n                var data = df._extract_data(node_json);\n                var d = null;\n                if (node_parent.isroot) {\n                    d = node_json.direction == 'left' ? jm.direction.left : jm.direction.right;\n                }\n                var node = mind.add_node(node_parent, node_json.id, node_json.topic, data, null, d, node_json.expanded);\n                if ('children' in node_json) {\n                    var children = node_json.children;\n                    for (var i = 0; i < children.length; i++) {\n                        df._extract_subnode(mind, node, children[i]);\n                    }\n                }\n            },\n\n            _buildnode: function (node) {\n                var df = jm.format.node_tree;\n                if (!(node instanceof jm.node)) { return; }\n                var o = {\n                    id: node.id,\n                    topic: node.topic,\n                    expanded: node.expanded\n                };\n                if (!!node.parent && node.parent.isroot) {\n                    o.direction = node.direction == jm.direction.left ? 'left' : 'right';\n                }\n                if (node.data != null) {\n                    var node_data = node.data;\n                    for (var k in node_data) {\n                        o[k] = node_data[k];\n                    }\n                }\n                var children = node.children;\n                if (children.length > 0) {\n                    o.children = [];\n                    for (var i = 0; i < children.length; i++) {\n                        o.children.push(df._buildnode(children[i]));\n                    }\n                }\n                return o;\n            }\n        },\n\n        node_array: {\n            example: {\n                \"meta\": {\n                    \"name\": __name__,\n                    \"author\": __author__,\n                    \"version\": __version__\n                },\n                \"format\": \"node_array\",\n                \"data\": [\n                    { \"id\": \"root\", \"topic\": \"jsMind Example\", \"isroot\": true }\n                ]\n            },\n\n            get_mind: function (source) {\n                var df = jm.format.node_array;\n                var mind = new jm.mind();\n                mind.name = source.meta.name;\n                mind.author = source.meta.author;\n                mind.version = source.meta.version;\n                df._parse(mind, source.data);\n                return mind;\n            },\n\n            get_data: function (mind) {\n                var df = jm.format.node_array;\n                var json = {};\n                json.meta = {\n                    name: mind.name,\n                    author: mind.author,\n                    version: mind.version\n                };\n                json.format = 'node_array';\n                json.data = [];\n                df._array(mind, json.data);\n                return json;\n            },\n\n            _parse: function (mind, node_array) {\n                var df = jm.format.node_array;\n                var narray = node_array.slice(0);\n                // reverse array for improving looping performance\n                narray.reverse();\n                var root_id = df._extract_root(mind, narray);\n                if (!!root_id) {\n                    df._extract_subnode(mind, root_id, narray);\n                } else {\n                    logger.error('root node can not be found');\n                }\n            },\n\n            _extract_root: function (mind, node_array) {\n                var df = jm.format.node_array;\n                var i = node_array.length;\n                while (i--) {\n                    if ('isroot' in node_array[i] && node_array[i].isroot) {\n                        var root_json = node_array[i];\n                        var data = df._extract_data(root_json);\n                        mind.set_root(root_json.id, root_json.topic, data);\n                        node_array.splice(i, 1);\n                        return root_json.id;\n                    }\n                }\n                return null;\n            },\n\n            _extract_subnode: function (mind, parentid, node_array) {\n                var df = jm.format.node_array;\n                var i = node_array.length;\n                var node_json = null;\n                var data = null;\n                var extract_count = 0;\n                while (i--) {\n                    node_json = node_array[i];\n                    if (node_json.parentid == parentid) {\n                        data = df._extract_data(node_json);\n                        var d = null;\n                        var node_direction = node_json.direction;\n                        if (!!node_direction) {\n                            d = node_direction == 'left' ? jm.direction.left : jm.direction.right;\n                        }\n                        mind.add_node(parentid, node_json.id, node_json.topic, data, null, d, node_json.expanded);\n                        node_array.splice(i, 1);\n                        extract_count++;\n                        var sub_extract_count = df._extract_subnode(mind, node_json.id, node_array);\n                        if (sub_extract_count > 0) {\n                            // reset loop index after extract subordinate node\n                            i = node_array.length;\n                            extract_count += sub_extract_count;\n                        }\n                    }\n                }\n                return extract_count;\n            },\n\n            _extract_data: function (node_json) {\n                var data = {};\n                for (var k in node_json) {\n                    if (k == 'id' || k == 'topic' || k == 'parentid' || k == 'isroot' || k == 'direction' || k == 'expanded') {\n                        continue;\n                    }\n                    data[k] = node_json[k];\n                }\n                return data;\n            },\n\n            _array: function (mind, node_array) {\n                var df = jm.format.node_array;\n                df._array_node(mind.root, node_array);\n            },\n\n            _array_node: function (node, node_array) {\n                var df = jm.format.node_array;\n                if (!(node instanceof jm.node)) { return; }\n                var o = {\n                    id: node.id,\n                    topic: node.topic,\n                    expanded: node.expanded\n                };\n                if (!!node.parent) {\n                    o.parentid = node.parent.id;\n                }\n                if (node.isroot) {\n                    o.isroot = true;\n                }\n                if (!!node.parent && node.parent.isroot) {\n                    o.direction = node.direction == jm.direction.left ? 'left' : 'right';\n                }\n                if (node.data != null) {\n                    var node_data = node.data;\n                    for (var k in node_data) {\n                        o[k] = node_data[k];\n                    }\n                }\n                node_array.push(o);\n                var ci = node.children.length;\n                for (var i = 0; i < ci; i++) {\n                    df._array_node(node.children[i], node_array);\n                }\n            },\n        },\n\n        freemind: {\n            example: {\n                \"meta\": {\n                    \"name\": __name__,\n                    \"author\": __author__,\n                    \"version\": __version__\n                },\n                \"format\": \"freemind\",\n                \"data\": \"<map version=\\\"1.0.1\\\"><node ID=\\\"root\\\" TEXT=\\\"freemind Example\\\"/></map>\"\n            },\n            get_mind: function (source) {\n                var df = jm.format.freemind;\n                var mind = new jm.mind();\n                mind.name = source.meta.name;\n                mind.author = source.meta.author;\n                mind.version = source.meta.version;\n                var xml = source.data;\n                var xml_doc = df._parse_xml(xml);\n                var xml_root = df._find_root(xml_doc);\n                df._load_node(mind, null, xml_root);\n                return mind;\n            },\n\n            get_data: function (mind) {\n                var df = jm.format.freemind;\n                var json = {};\n                json.meta = {\n                    name: mind.name,\n                    author: mind.author,\n                    version: mind.version\n                };\n                json.format = 'freemind';\n                var xmllines = [];\n                xmllines.push('<map version=\\\"1.0.1\\\">');\n                df._buildmap(mind.root, xmllines);\n                xmllines.push('</map>');\n                json.data = xmllines.join(' ');\n                return json;\n            },\n\n            _parse_xml: function (xml) {\n                var xml_doc = null;\n                if (window.DOMParser) {\n                    var parser = new DOMParser();\n                    xml_doc = parser.parseFromString(xml, 'text/xml');\n                } else { // Internet Explorer\n                    xml_doc = new ActiveXObject('Microsoft.XMLDOM');\n                    xml_doc.async = false;\n                    xml_doc.loadXML(xml);\n                }\n                return xml_doc;\n            },\n\n            _find_root: function (xml_doc) {\n                var nodes = xml_doc.childNodes;\n                var node = null;\n                var root = null;\n                var n = null;\n                for (var i = 0; i < nodes.length; i++) {\n                    n = nodes[i];\n                    if (n.nodeType == 1 && n.tagName == 'map') {\n                        node = n;\n                        break;\n                    }\n                }\n                if (!!node) {\n                    var ns = node.childNodes;\n                    node = null;\n                    for (var i = 0; i < ns.length; i++) {\n                        n = ns[i];\n                        if (n.nodeType == 1 && n.tagName == 'node') {\n                            node = n;\n                            break;\n                        }\n                    }\n                }\n                return node;\n            },\n\n            _load_node: function (mind, parent_id, xml_node) {\n                var df = jm.format.freemind;\n                var node_id = xml_node.getAttribute('ID');\n                var node_topic = xml_node.getAttribute('TEXT');\n                // look for richcontent\n                if (node_topic == null) {\n                    var topic_children = xml_node.childNodes;\n                    var topic_child = null;\n                    for (var i = 0; i < topic_children.length; i++) {\n                        topic_child = topic_children[i];\n                        //logger.debug(topic_child.tagName);\n                        if (topic_child.nodeType == 1 && topic_child.tagName === 'richcontent') {\n                            node_topic = topic_child.textContent;\n                            break;\n                        }\n                    }\n                }\n                var node_data = df._load_attributes(xml_node);\n                var node_expanded = ('expanded' in node_data) ? (node_data.expanded == 'true') : true;\n                delete node_data.expanded;\n\n                var node_position = xml_node.getAttribute('POSITION');\n                var node_direction = null;\n                if (!!node_position) {\n                    node_direction = node_position == 'left' ? jm.direction.left : jm.direction.right;\n                }\n                //logger.debug(node_position +':'+ node_direction);\n                if (!!parent_id) {\n                    mind.add_node(parent_id, node_id, node_topic, node_data, null, node_direction, node_expanded);\n                } else {\n                    mind.set_root(node_id, node_topic, node_data);\n                }\n                var children = xml_node.childNodes;\n                var child = null;\n                for (var i = 0; i < children.length; i++) {\n                    child = children[i];\n                    if (child.nodeType == 1 && child.tagName == 'node') {\n                        df._load_node(mind, node_id, child);\n                    }\n                }\n            },\n\n            _load_attributes: function (xml_node) {\n                var children = xml_node.childNodes;\n                var attr = null;\n                var attr_data = {};\n                for (var i = 0; i < children.length; i++) {\n                    attr = children[i];\n                    if (attr.nodeType == 1 && attr.tagName === 'attribute') {\n                        attr_data[attr.getAttribute('NAME')] = attr.getAttribute('VALUE');\n                    }\n                }\n                return attr_data;\n            },\n\n            _buildmap: function (node, xmllines) {\n                var df = jm.format.freemind;\n                var pos = null;\n                if (!!node.parent && node.parent.isroot) {\n                    pos = node.direction === jm.direction.left ? 'left' : 'right';\n                }\n                xmllines.push('<node');\n                xmllines.push('ID=\\\"' + node.id + '\\\"');\n                if (!!pos) {\n                    xmllines.push('POSITION=\\\"' + pos + '\\\"');\n                }\n                xmllines.push('TEXT=\\\"' + node.topic + '\\\">');\n\n                // store expanded status as an attribute\n                xmllines.push('<attribute NAME=\\\"expanded\\\" VALUE=\\\"' + node.expanded + '\\\"/>');\n\n                // for attributes\n                var node_data = node.data;\n                if (node_data != null) {\n                    for (var k in node_data) {\n                        xmllines.push('<attribute NAME=\\\"' + k + '\\\" VALUE=\\\"' + node_data[k] + '\\\"/>');\n                    }\n                }\n\n                // for children\n                var children = node.children;\n                for (var i = 0; i < children.length; i++) {\n                    df._buildmap(children[i], xmllines);\n                }\n\n                xmllines.push('</node>');\n            },\n        },\n    };\n\n    // ============= utility object =============================================\n\n    jm.util = {\n        is_node: function (node) {\n            return !!node && node instanceof jm.node;\n        },\n        ajax: {\n            _xhr: function () {\n                var xhr = null;\n                if (window.XMLHttpRequest) {\n                    xhr = new XMLHttpRequest();\n                } else {\n                    try {\n                        xhr = new ActiveXObject('Microsoft.XMLHTTP');\n                    } catch (e) { }\n                }\n                return xhr;\n            },\n            _eurl: function (url) {\n                return encodeURIComponent(url);\n            },\n            request: function (url, param, method, callback, fail_callback) {\n                var a = jm.util.ajax;\n                var p = null;\n                var tmp_param = [];\n                for (var k in param) {\n                    tmp_param.push(a._eurl(k) + '=' + a._eurl(param[k]));\n                }\n                if (tmp_param.length > 0) {\n                    p = tmp_param.join('&');\n                }\n                var xhr = a._xhr();\n                if (!xhr) { return; }\n                xhr.onreadystatechange = function () {\n                    if (xhr.readyState == 4) {\n                        if (xhr.status == 200 || xhr.status == 0) {\n                            if (typeof callback === 'function') {\n                                var data = jm.util.json.string2json(xhr.responseText);\n                                if (data != null) {\n                                    callback(data);\n                                } else {\n                                    callback(xhr.responseText);\n                                }\n                            }\n                        } else {\n                            if (typeof fail_callback === 'function') {\n                                fail_callback(xhr);\n                            } else {\n                                logger.error('xhr request failed.', xhr);\n                            }\n                        }\n                    }\n                }\n                method = method || 'GET';\n                xhr.open(method, url, true);\n                xhr.setRequestHeader('If-Modified-Since', '0');\n                if (method == 'POST') {\n                    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded;charset=utf-8');\n                    xhr.send(p);\n                } else {\n                    xhr.send();\n                }\n            },\n            get: function (url, callback) {\n                return jm.util.ajax.request(url, {}, 'GET', callback);\n            },\n            post: function (url, param, callback) {\n                return jm.util.ajax.request(url, param, 'POST', callback);\n            }\n        },\n\n        dom: {\n            //target,eventType,handler\n            add_event: function (t, e, h) {\n                if (!!t.addEventListener) {\n                    t.addEventListener(e, h, false);\n                } else {\n                    t.attachEvent('on' + e, h);\n                }\n            }\n        },\n\n        file: {\n            read: function (file_data, fn_callback) {\n                var reader = new FileReader();\n                reader.onload = function () {\n                    if (typeof fn_callback === 'function') {\n                        fn_callback(this.result, file_data.name);\n                    }\n                };\n                reader.readAsText(file_data);\n            },\n\n            save: function (file_data, type, name) {\n                var blob;\n                if (typeof $w.Blob === 'function') {\n                    blob = new Blob([file_data], { type: type });\n                } else {\n                    var BlobBuilder = $w.BlobBuilder || $w.MozBlobBuilder || $w.WebKitBlobBuilder || $w.MSBlobBuilder;\n                    var bb = new BlobBuilder();\n                    bb.append(file_data);\n                    blob = bb.getBlob(type);\n                }\n                if (navigator.msSaveBlob) {\n                    navigator.msSaveBlob(blob, name);\n                } else {\n                    var URL = $w.URL || $w.webkitURL;\n                    var bloburl = URL.createObjectURL(blob);\n                    var anchor = $c('a');\n                    if ('download' in anchor) {\n                        anchor.style.visibility = 'hidden';\n                        anchor.href = bloburl;\n                        anchor.download = name;\n                        $d.body.appendChild(anchor);\n                        var evt = $d.createEvent('MouseEvents');\n                        evt.initEvent('click', true, true);\n                        anchor.dispatchEvent(evt);\n                        $d.body.removeChild(anchor);\n                    } else {\n                        location.href = bloburl;\n                    }\n                }\n            }\n        },\n\n        json: {\n            json2string: function (json) {\n                if (!!JSON) {\n                    try {\n                        var json_str = JSON.stringify(json);\n                        return json_str;\n                    } catch (e) {\n                        logger.warn(e);\n                        logger.warn('can not convert to string');\n                        return null;\n                    }\n                }\n            },\n            string2json: function (json_str) {\n                if (!!JSON) {\n                    try {\n                        var json = JSON.parse(json_str);\n                        return json;\n                    } catch (e) {\n                        logger.warn(e);\n                        logger.warn('can not parse to json');\n                        return null;\n                    }\n                }\n            },\n            merge: function (b, a) {\n                for (var o in a) {\n                    if (o in b) {\n                        if (typeof b[o] === 'object' &&\n                            Object.prototype.toString.call(b[o]).toLowerCase() == '[object object]' &&\n                            !b[o].length) {\n                            jm.util.json.merge(b[o], a[o]);\n                        } else {\n                            b[o] = a[o];\n                        }\n                    } else {\n                        b[o] = a[o];\n                    }\n                }\n                return b;\n            }\n        },\n\n        uuid: {\n            newid: function () {\n                return (new Date().getTime().toString(16) + Math.random().toString(16).substr(2)).substr(2, 16);\n            }\n        },\n\n        text: {\n            is_empty: function (s) {\n                if (!s) { return true; }\n                return s.replace(/\\s*/, '').length == 0;\n            }\n        }\n    };\n\n    jm.prototype = {\n        init: function () {\n            if (this.inited) { return; }\n            this.inited = true;\n\n            var opts = this.options;\n\n            var opts_layout = {\n                mode: opts.mode,\n                hspace: opts.layout.hspace,\n                vspace: opts.layout.vspace,\n                pspace: opts.layout.pspace\n            }\n            var opts_view = {\n                container: opts.container,\n                support_html: opts.support_html,\n                engine: opts.view.engine,\n                hmargin: opts.view.hmargin,\n                vmargin: opts.view.vmargin,\n                line_width: opts.view.line_width,\n                line_color: opts.view.line_color\n            };\n            // create instance of function provider\n            this.data = new jm.data_provider(this);\n            this.layout = new jm.layout_provider(this, opts_layout);\n            this.view = new jm.view_provider(this, opts_view);\n            this.shortcut = new jm.shortcut_provider(this, opts.shortcut);\n\n            this.data.init();\n            this.layout.init();\n            this.view.init();\n            this.shortcut.init();\n\n            this._event_bind();\n\n            jm.init_plugins(this);\n        },\n\n        enable_edit: function () {\n            this.options.editable = true;\n        },\n\n        disable_edit: function () {\n            this.options.editable = false;\n        },\n\n        // call enable_event_handle('dblclick')\n        // options are 'mousedown', 'click', 'dblclick'\n        enable_event_handle: function (event_handle) {\n            this.options.default_event_handle['enable_' + event_handle + '_handle'] = true;\n        },\n\n        // call disable_event_handle('dblclick')\n        // options are 'mousedown', 'click', 'dblclick'\n        disable_event_handle: function (event_handle) {\n            this.options.default_event_handle['enable_' + event_handle + '_handle'] = false;\n        },\n\n        get_editable: function () {\n            return this.options.editable;\n        },\n\n        set_theme: function (theme) {\n            var theme_old = this.options.theme;\n            this.options.theme = (!!theme) ? theme : null;\n            if (theme_old != this.options.theme) {\n                this.view.reset_theme();\n                this.view.reset_custom_style();\n            }\n        },\n        _event_bind: function () {\n            this.view.add_event(this, 'mousedown', this.mousedown_handle);\n            this.view.add_event(this, 'click', this.click_handle);\n            this.view.add_event(this, 'dblclick', this.dblclick_handle);\n        },\n\n        mousedown_handle: function (e) {\n            if (!this.options.default_event_handle['enable_mousedown_handle']) {\n                return;\n            }\n            var element = e.target || event.srcElement;\n            var nodeid = this.view.get_binded_nodeid(element);\n            if (!!nodeid) {\n                if (element.tagName.toLowerCase() == 'jmnode') {\n                    this.select_node(nodeid);\n                }\n            } else {\n                this.select_clear();\n            }\n        },\n\n        click_handle: function (e) {\n            if (!this.options.default_event_handle['enable_click_handle']) {\n                return;\n            }\n            var element = e.target || event.srcElement;\n            var isexpander = this.view.is_expander(element);\n            if (isexpander) {\n                var nodeid = this.view.get_binded_nodeid(element);\n                if (!!nodeid) {\n                    this.toggle_node(nodeid);\n                }\n            }\n        },\n\n        dblclick_handle: function (e) {\n            if (!this.options.default_event_handle['enable_dblclick_handle']) {\n                return;\n            }\n            if (this.get_editable()) {\n                var element = e.target || event.srcElement;\n                var nodeid = this.view.get_binded_nodeid(element);\n                if (!!nodeid) {\n                    this.begin_edit(nodeid);\n                }\n            }\n        },\n\n        begin_edit: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return false;\n                } else {\n                    return this.begin_edit(the_node);\n                }\n            }\n            if (this.get_editable()) {\n                this.view.edit_node_begin(node);\n            } else {\n                logger.error('fail, this mind map is not editable.');\n                return;\n            }\n        },\n\n        end_edit: function () {\n            this.view.edit_node_end();\n        },\n\n        toggle_node: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.toggle_node(the_node);\n                }\n            }\n            if (node.isroot) { return; }\n            this.view.save_location(node);\n            this.layout.toggle_node(node);\n            this.view.relayout();\n            this.view.restore_location(node);\n        },\n\n        expand_node: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.expand_node(the_node);\n                }\n            }\n            if (node.isroot) { return; }\n            this.view.save_location(node);\n            this.layout.expand_node(node);\n            this.view.relayout();\n            this.view.restore_location(node);\n        },\n\n        collapse_node: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.collapse_node(the_node);\n                }\n            }\n            if (node.isroot) { return; }\n            this.view.save_location(node);\n            this.layout.collapse_node(node);\n            this.view.relayout();\n            this.view.restore_location(node);\n        },\n\n        expand_all: function () {\n            this.layout.expand_all();\n            this.view.relayout();\n        },\n\n        collapse_all: function () {\n            this.layout.collapse_all();\n            this.view.relayout();\n        },\n\n        expand_to_depth: function (depth) {\n            this.layout.expand_to_depth(depth);\n            this.view.relayout();\n        },\n\n        _reset: function () {\n            this.view.reset();\n            this.layout.reset();\n            this.data.reset();\n        },\n\n        _show: function (mind) {\n            var m = mind || jm.format.node_array.example;\n\n            this.mind = this.data.load(m);\n            if (!this.mind) {\n                logger.error('data.load error');\n                return;\n            } else {\n                logger.debug('data.load ok');\n            }\n\n            this.view.load();\n            logger.debug('view.load ok');\n\n            this.layout.layout();\n            logger.debug('layout.layout ok');\n\n            this.view.show(true);\n            logger.debug('view.show ok');\n\n            this.invoke_event_handle(jm.event_type.show, { data: [mind] });\n        },\n\n        show: function (mind) {\n            this._reset();\n            this._show(mind);\n        },\n\n        get_meta: function () {\n            return {\n                name: this.mind.name,\n                author: this.mind.author,\n                version: this.mind.version\n            };\n        },\n\n        get_data: function (data_format) {\n            var df = data_format || 'node_tree';\n            return this.data.get_data(df);\n        },\n\n        get_root: function () {\n            return this.mind.root;\n        },\n\n        get_node: function (nodeid) {\n            return this.mind.get_node(nodeid);\n        },\n\n        add_node: function (parent_node, nodeid, topic, data, from) {\n            if (this.get_editable()) {\n                var node = this.mind.add_node(parent_node, nodeid, topic, data);\n                if (!!node) {\n                    this.view.add_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                    this.view.reset_node_custom_style(node);\n                    this.expand_node(parent_node);\n                    this.invoke_event_handle(jm.event_type.edit, { evt: 'add_node', data: [parent_node.id, nodeid, topic, data], node: nodeid });\n                }\n\n                if (this.isWhenIncluded(node) && from != 'break'){\n                    this.add_YN_tail(node, true)\n                }\n\n                return node;\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        insert_node_before: function (node_before, nodeid, topic, data) {\n            if (this.get_editable()) {\n                var beforeid = jm.util.is_node(node_before) ? node_before.id : node_before;\n                var node = this.mind.insert_node_before(node_before, nodeid, topic, data);\n                if (!!node) {\n                    this.view.add_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                    this.invoke_event_handle(jm.event_type.edit, { evt: 'insert_node_before', data: [beforeid, nodeid, topic, data], node: nodeid });\n                }\n                console.log(\"OK.... node before\")\n                return node;\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        insert_node_after: function (node_after, nodeid, topic, data) {\n\n            if (this.get_editable()) {\n                var afterid = jm.util.is_node(node_after) ? node_after.id : node_after;\n                var node = this.mind.insert_node_after(node_after, nodeid, topic, data);\n                if (!!node) {\n                    this.view.add_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                    this.invoke_event_handle(jm.event_type.edit, { evt: 'insert_node_after', data: [afterid, nodeid, topic, data], node: nodeid });\n                }\n                if (this.isWhenIncluded(node)){\n                    this.add_YN_tail(node, true)\n\n                }\n                return node;\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n        isWhenIncluded: function(node) {\n\n            if (node['isroot']==true){\n                return false\n            }\n\n            if (node['id']=='when'){\n                \n                return true \n\n            }\n            \n            return this.isWhenIncluded(node['parent']);\n                        \n\n        },\n\n        remove_node: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return false;\n                } else {\n                    return this.remove_node(the_node);\n                }\n            }\n            if (this.get_editable()) {\n                if (node.isroot) {\n                    logger.error('fail, can not remove root node');\n                    return false;\n                }\n                var nodeid = node.id;\n                var parentid = node.parent.id;\n                var parent_node = this.get_node(parentid);\n                this.view.save_location(parent_node);\n                this.view.remove_node(node);\n                this.mind.remove_node(node);\n                this.layout.layout();\n                this.view.show(false);\n                this.view.restore_location(parent_node);\n                this.invoke_event_handle(jm.event_type.edit, { evt: 'remove_node', data: [nodeid], node: parentid });\n                return true;\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return false;\n            }\n        },\n\n        update_node: function (nodeid, topic) {\n            if (this.get_editable()) {\n                if (jm.util.text.is_empty(topic)) {\n                    logger.warn('fail, topic can not be empty');\n                    return;\n                }\n                var node = this.get_node(nodeid);\n                if (!!node) {\n                    if (node.topic === topic) {\n                        logger.info('nothing changed');\n                        this.view.update_node(node);\n                        return;\n                    }\n                    node.topic = topic;\n                    this.view.update_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                    this.invoke_event_handle(jm.event_type.edit, { evt: 'update_node', data: [nodeid, topic], node: nodeid });\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return;\n            }\n        },\n\n        move_node: function (nodeid, beforeid, parentid, direction) {\n            if (this.get_editable()) {\n                var node = this.mind.move_node(nodeid, beforeid, parentid, direction);\n                if (!!node) {\n                    this.view.update_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                    this.invoke_event_handle(jm.event_type.edit, { evt: 'move_node', data: [nodeid, beforeid, parentid, direction], node: nodeid });\n                }\n                console.log(\"move_node\")\n            \n                if (this.isWhenIncluded(node) && !this.have_YN_tail(node)){\n                    this.add_YN_tail(node)\n\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return;\n            }\n        },\n        add_YN_tail: function(node, isInsert = false){\n            var yes_id = jm.util.uuid.newid();\n            var no_id = jm.util.uuid.newid();\n            \n            if ((node['parent']['topic'] == 'Yes' || node['parent']['topic'] == 'No') && isInsert == false){\n                console.log('add_YN is not working')\n            }\n            else{\n                this.add_node(node,yes_id,\"Yes\",'','break')\n                this.add_node(node,no_id,\"No\",'','break')\n            }\n            // this.add_node(node,yes_id,\"Yes\",'','break')\n            // this.add_node(node,no_id,\"No\",'','break')\n\n\n        },\n        have_YN_tail: function(node){\n            \n            if (node['children'] == undefined){\n                return false\n            }\n            else{\n                if (node['children'][0]['topic'] == 'Yes' || node['children'][0]['topic'] == 'No' ){\n                    return true\n                }\n            }\n            return false\n        },\n\n        select_node: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.select_node(the_node);\n                }\n            }\n            if (!this.layout.is_visible(node)) {\n                return;\n            }\n            this.mind.selected = node;\n            this.view.select_node(node);\n        },\n\n        get_selected_node: function () {\n            if (!!this.mind) {\n                return this.mind.selected;\n            } else {\n                return null;\n            }\n        },\n\n        select_clear: function () {\n            if (!!this.mind) {\n                this.mind.selected = null;\n                this.view.select_clear();\n            }\n        },\n\n        is_node_visible: function (node) {\n            return this.layout.is_visible(node);\n        },\n\n        find_node_before: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.find_node_before(the_node);\n                }\n            }\n            if (node.isroot) { return null; }\n            var n = null;\n            if (node.parent.isroot) {\n                var c = node.parent.children;\n                var prev = null;\n                var ni = null;\n                for (var i = 0; i < c.length; i++) {\n                    ni = c[i];\n                    if (node.direction === ni.direction) {\n                        if (node.id === ni.id) {\n                            n = prev;\n                        }\n                        prev = ni;\n                    }\n                }\n            } else {\n                n = this.mind.get_node_before(node);\n            }\n            return n;\n        },\n\n        find_node_after: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.find_node_after(the_node);\n                }\n            }\n            if (node.isroot) { return null; }\n            var n = null;\n            if (node.parent.isroot) {\n                var c = node.parent.children;\n                var getthis = false;\n                var ni = null;\n                for (var i = 0; i < c.length; i++) {\n                    ni = c[i];\n                    if (node.direction === ni.direction) {\n                        if (getthis) {\n                            n = ni;\n                            break;\n                        }\n                        if (node.id === ni.id) {\n                            getthis = true;\n                        }\n                    }\n                }\n            } else {\n                n = this.mind.get_node_after(node);\n            }\n            return n;\n        },\n\n        set_node_color: function (nodeid, bgcolor, fgcolor) {\n            if (this.get_editable()) {\n                var node = this.mind.get_node(nodeid);\n                if (!!node) {\n                    if (!!bgcolor) {\n                        node.data['background-color'] = bgcolor;\n                    }\n                    if (!!fgcolor) {\n                        node.data['foreground-color'] = fgcolor;\n                    }\n                    this.view.reset_node_custom_style(node);\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        set_node_font_style: function (nodeid, size, weight, style) {\n            if (this.get_editable()) {\n                var node = this.mind.get_node(nodeid);\n                if (!!node) {\n                    if (!!size) {\n                        node.data['font-size'] = size;\n                    }\n                    if (!!weight) {\n                        node.data['font-weight'] = weight;\n                    }\n                    if (!!style) {\n                        node.data['font-style'] = style;\n                    }\n                    this.view.reset_node_custom_style(node);\n                    this.view.update_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        set_node_background_image: function (nodeid, image, width, height, rotation) {\n            if (this.get_editable()) {\n                var node = this.mind.get_node(nodeid);\n                if (!!node) {\n                    if (!!image) {\n                        node.data['background-image'] = image;\n                    }\n                    if (!!width) {\n                        node.data['width'] = width;\n                    }\n                    if (!!height) {\n                        node.data['height'] = height;\n                    }\n                    if (!!rotation) {\n                        node.data['background-rotation'] = rotation;\n                    }\n                    this.view.reset_node_custom_style(node);\n                    this.view.update_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        set_node_background_rotation: function (nodeid, rotation) {\n            if (this.get_editable()) {\n                var node = this.mind.get_node(nodeid);\n                if (!!node) {\n                    if (!node.data['background-image']) {\n                        logger.error('fail, only can change rotation angle of node with background image');\n                        return null;\n                    }\n                    node.data['background-rotation'] = rotation;\n                    this.view.reset_node_custom_style(node);\n                    this.view.update_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        resize: function () {\n            this.view.resize();\n        },\n\n        // callback(type ,data)\n        add_event_listener: function (callback) {\n            if (typeof callback === 'function') {\n                this.event_handles.push(callback);\n            }\n        },\n\n        invoke_event_handle: function (type, data) {\n            var j = this;\n            $w.setTimeout(function () {\n                j._invoke_event_handle(type, data);\n            }, 0);\n        },\n\n        _invoke_event_handle: function (type, data) {\n            var l = this.event_handles.length;\n            for (var i = 0; i < l; i++) {\n                this.event_handles[i](type, data);\n            }\n        },\n\n\n    };\n\n    // ============= data provider =============================================\n\n    jm.data_provider = function (jm) {\n        this.jm = jm;\n    };\n\n    jm.data_provider.prototype = {\n        init: function () {\n            logger.debug('data.init');\n        },\n\n        reset: function () {\n            logger.debug('data.reset');\n        },\n\n        load: function (mind_data) {\n            var df = null;\n            var mind = null;\n            if (typeof mind_data === 'object') {\n                if (!!mind_data.format) {\n                    df = mind_data.format;\n                } else {\n                    df = 'node_tree';\n                }\n            } else {\n                df = 'freemind';\n            }\n\n            if (df == 'node_array') {\n                mind = jm.format.node_array.get_mind(mind_data);\n            } else if (df == 'node_tree') {\n                mind = jm.format.node_tree.get_mind(mind_data);\n            } else if (df == 'freemind') {\n                mind = jm.format.freemind.get_mind(mind_data);\n            } else {\n                logger.warn('unsupported format');\n            }\n            return mind;\n        },\n\n        get_data: function (data_format) {\n            var data = null;\n            if (data_format == 'node_array') {\n                data = jm.format.node_array.get_data(this.jm.mind);\n            } else if (data_format == 'node_tree') {\n                data = jm.format.node_tree.get_data(this.jm.mind);\n            } else if (data_format == 'freemind') {\n                data = jm.format.freemind.get_data(this.jm.mind);\n            } else {\n                logger.error('unsupported ' + data_format + ' format');\n            }\n            return data;\n        },\n    };\n\n    // ============= layout provider ===========================================\n\n    jm.layout_provider = function (jm, options) {\n        this.opts = options;\n        this.jm = jm;\n        this.isside = (this.opts.mode == 'side');\n        this.bounds = null;\n\n        this.cache_valid = false;\n    };\n\n    jm.layout_provider.prototype = {\n        init: function () {\n            logger.debug('layout.init');\n        },\n        reset: function () {\n            logger.debug('layout.reset');\n            this.bounds = { n: 0, s: 0, w: 0, e: 0 };\n        },\n        layout: function () {\n            logger.debug('layout.layout');\n            this.layout_direction();\n            this.layout_offset();\n        },\n\n        layout_direction: function () {\n            this._layout_direction_root();\n        },\n\n        _layout_direction_root: function () {\n            var node = this.jm.mind.root;\n            // logger.debug(node);\n            var layout_data = null;\n            if ('layout' in node._data) {\n                layout_data = node._data.layout;\n            } else {\n                layout_data = {};\n                node._data.layout = layout_data;\n            }\n            var children = node.children;\n            var children_count = children.length;\n            layout_data.direction = jm.direction.center;\n            layout_data.side_index = 0;\n            if (this.isside) {\n                var i = children_count;\n                while (i--) {\n                    this._layout_direction_side(children[i], jm.direction.right, i);\n                }\n            } else {\n                var i = children_count;\n                var subnode = null;\n                while (i--) {\n                    subnode = children[i];\n                    if (subnode.direction == jm.direction.left) {\n                        this._layout_direction_side(subnode, jm.direction.left, i);\n                    } else {\n                        this._layout_direction_side(subnode, jm.direction.right, i);\n                    }\n                }\n                /*\n                var boundary = Math.ceil(children_count/2);\n                var i = children_count;\n                while(i--){\n                    if(i>=boundary){\n                        this._layout_direction_side(children[i],jm.direction.left, children_count-i-1);\n                    }else{\n                        this._layout_direction_side(children[i],jm.direction.right, i);\n                    }\n                }*/\n\n            }\n        },\n\n        _layout_direction_side: function (node, direction, side_index) {\n            var layout_data = null;\n            if ('layout' in node._data) {\n                layout_data = node._data.layout;\n            } else {\n                layout_data = {};\n                node._data.layout = layout_data;\n            }\n            var children = node.children;\n            var children_count = children.length;\n\n            layout_data.direction = direction;\n            layout_data.side_index = side_index;\n            var i = children_count;\n            while (i--) {\n                this._layout_direction_side(children[i], direction, i);\n            }\n        },\n\n        layout_offset: function () {\n            var node = this.jm.mind.root;\n            var layout_data = node._data.layout;\n            layout_data.offset_x = 0;\n            layout_data.offset_y = 0;\n            layout_data.outer_height = 0;\n            var children = node.children;\n            var i = children.length;\n            var left_nodes = [];\n            var right_nodes = [];\n            var subnode = null;\n            while (i--) {\n                subnode = children[i];\n                if (subnode._data.layout.direction == jm.direction.right) {\n                    right_nodes.unshift(subnode);\n                } else {\n                    left_nodes.unshift(subnode);\n                }\n            }\n            layout_data.left_nodes = left_nodes;\n            layout_data.right_nodes = right_nodes;\n            layout_data.outer_height_left = this._layout_offset_subnodes(left_nodes);\n            layout_data.outer_height_right = this._layout_offset_subnodes(right_nodes);\n            this.bounds.e = node._data.view.width / 2;\n            this.bounds.w = 0 - this.bounds.e;\n            //logger.debug(this.bounds.w);\n            this.bounds.n = 0;\n            this.bounds.s = Math.max(layout_data.outer_height_left, layout_data.outer_height_right);\n        },\n\n        // layout both the x and y axis\n        _layout_offset_subnodes: function (nodes) {\n            var total_height = 0;\n            var nodes_count = nodes.length;\n            var i = nodes_count;\n            var node = null;\n            var node_outer_height = 0;\n            var layout_data = null;\n            var base_y = 0;\n            var pd = null; // parent._data\n            while (i--) {\n                node = nodes[i];\n                layout_data = node._data.layout;\n                if (pd == null) {\n                    pd = node.parent._data;\n                }\n\n                node_outer_height = this._layout_offset_subnodes(node.children);\n                if (!node.expanded) {\n                    node_outer_height = 0;\n                    this.set_visible(node.children, false);\n                }\n                node_outer_height = Math.max(node._data.view.height, node_outer_height);\n\n                layout_data.outer_height = node_outer_height;\n                layout_data.offset_y = base_y - node_outer_height / 2;\n                layout_data.offset_x = this.opts.hspace * layout_data.direction + pd.view.width * (pd.layout.direction + layout_data.direction) / 2;\n                if (!node.parent.isroot) {\n                    layout_data.offset_x += this.opts.pspace * layout_data.direction;\n                }\n\n                base_y = base_y - node_outer_height - this.opts.vspace;\n                total_height += node_outer_height;\n            }\n            if (nodes_count > 1) {\n                total_height += this.opts.vspace * (nodes_count - 1);\n            }\n            i = nodes_count;\n            var middle_height = total_height / 2;\n            while (i--) {\n                node = nodes[i];\n                node._data.layout.offset_y += middle_height;\n            }\n            return total_height;\n        },\n\n        // layout the y axis only, for collapse/expand a node\n        _layout_offset_subnodes_height: function (nodes) {\n            var total_height = 0;\n            var nodes_count = nodes.length;\n            var i = nodes_count;\n            var node = null;\n            var node_outer_height = 0;\n            var layout_data = null;\n            var base_y = 0;\n            var pd = null; // parent._data\n            while (i--) {\n                node = nodes[i];\n                layout_data = node._data.layout;\n                if (pd == null) {\n                    pd = node.parent._data;\n                }\n\n                node_outer_height = this._layout_offset_subnodes_height(node.children);\n                if (!node.expanded) {\n                    node_outer_height = 0;\n                }\n                node_outer_height = Math.max(node._data.view.height, node_outer_height);\n\n                layout_data.outer_height = node_outer_height;\n                layout_data.offset_y = base_y - node_outer_height / 2;\n                base_y = base_y - node_outer_height - this.opts.vspace;\n                total_height += node_outer_height;\n            }\n            if (nodes_count > 1) {\n                total_height += this.opts.vspace * (nodes_count - 1);\n            }\n            i = nodes_count;\n            var middle_height = total_height / 2;\n            while (i--) {\n                node = nodes[i];\n                node._data.layout.offset_y += middle_height;\n                //logger.debug(node.topic);\n                //logger.debug(node._data.layout.offset_y);\n            }\n            return total_height;\n        },\n\n        get_node_offset: function (node) {\n            var layout_data = node._data.layout;\n            var offset_cache = null;\n            if (('_offset_' in layout_data) && this.cache_valid) {\n                offset_cache = layout_data._offset_;\n            } else {\n                offset_cache = { x: -1, y: -1 };\n                layout_data._offset_ = offset_cache;\n            }\n            if (offset_cache.x == -1 || offset_cache.y == -1) {\n                var x = layout_data.offset_x;\n                var y = layout_data.offset_y;\n                if (!node.isroot) {\n                    var offset_p = this.get_node_offset(node.parent);\n                    x += offset_p.x;\n                    y += offset_p.y;\n                }\n                offset_cache.x = x;\n                offset_cache.y = y;\n            }\n            return offset_cache;\n        },\n\n        get_node_point: function (node) {\n            var view_data = node._data.view;\n            var offset_p = this.get_node_offset(node);\n            //logger.debug(offset_p);\n            var p = {};\n            p.x = offset_p.x + view_data.width * (node._data.layout.direction - 1) / 2;\n            p.y = offset_p.y - view_data.height / 2;\n            //logger.debug(p);\n            return p;\n        },\n\n        get_node_point_in: function (node) {\n            var p = this.get_node_offset(node);\n            return p;\n        },\n\n        get_node_point_out: function (node) {\n            var layout_data = node._data.layout;\n            var pout_cache = null;\n            if (('_pout_' in layout_data) && this.cache_valid) {\n                pout_cache = layout_data._pout_;\n            } else {\n                pout_cache = { x: -1, y: -1 };\n                layout_data._pout_ = pout_cache;\n            }\n            if (pout_cache.x == -1 || pout_cache.y == -1) {\n                if (node.isroot) {\n                    pout_cache.x = 0;\n                    pout_cache.y = 0;\n                } else {\n                    var view_data = node._data.view;\n                    var offset_p = this.get_node_offset(node);\n                    pout_cache.x = offset_p.x + (view_data.width + this.opts.pspace) * node._data.layout.direction;\n                    pout_cache.y = offset_p.y;\n                    //logger.debug('pout');\n                    //logger.debug(pout_cache);\n                }\n            }\n            return pout_cache;\n        },\n\n        get_expander_point: function (node) {\n            var p = this.get_node_point_out(node);\n            var ex_p = {};\n            if (node._data.layout.direction == jm.direction.right) {\n                ex_p.x = p.x - this.opts.pspace;\n            } else {\n                ex_p.x = p.x;\n            }\n            ex_p.y = p.y - Math.ceil(this.opts.pspace / 2);\n            return ex_p;\n        },\n\n        get_min_size: function () {\n            var nodes = this.jm.mind.nodes;\n            var node = null;\n            var pout = null;\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                pout = this.get_node_point_out(node);\n                if (pout.x > this.bounds.e) { this.bounds.e = pout.x; }\n                if (pout.x < this.bounds.w) { this.bounds.w = pout.x; }\n            }\n            return {\n                w: this.bounds.e - this.bounds.w,\n                h: this.bounds.s - this.bounds.n\n            }\n        },\n\n        toggle_node: function (node) {\n            if (node.isroot) {\n                return;\n            }\n            if (node.expanded) {\n                this.collapse_node(node);\n            } else {\n                this.expand_node(node);\n            }\n        },\n\n        expand_node: function (node) {\n            node.expanded = true;\n            this.part_layout(node);\n            this.set_visible(node.children, true);\n        },\n\n        collapse_node: function (node) {\n            node.expanded = false;\n            this.part_layout(node);\n            this.set_visible(node.children, false);\n        },\n\n        expand_all: function () {\n            var nodes = this.jm.mind.nodes;\n            var c = 0;\n            var node;\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                if (!node.expanded) {\n                    node.expanded = true;\n                    c++;\n                }\n            }\n            if (c > 0) {\n                var root = this.jm.mind.root;\n                this.part_layout(root);\n                this.set_visible(root.children, true);\n            }\n        },\n\n        collapse_all: function () {\n            var nodes = this.jm.mind.nodes;\n            var c = 0;\n            var node;\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                if (node.expanded && !node.isroot) {\n                    node.expanded = false\n                    c++;\n                }\n            }\n            if (c > 0) {\n                var root = this.jm.mind.root;\n                this.part_layout(root);\n                this.set_visible(root.children, true);\n            }\n        },\n\n        expand_to_depth: function (target_depth, curr_nodes, curr_depth) {\n            if (target_depth < 1) { return; }\n            var nodes = curr_nodes || this.jm.mind.root.children;\n            var depth = curr_depth || 1;\n            var i = nodes.length;\n            var node = null;\n            while (i--) {\n                node = nodes[i];\n                if (depth < target_depth) {\n                    if (!node.expanded) {\n                        this.expand_node(node);\n                    }\n                    this.expand_to_depth(target_depth, node.children, depth + 1);\n                }\n                if (depth == target_depth) {\n                    if (node.expanded) {\n                        this.collapse_node(node);\n                    }\n                }\n            }\n        },\n\n        part_layout: function (node) {\n            var root = this.jm.mind.root;\n            if (!!root) {\n                var root_layout_data = root._data.layout;\n                if (node.isroot) {\n                    root_layout_data.outer_height_right = this._layout_offset_subnodes_height(root_layout_data.right_nodes);\n                    root_layout_data.outer_height_left = this._layout_offset_subnodes_height(root_layout_data.left_nodes);\n                } else {\n                    if (node._data.layout.direction == jm.direction.right) {\n                        root_layout_data.outer_height_right = this._layout_offset_subnodes_height(root_layout_data.right_nodes);\n                    } else {\n                        root_layout_data.outer_height_left = this._layout_offset_subnodes_height(root_layout_data.left_nodes);\n                    }\n                }\n                this.bounds.s = Math.max(root_layout_data.outer_height_left, root_layout_data.outer_height_right);\n                this.cache_valid = false;\n            } else {\n                logger.warn('can not found root node');\n            }\n        },\n\n        set_visible: function (nodes, visible) {\n            var i = nodes.length;\n            var node = null;\n            var layout_data = null;\n            while (i--) {\n                node = nodes[i];\n                layout_data = node._data.layout;\n                if (node.expanded) {\n                    this.set_visible(node.children, visible);\n                } else {\n                    this.set_visible(node.children, false);\n                }\n                if (!node.isroot) {\n                    node._data.layout.visible = visible;\n                }\n            }\n        },\n\n        is_expand: function (node) {\n            return node.expanded;\n        },\n\n        is_visible: function (node) {\n            var layout_data = node._data.layout;\n            if (('visible' in layout_data) && !layout_data.visible) {\n                return false;\n            } else {\n                return true;\n            }\n        }\n    };\n\n    jm.graph_canvas = function (view) {\n        this.opts = view.opts;\n        this.e_canvas = $c('canvas');\n        this.canvas_ctx = this.e_canvas.getContext('2d');\n        this.size = { w: 0, h: 0 };\n    };\n\n    jm.graph_canvas.prototype = {\n        element: function () {\n            return this.e_canvas;\n        },\n\n        set_size: function (w, h) {\n            this.size.w = w;\n            this.size.h = h;\n            this.e_canvas.width = w;\n            this.e_canvas.height = h;\n        },\n\n        clear: function () {\n            this.canvas_ctx.clearRect(0, 0, this.size.w, this.size.h);\n        },\n\n        draw_line: function (pout, pin, offset) {\n            var ctx = this.canvas_ctx;\n            ctx.strokeStyle = this.opts.line_color;\n            ctx.lineWidth = this.opts.line_width;\n            ctx.lineCap = 'round';\n\n            this._bezier_to(ctx,\n                pin.x + offset.x,\n                pin.y + offset.y,\n                pout.x + offset.x,\n                pout.y + offset.y);\n        },\n\n        copy_to: function (dest_canvas_ctx, callback) {\n            dest_canvas_ctx.drawImage(this.e_canvas, 0, 0);\n            !!callback && callback();\n        },\n\n        _bezier_to: function (ctx, x1, y1, x2, y2) {\n            ctx.beginPath();\n            ctx.moveTo(x1, y1);\n            ctx.bezierCurveTo(x1 + (x2 - x1) * 2 / 3, y1, x1, y2, x2, y2);\n            ctx.stroke();\n        },\n\n        _line_to: function (ctx, x1, y1, x2, y2) {\n            ctx.beginPath();\n            ctx.moveTo(x1, y1);\n            ctx.lineTo(x2, y2);\n            ctx.stroke();\n        }\n    };\n\n    jm.graph_svg = function (view) {\n        this.view = view;\n        this.opts = view.opts;\n        this.e_svg = jm.graph_svg.c('svg');\n        this.size = { w: 0, h: 0 };\n        this.lines = [];\n    };\n\n    jm.graph_svg.c = function (tag) {\n        return $d.createElementNS('http://www.w3.org/2000/svg', tag);\n    };\n\n    jm.graph_svg.prototype = {\n        element: function () {\n            return this.e_svg;\n        },\n\n        set_size: function (w, h) {\n            this.size.w = w;\n            this.size.h = h;\n            this.e_svg.setAttribute('width', w);\n            this.e_svg.setAttribute('height', h);\n        },\n\n        clear: function () {\n            var len = this.lines.length;\n            while (len--) {\n                this.e_svg.removeChild(this.lines[len]);\n            }\n            this.lines.length = 0;\n        },\n\n        draw_line: function (pout, pin, offset) {\n            var line = jm.graph_svg.c('path');\n            line.setAttribute('stroke', this.opts.line_color);\n            line.setAttribute('stroke-width', this.opts.line_width);\n            line.setAttribute('fill', 'transparent');\n            this.lines.push(line);\n            this.e_svg.appendChild(line);\n            this._bezier_to(line, pin.x + offset.x, pin.y + offset.y, pout.x + offset.x, pout.y + offset.y);\n        },\n\n        copy_to: function (dest_canvas_ctx, callback) {\n            var img = new Image();\n            img.onload = function () {\n                dest_canvas_ctx.drawImage(img, 0, 0);\n                !!callback && callback();\n            }\n            img.src = 'data:image/svg+xml;base64,' + btoa(new XMLSerializer().serializeToString(this.e_svg));\n        },\n\n        _bezier_to: function (path, x1, y1, x2, y2) {\n            path.setAttribute('d', 'M' + x1 + ' ' + y1 + ' C ' + (x1 + (x2 - x1) * 2 / 3) + ' ' + y1 + ', ' + x1 + ' ' + y2 + ', ' + x2 + ' ' + y2);\n        },\n\n        _line_to: function (path, x1, y1, x2, y2) {\n            path.setAttribute('d', 'M ' + x1 + ' ' + y1 + ' L ' + x2 + ' ' + y2);\n        }\n    };\n\n    // view provider\n    jm.view_provider = function (jm, options) {\n        this.opts = options;\n        this.jm = jm;\n        this.layout = jm.layout;\n\n        this.container = null;\n        this.e_panel = null;\n        this.e_nodes = null;\n\n        this.size = { w: 0, h: 0 };\n\n        this.selected_node = null;\n        this.editing_node = null;\n\n        this.graph = null;\n    };\n\n    jm.view_provider.prototype = {\n        init: function () {\n            logger.debug('view.init');\n\n            this.container = $i(this.opts.container) ? this.opts.container : $g(this.opts.container);\n            if (!this.container) {\n                logger.error('the options.view.container was not be found in dom');\n                return;\n            }\n            this.e_panel = $c('div');\n            this.e_nodes = $c('jmnodes');\n            this.e_editor = $c('input');\n\n            this.graph = this.opts.engine.toLowerCase() === 'svg' ? new jm.graph_svg(this) : new jm.graph_canvas(this);\n\n            this.e_panel.className = 'jsmind-inner';\n            this.e_panel.appendChild(this.graph.element());\n            this.e_panel.appendChild(this.e_nodes);\n\n            this.e_editor.className = 'jsmind-editor';\n            this.e_editor.type = 'text';\n\n            this.actualZoom = 1;\n            this.zoomStep = 0.1;\n            this.minZoom = 0.5;\n            this.maxZoom = 2;\n\n            var v = this;\n            jm.util.dom.add_event(this.e_editor, 'keydown', function (e) {\n                var evt = e || event;\n                if (evt.keyCode == 13) { v.edit_node_end(); evt.stopPropagation(); }\n            });\n            jm.util.dom.add_event(this.e_editor, 'blur', function (e) {\n                v.edit_node_end();\n            });\n\n            this.container.appendChild(this.e_panel);\n        },\n\n        add_event: function (obj, event_name, event_handle) {\n            jm.util.dom.add_event(this.e_nodes, event_name, function (e) {\n                var evt = e || event;\n                event_handle.call(obj, evt);\n            });\n        },\n\n        get_binded_nodeid: function (element) {\n            if (element == null) {\n                return null;\n            }\n            var tagName = element.tagName.toLowerCase();\n            if (tagName == 'jmnodes' || tagName == 'body' || tagName == 'html') {\n                return null;\n            }\n            if (tagName == 'jmnode' || tagName == 'jmexpander') {\n                return element.getAttribute('nodeid');\n            } else {\n                return this.get_binded_nodeid(element.parentElement);\n            }\n        },\n\n        is_expander: function (element) {\n            return (element.tagName.toLowerCase() == 'jmexpander');\n        },\n\n        reset: function () {\n            logger.debug('view.reset');\n            this.selected_node = null;\n            this.clear_lines();\n            this.clear_nodes();\n            this.reset_theme();\n        },\n\n        reset_theme: function () {\n            var theme_name = this.jm.options.theme;\n            if (!!theme_name) {\n                this.e_nodes.className = 'theme-' + theme_name;\n            } else {\n                this.e_nodes.className = '';\n            }\n        },\n\n        reset_custom_style: function () {\n            var nodes = this.jm.mind.nodes;\n            for (var nodeid in nodes) {\n                this.reset_node_custom_style(nodes[nodeid]);\n            }\n        },\n\n        load: function () {\n            logger.debug('view.load');\n            this.init_nodes();\n        },\n\n        expand_size: function () {\n            var min_size = this.layout.get_min_size();\n            var min_width = min_size.w + this.opts.hmargin * 2;\n            var min_height = min_size.h + this.opts.vmargin * 2;\n            var client_w = this.e_panel.clientWidth;\n            var client_h = this.e_panel.clientHeight;\n            if (client_w < min_width) { client_w = min_width; }\n            if (client_h < min_height) { client_h = min_height; }\n            this.size.w = client_w;\n            this.size.h = client_h;\n        },\n\n        init_nodes_size: function (node) {\n            var view_data = node._data.view;\n            view_data.width = view_data.element.clientWidth;\n            view_data.height = view_data.element.clientHeight;\n        },\n\n        init_nodes: function () {\n            var nodes = this.jm.mind.nodes;\n            var doc_frag = $d.createDocumentFragment();\n            for (var nodeid in nodes) {\n                this.create_node_element(nodes[nodeid], doc_frag);\n            }\n            this.e_nodes.appendChild(doc_frag);\n            for (var nodeid in nodes) {\n                this.init_nodes_size(nodes[nodeid]);\n            }\n        },\n\n        add_node: function (node) {\n            this.create_node_element(node, this.e_nodes);\n            this.init_nodes_size(node);\n            \n        },\n        add_yes_no: function(node_after){\n            var yes_id = jm.util.uuid.newid();\n            var no_id = jm.util.uuid.newid();\n\n        },\n        isWhenIncluded: function(node) {\n\n            if (node['isroot']==true){\n                return false\n            }\n\n            if (node['topic']=='When'){\n                \n                return true \n\n            }\n            \n            return this.isWhenIncluded(node['parent']);\n                        \n\n        },\n\n\n        create_node_element: function (node, parent_node) {\n            var view_data = null;\n            if ('view' in node._data) {\n                view_data = node._data.view;\n            } else {\n                view_data = {};\n                node._data.view = view_data;\n            }\n\n            var d = $c('jmnode');\n            if (node.isroot) {\n                d.className = 'root';\n            } else {\n                var d_e = $c('jmexpander');\n                $t(d_e, '-');\n                d_e.setAttribute('nodeid', node.id);\n                d_e.style.visibility = 'hidden';\n                parent_node.appendChild(d_e);\n                view_data.expander = d_e;\n            }\n            if (!!node.topic) {\n                if (this.opts.support_html) {\n                    $h(d, node.topic);\n                } else {\n                    $t(d, node.topic);\n                }\n            }\n            d.setAttribute('nodeid', node.id);\n            d.style.visibility = 'hidden';\n            this._reset_node_custom_style(d, node.data);\n\n            parent_node.appendChild(d);\n            view_data.element = d;\n        },\n\n        remove_node: function (node) {\n            if (this.selected_node != null && this.selected_node.id == node.id) {\n                this.selected_node = null;\n            }\n            if (this.editing_node != null && this.editing_node.id == node.id) {\n                node._data.view.element.removeChild(this.e_editor);\n                this.editing_node = null;\n            }\n            var children = node.children;\n            var i = children.length;\n            while (i--) {\n                this.remove_node(children[i]);\n            }\n            if (node._data.view) {\n                var element = node._data.view.element;\n                var expander = node._data.view.expander;\n                this.e_nodes.removeChild(element);\n                this.e_nodes.removeChild(expander);\n                node._data.view.element = null;\n                node._data.view.expander = null;\n            }\n        },\n\n        update_node: function (node) {\n            var view_data = node._data.view;\n            var element = view_data.element;\n            if (!!node.topic) {\n                if (this.opts.support_html) {\n                    $h(element, node.topic);\n                } else {\n                    $t(element, node.topic);\n                }\n            }\n            view_data.width = element.clientWidth;\n            view_data.height = element.clientHeight;\n        },\n\n        select_node: function (node) {\n            if (!!this.selected_node) {\n                this.selected_node._data.view.element.className =\n                    this.selected_node._data.view.element.className.replace(/\\s*selected\\b/i, '');\n                this.reset_node_custom_style(this.selected_node);\n            }\n            if (!!node) {\n                this.selected_node = node;\n                node._data.view.element.className += ' selected';\n                this.clear_node_custom_style(node);\n            }\n        },\n\n        select_clear: function () {\n            this.select_node(null);\n        },\n\n        get_editing_node: function () {\n            return this.editing_node;\n        },\n\n        is_editing: function () {\n            return (!!this.editing_node);\n        },\n\n        edit_node_begin: function (node) {\n            if (!node.topic) {\n                logger.warn(\"don't edit image nodes\");\n                return;\n            }\n            if (this.editing_node != null) {\n                this.edit_node_end();\n            }\n            this.editing_node = node;\n            var view_data = node._data.view;\n            var element = view_data.element;\n            var topic = node.topic;\n            var ncs = getComputedStyle(element);\n            this.e_editor.value = topic;\n            this.e_editor.style.width = (element.clientWidth - parseInt(ncs.getPropertyValue('padding-left')) - parseInt(ncs.getPropertyValue('padding-right'))) + 'px';\n            element.innerHTML = '';\n            element.appendChild(this.e_editor);\n            element.style.zIndex = 5;\n            this.e_editor.focus();\n            this.e_editor.select();\n        },\n\n        edit_node_end: function () {\n            if (this.editing_node != null) {\n                var node = this.editing_node;\n                this.editing_node = null;\n                var view_data = node._data.view;\n                var element = view_data.element;\n                var topic = this.e_editor.value;\n                element.style.zIndex = 'auto';\n                element.removeChild(this.e_editor);\n                if (jm.util.text.is_empty(topic) || node.topic === topic) {\n                    if (this.opts.support_html) {\n                        $h(element, node.topic);\n                    } else {\n                        $t(element, node.topic);\n                    }\n                } else {\n                    this.jm.update_node(node.id, topic);\n                }\n            }\n        },\n\n        get_view_offset: function () {\n            var bounds = this.layout.bounds;\n            var _x = (this.size.w - bounds.e - bounds.w) / 2;\n            var _y = this.size.h / 2;\n            return { x: _x, y: _y };\n        },\n\n        resize: function () {\n            this.graph.set_size(1, 1);\n            this.e_nodes.style.width = '1px';\n            this.e_nodes.style.height = '1px';\n\n            this.expand_size();\n            this._show();\n        },\n\n        _show: function () {\n            this.graph.set_size(this.size.w, this.size.h);\n            this.e_nodes.style.width = this.size.w + 'px';\n            this.e_nodes.style.height = this.size.h + 'px';\n            this.show_nodes();\n            this.show_lines();\n            //this.layout.cache_valid = true;\n            this.jm.invoke_event_handle(jm.event_type.resize, { data: [] });\n        },\n\n        zoomIn: function () {\n            return this.setZoom(this.actualZoom + this.zoomStep);\n        },\n\n        zoomOut: function () {\n            return this.setZoom(this.actualZoom - this.zoomStep);\n        },\n\n        setZoom: function (zoom) {\n            if ((zoom < this.minZoom) || (zoom > this.maxZoom)) {\n                return false;\n            }\n            this.actualZoom = zoom;\n            for (var i = 0; i < this.e_panel.children.length; i++) {\n                this.e_panel.children[i].style.transform = 'scale(' + zoom + ')';\n            };\n            this.show(true);\n            return true;\n\n        },\n\n        _center_root: function () {\n            // center root node\n            var outer_w = this.e_panel.clientWidth;\n            var outer_h = this.e_panel.clientHeight;\n            if (this.size.w > outer_w) {\n                var _offset = this.get_view_offset();\n                this.e_panel.scrollLeft = _offset.x - outer_w / 2;\n            }\n            if (this.size.h > outer_h) {\n                this.e_panel.scrollTop = (this.size.h - outer_h) / 2;\n            }\n        },\n\n        show: function (keep_center) {\n            logger.debug('view.show');\n            this.expand_size();\n            this._show();\n            if (!!keep_center) {\n                this._center_root();\n            }\n        },\n\n        relayout: function () {\n            this.expand_size();\n            this._show();\n        },\n\n        save_location: function (node) {\n            var vd = node._data.view;\n            vd._saved_location = {\n                x: parseInt(vd.element.style.left) - this.e_panel.scrollLeft,\n                y: parseInt(vd.element.style.top) - this.e_panel.scrollTop,\n            };\n        },\n\n        restore_location: function (node) {\n            var vd = node._data.view;\n            this.e_panel.scrollLeft = parseInt(vd.element.style.left) - vd._saved_location.x;\n            this.e_panel.scrollTop = parseInt(vd.element.style.top) - vd._saved_location.y;\n        },\n\n        clear_nodes: function () {\n            var mind = this.jm.mind;\n            if (mind == null) {\n                return;\n            }\n            var nodes = mind.nodes;\n            var node = null;\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                node._data.view.element = null;\n                node._data.view.expander = null;\n            }\n            this.e_nodes.innerHTML = '';\n        },\n\n        show_nodes: function () {\n            var nodes = this.jm.mind.nodes;\n            var node = null;\n            var node_element = null;\n            var expander = null;\n            var p = null;\n            var p_expander = null;\n            var expander_text = '-';\n            var view_data = null;\n            var _offset = this.get_view_offset();\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                view_data = node._data.view;\n                node_element = view_data.element;\n                expander = view_data.expander;\n                if (!this.layout.is_visible(node)) {\n                    node_element.style.display = 'none';\n                    expander.style.display = 'none';\n                    continue;\n                }\n                this.reset_node_custom_style(node);\n                p = this.layout.get_node_point(node);\n                view_data.abs_x = _offset.x + p.x;\n                view_data.abs_y = _offset.y + p.y;\n                node_element.style.left = (_offset.x + p.x) + 'px';\n                node_element.style.top = (_offset.y + p.y) + 'px';\n                node_element.style.display = '';\n                node_element.style.visibility = 'visible';\n                if (!node.isroot && node.children.length > 0) {\n                    expander_text = node.expanded ? '-' : '+';\n                    p_expander = this.layout.get_expander_point(node);\n                    expander.style.left = (_offset.x + p_expander.x) + 'px';\n                    expander.style.top = (_offset.y + p_expander.y) + 'px';\n                    expander.style.display = '';\n                    expander.style.visibility = 'visible';\n                    $t(expander, expander_text);\n                }\n                // hide expander while all children have been removed\n                if (!node.isroot && node.children.length == 0) {\n                    expander.style.display = 'none';\n                    expander.style.visibility = 'hidden';\n                }\n            }\n        },\n\n        reset_node_custom_style: function (node) {\n            this._reset_node_custom_style(node._data.view.element, node.data);\n        },\n\n        _reset_node_custom_style: function (node_element, node_data) {\n            if ('background-color' in node_data) {\n                node_element.style.backgroundColor = node_data['background-color'];\n            }\n            if ('foreground-color' in node_data) {\n                node_element.style.color = node_data['foreground-color'];\n            }\n            if ('width' in node_data) {\n                node_element.style.width = node_data['width'] + 'px';\n            }\n            if ('height' in node_data) {\n                node_element.style.height = node_data['height'] + 'px';\n            }\n            if ('font-size' in node_data) {\n                node_element.style.fontSize = node_data['font-size'] + 'px';\n            }\n            if ('font-weight' in node_data) {\n                node_element.style.fontWeight = node_data['font-weight'];\n            }\n            if ('font-style' in node_data) {\n                node_element.style.fontStyle = node_data['font-style'];\n            }\n            if ('background-image' in node_data) {\n                var backgroundImage = node_data['background-image'];\n                if (backgroundImage.startsWith('data') && node_data['width'] && node_data['height']) {\n                    var img = new Image();\n\n                    img.onload = function () {\n                        var c = $c('canvas');\n                        c.width = node_element.clientWidth;\n                        c.height = node_element.clientHeight;\n                        var img = this;\n                        if (c.getContext) {\n                            var ctx = c.getContext('2d');\n                            ctx.drawImage(img, 2, 2, node_element.clientWidth, node_element.clientHeight);\n                            var scaledImageData = c.toDataURL();\n                            node_element.style.backgroundImage = 'url(' + scaledImageData + ')';\n                        }\n                    };\n                    img.src = backgroundImage;\n\n                } else {\n                    node_element.style.backgroundImage = 'url(' + backgroundImage + ')';\n                }\n                node_element.style.backgroundSize = '99%';\n\n                if ('background-rotation' in node_data) {\n                    node_element.style.transform = 'rotate(' + node_data['background-rotation'] + 'deg)';\n                }\n            }\n        },\n\n        clear_node_custom_style: function (node) {\n            var node_element = node._data.view.element;\n            node_element.style.backgroundColor = \"\";\n            node_element.style.color = \"\";\n        },\n\n        clear_lines: function () {\n            this.graph.clear();\n        },\n\n        show_lines: function () {\n            this.clear_lines();\n            var nodes = this.jm.mind.nodes;\n            var node = null;\n            var pin = null;\n            var pout = null;\n            var _offset = this.get_view_offset();\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                if (!!node.isroot) { continue; }\n                if (('visible' in node._data.layout) && !node._data.layout.visible) { continue; }\n                pin = this.layout.get_node_point_in(node);\n                pout = this.layout.get_node_point_out(node.parent);\n                this.graph.draw_line(pout, pin, _offset);\n            }\n        },\n    };\n\n    // shortcut provider\n    jm.shortcut_provider = function (jm, options) {\n        this.jm = jm;\n        this.opts = options;\n        this.mapping = options.mapping;\n        this.handles = options.handles;\n        this._mapping = {};\n    };\n\n    jm.shortcut_provider.prototype = {\n        init: function () {\n            jm.util.dom.add_event($d, 'keydown', this.handler.bind(this));\n\n            this.handles['addchild'] = this.handle_addchild;\n            this.handles['addbrother'] = this.handle_addbrother;\n            this.handles['editnode'] = this.handle_editnode;\n            this.handles['delnode'] = this.handle_delnode;\n            this.handles['toggle'] = this.handle_toggle;\n            this.handles['up'] = this.handle_up;\n            this.handles['down'] = this.handle_down;\n            this.handles['left'] = this.handle_left;\n            this.handles['right'] = this.handle_right;\n\n            for (var handle in this.mapping) {\n                if (!!this.mapping[handle] && (handle in this.handles)) {\n                    this._mapping[this.mapping[handle]] = this.handles[handle];\n                }\n            }\n        },\n\n        enable_shortcut: function () {\n            this.opts.enable = true;\n        },\n\n        disable_shortcut: function () {\n            this.opts.enable = false;\n        },\n\n        handler: function (e) {\n            if (this.jm.view.is_editing()) { return; }\n            var evt = e || event;\n            if (!this.opts.enable) { return true; }\n            var kc = evt.keyCode + (evt.metaKey << 13) + (evt.ctrlKey << 12) + (evt.altKey << 11) + (evt.shiftKey << 10);\n            if (kc in this._mapping) {\n                this._mapping[kc].call(this, this.jm, e);\n            }\n        },\n\n        handle_addchild: function (_jm, e) {\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node) {\n                var nodeid = jm.util.uuid.newid();\n                var node = _jm.add_node(selected_node, nodeid, 'New Node');\n                if (!!node) {\n                    _jm.select_node(nodeid);\n                    _jm.begin_edit(nodeid);\n                }\n            }\n        },\n        handle_addbrother: function (_jm, e) {\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node && !selected_node.isroot) {\n                var nodeid = jm.util.uuid.newid();\n                var node = _jm.insert_node_after(selected_node, nodeid, 'New Node');\n                if (!!node) {\n                    _jm.select_node(nodeid);\n                    _jm.begin_edit(nodeid);\n                }\n            }\n        },\n        handle_editnode: function (_jm, e) {\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node) {\n                _jm.begin_edit(selected_node);\n            }\n        },\n        handle_delnode: function (_jm, e) {\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node && !selected_node.isroot) {\n                _jm.select_node(selected_node.parent);\n                _jm.remove_node(selected_node);\n            }\n        },\n        handle_toggle: function (_jm, e) {\n            var evt = e || event;\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node) {\n                _jm.toggle_node(selected_node.id);\n                evt.stopPropagation();\n                evt.preventDefault();\n            }\n        },\n        handle_up: function (_jm, e) {\n            var evt = e || event;\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node) {\n                var up_node = _jm.find_node_before(selected_node);\n                if (!up_node) {\n                    var np = _jm.find_node_before(selected_node.parent);\n                    if (!!np && np.children.length > 0) {\n                        up_node = np.children[np.children.length - 1];\n                    }\n                }\n                if (!!up_node) {\n                    _jm.select_node(up_node);\n                }\n                evt.stopPropagation();\n                evt.preventDefault();\n            }\n        },\n\n        handle_down: function (_jm, e) {\n            var evt = e || event;\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node) {\n                var down_node = _jm.find_node_after(selected_node);\n                if (!down_node) {\n                    var np = _jm.find_node_after(selected_node.parent);\n                    if (!!np && np.children.length > 0) {\n                        down_node = np.children[0];\n                    }\n                }\n                if (!!down_node) {\n                    _jm.select_node(down_node);\n                }\n                evt.stopPropagation();\n                evt.preventDefault();\n            }\n        },\n\n        handle_left: function (_jm, e) {\n            this._handle_direction(_jm, e, jm.direction.left);\n        },\n        handle_right: function (_jm, e) {\n            this._handle_direction(_jm, e, jm.direction.right);\n        },\n        _handle_direction: function (_jm, e, d) {\n            var evt = e || event;\n            var selected_node = _jm.get_selected_node();\n            var node = null;\n            if (!!selected_node) {\n                if (selected_node.isroot) {\n                    var c = selected_node.children;\n                    var children = [];\n                    for (var i = 0; i < c.length; i++) {\n                        if (c[i].direction === d) {\n                            children.push(i)\n                        }\n                    }\n                    node = c[children[Math.floor((children.length - 1) / 2)]];\n                }\n                else if (selected_node.direction === d) {\n                    var children = selected_node.children;\n                    var childrencount = children.length;\n                    if (childrencount > 0) {\n                        node = children[Math.floor((childrencount - 1) / 2)]\n                    }\n                } else {\n                    node = selected_node.parent;\n                }\n                if (!!node) {\n                    _jm.select_node(node);\n                }\n                evt.stopPropagation();\n                evt.preventDefault();\n            }\n        },\n    };\n\n\n    // plugin\n    jm.plugin = function (name, init) {\n        this.name = name;\n        this.init = init;\n    };\n\n    jm.plugins = [];\n\n    jm.register_plugin = function (plugin) {\n        if (plugin instanceof jm.plugin) {\n            jm.plugins.push(plugin);\n        }\n    };\n\n    jm.init_plugins = function (sender) {\n        $w.setTimeout(function () {\n            jm._init_plugins(sender);\n        }, 0);\n    };\n\n    jm._init_plugins = function (sender) {\n        var l = jm.plugins.length;\n        var fn_init = null;\n        for (var i = 0; i < l; i++) {\n            fn_init = jm.plugins[i].init;\n            if (typeof fn_init === 'function') {\n                fn_init(sender);\n            }\n        }\n    };\n\n    // quick way\n    jm.show = function (options, mind) {\n        var _jm = new jm(options);\n        _jm.show(mind);\n        return _jm;\n    };\n\n    // export jsmind\n    if (typeof module !== 'undefined' && typeof exports === 'object') {\n        module.exports = jm;\n        $w[__name__] = jm;\n    } else if (typeof define === 'function' && (define.amd || define.cmd)) {\n        define(function () { return jm; });\n    } else {\n        $w[__name__] = jm;\n    }\n})(typeof window !== 'undefined' ? window : global);\n\n"],"sourceRoot":""}