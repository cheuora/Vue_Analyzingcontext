{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?9b05","webpack:///./src/components/JsMind/JsMind.vue?d500","webpack:///./src/App.vue?c59d","webpack:///src/App.vue","webpack:///./src/App.vue?a7d1","webpack:///./src/App.vue","webpack:///./src/router/index.js","webpack:///./src/components/JsMind/JsMind.vue?e9cf","webpack:///src/components/JsMind/JsMind.vue","webpack:///./src/components/JsMind/JsMind.vue?bf52","webpack:///./src/components/JsMind/JsMind.vue","webpack:///./src/components/JsMind/index.js","webpack:///./src/main.js","webpack:///./src/components/JsMind/jsmind.draggable.js","webpack:///./src/components/JsMind/jsmind.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","_v","staticRenderFns","component","Vue","use","VueRouter","routes","path","router","base","process","refresh","style","height","_m","staticStyle","staticClass","props","values","required","options","mounted","init","jm","default_options","updated","watch","methods","jsMind","install","config","productionTip","JsMind","render","h","App","$mount","$w","$d","__name__","draggable","jdom","util","dom","clear_selection","getSelection","removeAllRanges","selection","empty","line_width","lookup_delay","lookup_interval","e_canvas","canvas_ctx","shadow","shadow_w","shadow_h","active_node","target_node","target_direct","client_w","client_h","offset_x","offset_y","hlookup_delay","hlookup_timer","capture","moved","_create_canvas","_create_shadow","_event_bind","resize","view","e_nodes","width","size","w","e_panel","ctx","getContext","visibility","zIndex","cursor","opacity","reset_shadow","el","innerHTML","left","top","backgroundImage","backgroundSize","transform","clientWidth","clientHeight","show_shadow","hide_shadow","_magnet_shadow","node","lineWidth","strokeStyle","lineCap","_clear_lines","_canvas_lineto","sp","x","y","np","clearRect","x1","y1","x2","y2","beginPath","moveTo","lineTo","stroke","_lookup_close_node","nl","root","get_root","root_location","get_location","root_size","get_size","root_x","sw","sh","sx","offsetLeft","sy","offsetTop","direct","direction","right","nodes","mind","min_distance","Number","MAX_VALUE","distance","closest_node","closest_p","shadow_p","nodeid","isroot","id","Math","abs","result_node","lookup_close_node","node_data","jd","container","add_event","evt","dragstart","drag","dragend","get_editable","jview","srcElement","tagName","toLowerCase","get_binded_nodeid","get_node","clientX","touches","clientY","client_hw","floor","client_hh","clearInterval","setInterval","preventDefault","px","py","src_node","move_node","inherited","sibling_nodes","children","sc","delta_y","node_before","beforeid","dy","jm_event_handle","event_type","draggable_plugin","plugin","add_event_listener","register_plugin","__version__","__author__","_noop","logger","log","debug","warn","info","$g","getElementById","$c","$t","hasChildNodes","firstChild","nodeValue","createTextNode","$h","HTMLElement","$i","nodeType","ownerDocument","String","startsWith","DEFAULT_OPTIONS","editable","theme","support_html","engine","hmargin","vmargin","line_color","layout","hspace","vspace","pspace","default_event_handle","enable_mousedown_handle","enable_click_handle","enable_dblclick_handle","shortcut","enable","handles","mapping","addchild","addbrother","editnode","delnode","toggle","up","down","current","version","opts","json","merge","inited","event_handles","center","show","edit","select","meta","ctrl","alt","sId","iIndex","sTopic","oData","bIsRoot","oParent","eDirection","bExpanded","index","topic","parent","expanded","_data","compare","node1","node2","i1","i2","pnode","pid","vd","abs_x","abs_y","author","selected","set_root","_put_node","add_node","parent_node","idx","is_node","the_parent_node","nodeindex","isNaN","children_len","_reindex","insert_node_before","the_node_before","node_index","get_node_before","the_node","insert_node_after","node_after","the_node_after","reVal","get_node_after","brothers","parentid","_move_node","_flow_node_direction","len","_move_node_internal","sibling","si","remove_node","ci","k","sort","format","node_tree","example","get_mind","source","df","_parse","get_data","_buildnode","node_root","_extract_data","_extract_subnode","node_json","node_parent","node_array","_array","narray","reverse","root_id","_extract_root","root_json","extract_count","node_direction","sub_extract_count","_array_node","freemind","xml","xml_doc","_parse_xml","xml_root","_find_root","_load_node","xmllines","_buildmap","join","DOMParser","parser","parseFromString","ActiveXObject","async","loadXML","childNodes","parent_id","xml_node","node_id","node_topic","topic_children","topic_child","textContent","_load_attributes","node_expanded","node_position","child","attr","attr_data","pos","ajax","_xhr","xhr","XMLHttpRequest","_eurl","url","encodeURIComponent","param","method","callback","fail_callback","a","tmp_param","onreadystatechange","readyState","status","string2json","responseText","open","setRequestHeader","send","post","addEventListener","attachEvent","file","read","file_data","fn_callback","reader","FileReader","readAsText","save","blob","Blob","BlobBuilder","MozBlobBuilder","WebKitBlobBuilder","MSBlobBuilder","bb","append","getBlob","navigator","msSaveBlob","URL","webkitURL","bloburl","createObjectURL","anchor","download","body","createEvent","initEvent","dispatchEvent","location","json2string","JSON","json_str","stringify","parse","b","toString","uuid","newid","Date","getTime","random","substr","text","is_empty","replace","opts_layout","opts_view","data_provider","layout_provider","view_provider","shortcut_provider","init_plugins","enable_edit","disable_edit","enable_event_handle","event_handle","disable_event_handle","set_theme","theme_old","reset_theme","reset_custom_style","mousedown_handle","click_handle","dblclick_handle","element","select_node","select_clear","isexpander","is_expander","toggle_node","begin_edit","edit_node_begin","end_edit","edit_node_end","save_location","relayout","restore_location","expand_node","collapse_node","expand_all","collapse_all","expand_to_depth","depth","_reset","reset","_show","load","invoke_event_handle","get_meta","data_format","from","reset_node_custom_style","isWhenIncluded","add_YN_tail","afterid","update_node","isInsert","yes_id","no_id","is_visible","get_selected_node","is_node_visible","find_node_before","prev","ni","find_node_after","getthis","set_node_color","bgcolor","fgcolor","set_node_font_style","weight","set_node_background_image","image","rotation","set_node_background_rotation","_invoke_event_handle","mind_data","isside","bounds","cache_valid","layout_direction","layout_offset","_layout_direction_root","layout_data","children_count","side_index","_layout_direction_side","subnode","outer_height","left_nodes","right_nodes","unshift","outer_height_left","_layout_offset_subnodes","outer_height_right","max","total_height","nodes_count","node_outer_height","base_y","pd","set_visible","middle_height","_layout_offset_subnodes_height","get_node_offset","offset_cache","_offset_","offset_p","get_node_point","view_data","get_node_point_in","get_node_point_out","pout_cache","_pout_","get_expander_point","ex_p","ceil","get_min_size","pout","part_layout","target_depth","curr_nodes","curr_depth","root_layout_data","visible","is_expand","graph_canvas","set_size","clear","draw_line","pin","offset","_bezier_to","copy_to","dest_canvas_ctx","drawImage","bezierCurveTo","_line_to","graph_svg","e_svg","lines","createElementNS","line","img","Image","btoa","XMLSerializer","serializeToString","selected_node","editing_node","graph","e_editor","className","actualZoom","zoomStep","minZoom","maxZoom","v","keyCode","stopPropagation","obj","event_name","parentElement","clear_lines","clear_nodes","theme_name","init_nodes","expand_size","min_size","min_width","min_height","init_nodes_size","doc_frag","createDocumentFragment","create_node_element","add_yes_no","d_e","expander","_reset_node_custom_style","clear_node_custom_style","get_editing_node","is_editing","ncs","getComputedStyle","parseInt","getPropertyValue","focus","get_view_offset","_x","_y","show_nodes","show_lines","zoomIn","setZoom","zoomOut","zoom","_center_root","outer_w","outer_h","_offset","scrollLeft","scrollTop","keep_center","_saved_location","node_element","p_expander","expander_text","display","backgroundColor","color","fontSize","fontWeight","fontStyle","scaledImageData","toDataURL","_mapping","handle","handler","handle_addchild","handle_addbrother","handle_editnode","handle_delnode","handle_toggle","handle_up","handle_down","handle_left","handle_right","enable_shortcut","disable_shortcut","kc","metaKey","ctrlKey","altKey","shiftKey","_jm","up_node","down_node","_handle_direction","childrencount","plugins","sender","_init_plugins","fn_init","define","global"],"mappings":"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","file":"js/app.90b3ba68.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-1779c4b4\":\"1b734d39\",\"chunk-2d0b16b3\":\"b63782ae\",\"chunk-741f5406\":\"8f49ce40\",\"chunk-333db322\":\"9d333dcd\",\"chunk-844f0cd8\":\"62e5ff7f\",\"chunk-b01f0c66\":\"b40efa4a\",\"chunk-e32b1f48\":\"5454bd5c\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"chunk-b01f0c66\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-1779c4b4\":\"31d6cfe0\",\"chunk-2d0b16b3\":\"31d6cfe0\",\"chunk-741f5406\":\"31d6cfe0\",\"chunk-333db322\":\"31d6cfe0\",\"chunk-844f0cd8\":\"31d6cfe0\",\"chunk-b01f0c66\":\"c91ce498\",\"chunk-e32b1f48\":\"31d6cfe0\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./JsMind.vue?vue&type=style&index=0&id=2313babd&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./JsMind.vue?vue&type=style&index=0&id=2313babd&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('h1',{attrs:{\"id\":\"toc_0\"}},[_c('router-link',{attrs:{\"to\":\"/\"}},[_vm._v(\" Analyzing context\")])],1),_c('p',[_vm._v(\"Tools for analyzing complicate context for developers…\")]),_c('br'),_c('br'),_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n<template>\n  <div id=\"app\">\n    <h1 id=\"toc_0\"><router-link to='/'>\n        Analyzing context</router-link></h1>\n\n    <p>Tools for analyzing complicate context for developers&hellip;</p>\n    <br><br>\n\n    <router-view/>\n\n  </div>\n</template>\n\n<script>\n//import FramePage from './components/FrontPage.vue'\nexport default {\n  name: 'App',\n  // components: {\n  //   FramePage\n  // }\n    methods:{\n        goHome(){\n            var router = this.$router \n            router.push({\n                name:Home,\n            })\n        }\n    }\n\n\n}\n</script>\n\n<style>\n\n@import url(http://fonts.googleapis.com/earlyaccess/notosanskr.css);\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\np,\nblockquote {\n    margin: 0;\n    padding: 0;\n}\nbody {\n    /*font-family: \"Helvetica Neue\", Helvetica, \"Hiragino Sans GB\", Arial, sans-serif;*/\n    font-family: 'Noto Sans KR', sans-serif;\n    font-size: 13px;\n    line-height: 18px;\n    color: #737373;\n    background-color: white;\n    margin: 10px 13px 10px 13px;\n}\ntable {\n\tmargin: 10px 0 15px 0;\n\tborder-collapse: collapse;\n}\ntd,th {\n\tborder: 1px solid #ddd;\n\tpadding: 3px 10px;\n}\nth {\n\tpadding: 5px 10px;\n}\n\na {\n    color: #737373;\n    text-decoration: none;\n}\na:hover {\n    color: #0050a3;\n    text-decoration: none;\n}\na img {\n    border: none;\n}\np {\n    margin-bottom: 9px;\n}\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n    color: #404040;\n    line-height: 36px;\n}\nh1 {\n    margin-bottom: 18px;\n    font-size: 30px;\n}\nh2 {\n    font-size: 24px;\n}\nh3 {\n    font-size: 18px;\n}\nh4 {\n    font-size: 16px;\n}\nh5 {\n    font-size: 14px;\n}\nh6 {\n    font-size: 13px;\n}\nhr {\n    margin: 0 0 19px;\n    border: 0;\n    border-bottom: 1px solid #ccc;\n}\nblockquote {\n    padding: 13px 13px 21px 15px;\n    margin-bottom: 18px;\n    font-family:georgia,serif;\n    font-style: italic;\n}\nblockquote:before {\n    content:\"\\201C\";\n    font-size:40px;\n    margin-left:-10px;\n    font-family:georgia,serif;\n    color:#eee;\n}\nblockquote p {\n    font-size: 14px;\n    font-weight: 300;\n    line-height: 18px;\n    margin-bottom: 0;\n    font-style: italic;\n}\ncode, pre {\n    font-family: Monaco, Andale Mono, Courier New, monospace;\n}\ncode {\n    background-color: #fee9cc;\n    color: rgba(0, 0, 0, 0.75);\n    padding: 1px 3px;\n    font-size: 12px;\n    -webkit-border-radius: 3px;\n    -moz-border-radius: 3px;\n    border-radius: 3px;\n}\npre {\n    display: block;\n    padding: 14px;\n    margin: 0 0 18px;\n    line-height: 16px;\n    font-size: 11px;\n    border: 1px solid #d9d9d9;\n    white-space: pre-wrap;\n    word-wrap: break-word;\n}\npre code {\n    background-color: #fff;\n    color:#737373;\n    font-size: 11px;\n    padding: 0;\n}\nsup {\n    font-size: 0.83em;\n    vertical-align: super;\n    line-height: 0;\n}\n* {\n\t-webkit-print-color-adjust: exact;\n}\n@media screen and (min-width: 914px) {\n    body {\n        width: 854px;\n        margin:10px auto;\n    }\n}\n@media print {\n\tbody,code,pre code,h1,h2,h3,h4,h5,h6 {\n\t\tcolor: black;\n\t}\n\ttable, pre {\n\t\tpage-break-inside: avoid;\n\t}\n}\n\n\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=50f30a52&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport VueRouter from 'vue-router'\n\nVue.use(VueRouter)\n\n  const routes = [\n  {\n    path: '/',\n    name: 'Home',\n    component: () => import ('../components/FrontPage.vue')\n  },\n  {\n    path: '/mindmapinput',\n    name: 'mindmapinput',\n    // route level code-splitting\n    // this generates a separate chunk (about.[hash].js) for this route\n    // which is lazy-loaded when the route is visited.\n    component: () => import('../components/MindmapInput.vue')\n  },\n  {\n    path: '/mindmapresult',\n    name: 'mindmapresult',\n    component: () => import('../components/MindmapResult.vue')\n  },\n  {\n    path: '/mcdcinput',\n    name: 'mcdcinput',\n    component: () => import('../components/MCDCInput.vue')\n  },  {\n    path: '/mcdcresult',\n    name: 'mcdcresult',\n    component: () => import('../components/MCDCResult.vue')\n  },\n  {\n    path: '/errorpage',\n    name: 'errorpage',\n    component: () => import('../components/errorPage.vue')\n  },\n  \n]\n\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n})\n\nexport default router\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{key:_vm.refresh,style:({height: _vm.height})},[_c('div',{attrs:{\"id\":\"jsmind_container\"}}),_vm._m(0)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"display\":\"none\"}},[_c('input',{staticClass:\"file\",attrs:{\"type\":\"file\",\"id\":\"image-chooser\",\"accept\":\"image/*\"}})])}]\n\nexport { render, staticRenderFns }","<template>\n<div :key='refresh' :style=\"{height}\">\n      <div id=\"jsmind_container\"></div>\n  \n  <div style=\"display:none\">\n      <input class=\"file\" type=\"file\" id=\"image-chooser\" accept=\"image/*\"/>\n    </div>\n</div>\n</template>\n\n<script>\nimport  \"./jsmind.js\";\nimport \"./jsmind.css\";\nimport './jsmind.draggable.js'\n//import './jsmind.screenshot.js'\nexport default {\n  name: \"jsMind\",\n  props: {\n    values: {\n      type: Object,\n      required: true\n    },\n    options: {\n      type: Object\n    },\n    height:{\n      type:String,\n      required:true\n    }\n  },\n  mounted() {\n    this.init()\n  },\n  data(){\n    return{\n      jm:{},\n      refresh:1,\n      value:{},\n       // 默认配置\n      default_options : {\n      container: \"jsmind_container\",\n      editable: true, // 是否启用编辑\n      theme: \"primary\", // 主题\n      mode: \"full\", // 显示模式\n      support_html: true, // 是否支持节点里的HTML元素\n      view: {\n        engine: \"canvas\", // 思维导图各节点之间线条的绘制引擎\n        hmargin: 100, // 思维导图距容器外框的最小水平距离\n        vmargin: 50, // 思维导图距容器外框的最小垂直距离\n        line_width: 2, // 思维导图线条的粗细\n        line_color: \"#555\" // 思维导图线条的颜色\n      },\n      layout: {\n        hspace: 30, // 节点之间的水平间距\n        vspace: 20, // 节点之间的垂直间距\n        pspace: 13 // 节点与连接线之间的水平间距（用于容纳节点收缩/展开控制器）\n      },\n      shortcut: {\n        enable: true, // 是否启用快捷键\n        handles: {\n          SavePNG(){\n            this.jm.screenshot.shootDownload();\n          }\n        }, // 命名的快捷键事件处理器\n        mapping: {\n          // 快捷键映射\n          addchild: 45, // <Insert>\n          addbrother: 13, // <Enter>\n          editnode: 113, // <F2>\n          delnode: 46, // <Delete>\n          toggle: 32, // <Space>\n          left: 37, // <Left>\n          up: 38, // <Up>\n          right: 39, // <Right>\n          down: 40 ,// <Down>\n          SavePNG:jsMind.key.ctrl + 83\n        }\n      }\n    }\n    }\n  },\n  updated(){\n    this.init()\n  },\n  watch:{\n\n    options(){\n     this.$nextTick(()=>{\n      this.refresh++\n     })\n    }\n  },\n  methods:{\n    init(){\n      if(this.jm.get_data){\n        this.value=this.jm.get_data()\n      }else{\n        this.value=this.values\n      }\n      const options = Object.assign(this.default_options, this.options);\n      this.jm=window.jsMind.show(options,this.value)\n    }\n  }\n};\n</script>\n<style scoped>\n#jsmind_container {\n  height: 100%;\n  width: 100%;\n  border : 1px;\n  border-style:solid;\n\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./JsMind.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./JsMind.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./JsMind.vue?vue&type=template&id=2313babd&scoped=true&\"\nimport script from \"./JsMind.vue?vue&type=script&lang=js&\"\nexport * from \"./JsMind.vue?vue&type=script&lang=js&\"\nimport style0 from \"./JsMind.vue?vue&type=style&index=0&id=2313babd&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2313babd\",\n  null\n  \n)\n\nexport default component.exports","import jsMind from './JsMind.vue'\njsMind.install = Vue => {\n    Vue.component(jsMind.name, jsMind)\n}\n\nif (typeof window !== 'undefined' && window.Vue) {\n    window.Vue.component(jsMind.name, jsMind)\n}\n\nexport default jsMind;\n","import Vue from 'vue'\nimport App from './App.vue'\nimport router from './router'\nimport JsMind from './components/JsMind/index'\n\nVue.config.productionTip = false\nVue.use(JsMind)\n\nnew Vue({\n  router,\n  render: h => h(App)\n}).$mount('#app')\n\n","/*\n * Released under BSD License\n * Copyright (c) 2014-2015 hizzgdev@163.com\n * \n * Project Home:\n *   https://github.com/hizzgdev/jsmind/\n */\n\n(function ($w) {\n    'use strict';\n    var $d = $w.document;\n    var __name__ = 'jsMind';\n    var jsMind = $w[__name__];\n    if (!jsMind) { return; }\n    if (typeof jsMind.draggable != 'undefined') { return; }\n\n    var jdom = jsMind.util.dom;\n    var clear_selection = 'getSelection' in $w ? function () {\n        $w.getSelection().removeAllRanges();\n    } : function () {\n        $d.selection.empty();\n    };\n\n    var options = {\n        line_width: 5,\n        lookup_delay: 500,\n        lookup_interval: 80\n    };\n\n    jsMind.draggable = function (jm) {\n        this.jm = jm;\n        this.e_canvas = null;\n        this.canvas_ctx = null;\n        this.shadow = null;\n        this.shadow_w = 0;\n        this.shadow_h = 0;\n        this.active_node = null;\n        this.target_node = null;\n        this.target_direct = null;\n        this.client_w = 0;\n        this.client_h = 0;\n        this.offset_x = 0;\n        this.offset_y = 0;\n        this.hlookup_delay = 0;\n        this.hlookup_timer = 0;\n        this.capture = false;\n        this.moved = false;\n    };\n\n    jsMind.draggable.prototype = {\n        init: function () {\n            this._create_canvas();\n            this._create_shadow();\n            this._event_bind();\n        },\n\n        resize: function () {\n            this.jm.view.e_nodes.appendChild(this.shadow);\n            this.e_canvas.width = this.jm.view.size.w;\n            this.e_canvas.height = this.jm.view.size.h;\n        },\n\n        _create_canvas: function () {\n            var c = $d.createElement('canvas');\n            this.jm.view.e_panel.appendChild(c);\n            var ctx = c.getContext('2d');\n            this.e_canvas = c;\n            this.canvas_ctx = ctx;\n        },\n\n        _create_shadow: function () {\n            var s = $d.createElement('jmnode');\n            s.style.visibility = 'hidden';\n            s.style.zIndex = '3';\n            s.style.cursor = 'move';\n            s.style.opacity = '0.7';\n            this.shadow = s;\n        },\n\n        reset_shadow: function (el) {\n            var s = this.shadow.style;\n            this.shadow.innerHTML = el.innerHTML;\n            s.left = el.style.left;\n            s.top = el.style.top;\n            s.width = el.style.width;\n            s.height = el.style.height;\n            s.backgroundImage = el.style.backgroundImage;\n            s.backgroundSize = el.style.backgroundSize;\n            s.transform = el.style.transform;\n            this.shadow_w = this.shadow.clientWidth;\n            this.shadow_h = this.shadow.clientHeight;\n\n        },\n\n        show_shadow: function () {\n            if (!this.moved) {\n                this.shadow.style.visibility = 'visible';\n            }\n        },\n\n        hide_shadow: function () {\n            this.shadow.style.visibility = 'hidden';\n        },\n\n        _magnet_shadow: function (node) {\n            if (!!node) {\n                this.canvas_ctx.lineWidth = options.line_width;\n                this.canvas_ctx.strokeStyle = 'rgba(0,0,0,0.3)';\n                this.canvas_ctx.lineCap = 'round';\n                this._clear_lines();\n                this._canvas_lineto(node.sp.x, node.sp.y, node.np.x, node.np.y);\n            }\n        },\n\n        _clear_lines: function () {\n            this.canvas_ctx.clearRect(0, 0, this.jm.view.size.w, this.jm.view.size.h);\n        },\n\n        _canvas_lineto: function (x1, y1, x2, y2) {\n            this.canvas_ctx.beginPath();\n            this.canvas_ctx.moveTo(x1, y1);\n            this.canvas_ctx.lineTo(x2, y2);\n            this.canvas_ctx.stroke();\n        },\n\n        _lookup_close_node: function () {\n            var root = this.jm.get_root();\n            var root_location = root.get_location();\n            var root_size = root.get_size();\n            var root_x = root_location.x + root_size.w / 2;\n\n            var sw = this.shadow_w;\n            var sh = this.shadow_h;\n            var sx = this.shadow.offsetLeft;\n            var sy = this.shadow.offsetTop;\n\n            var ns, nl;\n\n            var direct = (sx + sw / 2) >= root_x ?\n                jsMind.direction.right : jsMind.direction.left;\n            var nodes = this.jm.mind.nodes;\n            var node = null;\n            var min_distance = Number.MAX_VALUE;\n            var distance = 0;\n            var closest_node = null;\n            var closest_p = null;\n            var shadow_p = null;\n            for (var nodeid in nodes) {\n                var np, sp;\n                node = nodes[nodeid];\n                if (node.isroot || node.direction == direct) {\n                    if (node.id == this.active_node.id) {\n                        continue;\n                    }\n                    ns = node.get_size();\n                    nl = node.get_location();\n                    if (direct == jsMind.direction.right) {\n                        if (sx - nl.x - ns.w <= 0) { continue; }\n                        distance = Math.abs(sx - nl.x - ns.w) + Math.abs(sy + sh / 2 - nl.y - ns.h / 2);\n                        np = { x: nl.x + ns.w - options.line_width, y: nl.y + ns.h / 2 };\n                        sp = { x: sx + options.line_width, y: sy + sh / 2 };\n                    } else {\n                        if (nl.x - sx - sw <= 0) { continue; }\n                        distance = Math.abs(sx + sw - nl.x) + Math.abs(sy + sh / 2 - nl.y - ns.h / 2);\n                        np = { x: nl.x + options.line_width, y: nl.y + ns.h / 2 };\n                        sp = { x: sx + sw - options.line_width, y: sy + sh / 2 };\n                    }\n                    if (distance < min_distance) {\n                        closest_node = node;\n                        closest_p = np;\n                        shadow_p = sp;\n                        min_distance = distance;\n                    }\n                }\n            }\n            var result_node = null;\n            if (!!closest_node) {\n                result_node = {\n                    node: closest_node,\n                    direction: direct,\n                    sp: shadow_p,\n                    np: closest_p\n                };\n            }\n            return result_node;\n        },\n\n        lookup_close_node: function () {\n            var node_data = this._lookup_close_node();\n            if (!!node_data) {\n                this._magnet_shadow(node_data);\n                this.target_node = node_data.node;\n                this.target_direct = node_data.direction;\n            }\n        },\n\n        _event_bind: function () {\n            var jd = this;\n            var container = this.jm.view.container;\n            jdom.add_event(container, 'mousedown', function (e) {\n                var evt = e || event;\n                jd.dragstart.call(jd, evt);\n            });\n            jdom.add_event(container, 'mousemove', function (e) {\n                var evt = e || event;\n                jd.drag.call(jd, evt);\n            });\n            jdom.add_event(container, 'mouseup', function (e) {\n                var evt = e || event;\n                jd.dragend.call(jd, evt);\n            });\n            jdom.add_event(container, 'touchstart', function (e) {\n                var evt = e || event;\n                jd.dragstart.call(jd, evt);\n            });\n            jdom.add_event(container, 'touchmove', function (e) {\n                var evt = e || event;\n                jd.drag.call(jd, evt);\n            });\n            jdom.add_event(container, 'touchend', function (e) {\n                var evt = e || event;\n                jd.dragend.call(jd, evt);\n            });\n        },\n\n        dragstart: function (e) {\n            if (!this.jm.get_editable()) { return; }\n            if (this.capture) { return; }\n            this.active_node = null;\n\n            var jview = this.jm.view;\n            var el = e.target || event.srcElement;\n            if (el.tagName.toLowerCase() != 'jmnode') { return; }\n            var nodeid = jview.get_binded_nodeid(el);\n            if (!!nodeid) {\n                var node = this.jm.get_node(nodeid);\n                if (!node.isroot) {\n                    this.reset_shadow(el);\n                    this.active_node = node;\n                    this.offset_x = (e.clientX || e.touches[0].clientX) - el.offsetLeft;\n                    this.offset_y = (e.clientY || e.touches[0].clientY) - el.offsetTop;\n                    this.client_hw = Math.floor(el.clientWidth / 2);\n                    this.client_hh = Math.floor(el.clientHeight / 2);\n                    if (this.hlookup_delay != 0) {\n                        $w.clearTimeout(this.hlookup_delay);\n                    }\n                    if (this.hlookup_timer != 0) {\n                        $w.clearInterval(this.hlookup_timer);\n                    }\n                    var jd = this;\n                    this.hlookup_delay = $w.setTimeout(function () {\n                        jd.hlookup_delay = 0;\n                        jd.hlookup_timer = $w.setInterval(function () {\n                            jd.lookup_close_node.call(jd);\n                        }, options.lookup_interval);\n                    }, options.lookup_delay);\n                    this.capture = true;\n                }\n            }\n        },\n\n        drag: function (e) {\n            if (!this.jm.get_editable()) { return; }\n            if (this.capture) {\n                e.preventDefault();\n                this.show_shadow();\n                this.moved = true;\n                clear_selection();\n                var px = (e.clientX || e.touches[0].clientX) - this.offset_x;\n                var py = (e.clientY || e.touches[0].clientY) - this.offset_y;\n                var cx = px + this.client_hw;\n                var cy = py + this.client_hh;\n                this.shadow.style.left = px + 'px';\n                this.shadow.style.top = py + 'px';\n                clear_selection();\n            }\n        },\n\n        dragend: function (e) {\n            if (!this.jm.get_editable()) { return; }\n            if (this.capture) {\n                if (this.hlookup_delay != 0) {\n                    $w.clearTimeout(this.hlookup_delay);\n                    this.hlookup_delay = 0;\n                    this._clear_lines();\n                }\n                if (this.hlookup_timer != 0) {\n                    $w.clearInterval(this.hlookup_timer);\n                    this.hlookup_timer = 0;\n                    this._clear_lines();\n                }\n                if (this.moved) {\n                    var src_node = this.active_node;\n                    var target_node = this.target_node;\n                    var target_direct = this.target_direct;\n                    this.move_node(src_node, target_node, target_direct);\n                }\n                this.hide_shadow();\n            }\n            this.moved = false;\n            this.capture = false;\n        },\n\n        move_node: function (src_node, target_node, target_direct) {\n            var shadow_h = this.shadow.offsetTop;\n            if (!!target_node && !!src_node && !jsMind.node.inherited(src_node, target_node)) {\n                // lookup before_node\n                var sibling_nodes = target_node.children;\n                var sc = sibling_nodes.length;\n                var node = null;\n                var delta_y = Number.MAX_VALUE;\n                var node_before = null;\n                var beforeid = '_last_';\n                while (sc--) {\n                    node = sibling_nodes[sc];\n                    if (node.direction == target_direct && node.id != src_node.id) {\n                        var dy = node.get_location().y - shadow_h;\n                        if (dy > 0 && dy < delta_y) {\n                            delta_y = dy;\n                            node_before = node;\n                            beforeid = '_first_';\n                        }\n                    }\n                }\n                if (!!node_before) { beforeid = node_before.id; }\n                this.jm.move_node(src_node.id, beforeid, target_node.id, target_direct);\n            }\n            this.active_node = null;\n            this.target_node = null;\n            this.target_direct = null;\n        },\n\n        jm_event_handle: function (type, data) {\n            if (type === jsMind.event_type.resize) {\n                this.resize();\n            }\n        }\n    };\n\n    var draggable_plugin = new jsMind.plugin('draggable', function (jm) {\n        var jd = new jsMind.draggable(jm);\n        jd.init();\n        jm.add_event_listener(function (type, data) {\n            jd.jm_event_handle.call(jd, type, data);\n        });\n    });\n\n    jsMind.register_plugin(draggable_plugin);\n\n})(window);\n","/*\n * Released under BSD License\n * Copyright (c) 2014-2016 hizzgdev@163.com\n *\n * Project Home:\n *   https://github.com/hizzgdev/jsmind/\n */\n\n; (function ($w) {\n    'use strict';\n    // set 'jsMind' as the library name.\n    // __name__ should be a const value, Never try to change it easily.\n    var __name__ = 'jsMind';\n    // library version\n    var __version__ = '0.4.6';\n    // author\n    var __author__ = 'hizzgdev@163.com';\n\n    // an noop function define\n    var _noop = function () { };\n    var logger = (typeof console === 'undefined') ? {\n        log: _noop, debug: _noop, error: _noop, warn: _noop, info: _noop\n    } : console;\n\n    // check global variables\n    if (typeof module === 'undefined' || !module.exports) {\n        if (typeof $w[__name__] != 'undefined') {\n            logger.log(__name__ + ' has been already exist.');\n            return;\n        }\n    }\n\n    // shortcut of methods in dom\n    var $d = $w.document;\n    var $g = function (id) { return $d.getElementById(id); };\n    var $c = function (tag) { return $d.createElement(tag); };\n    var $t = function (n, t) { if (n.hasChildNodes()) { n.firstChild.nodeValue = t; } else { n.appendChild($d.createTextNode(t)); } };\n\n    var $h = function (n, t) {\n        if (t instanceof HTMLElement) {\n            n.innerHTML = '';\n            n.appendChild(t)\n        } else {\n            n.innerHTML = t;\n        }\n    };\n    // detect isElement\n    var $i = function (el) { return !!el && (typeof el === 'object') && (el.nodeType === 1) && (typeof el.style === 'object') && (typeof el.ownerDocument === 'object'); };\n    if (typeof String.prototype.startsWith != 'function') { String.prototype.startsWith = function (p) { return this.slice(0, p.length) === p; }; }\n\n    var DEFAULT_OPTIONS = {\n        container: '',   // id of the container\n        editable: false, // you can change it in your options\n        theme: null,\n        mode: 'full',    // full or side\n        support_html: true,\n\n        view: {\n            engine: 'canvas',\n            hmargin: 100,\n            vmargin: 50,\n            line_width: 2,\n            line_color: '#555'\n        },\n        layout: {\n            hspace: 30,\n            vspace: 20,\n            pspace: 13\n        },\n        default_event_handle: {\n            enable_mousedown_handle: true,\n            enable_click_handle: true,\n            enable_dblclick_handle: true\n        },\n        shortcut: {\n            enable: true,\n            handles: {\n            },\n            mapping: {\n                addchild: 45, // Insert\n                addbrother: 13, // Enter\n                editnode: 113,// F2\n                delnode: 46, // Delete\n                toggle: 32, // Space\n                left: 37, // Left\n                up: 38, // Up\n                right: 39, // Right\n                down: 40, // Down\n            }\n        },\n    };\n\n    // core object\n    var jm = function (options) {\n        jm.current = this;\n\n        this.version = __version__;\n        var opts = {};\n        jm.util.json.merge(opts, DEFAULT_OPTIONS);\n        jm.util.json.merge(opts, options);\n\n        if (!opts.container) {\n            logger.error('the options.container should not be null or empty.');\n            return;\n        }\n        this.options = opts;\n        this.inited = false;\n        this.mind = null;\n        this.event_handles = [];\n        this.init();\n    };\n\n    // ============= static object =============================================\n    jm.direction = { left: -1, center: 0, right: 1 };\n    jm.event_type = { show: 1, resize: 2, edit: 3, select: 4 };\n    jm.key = { meta: 1 << 13, ctrl: 1 << 12, alt: 1 << 11, shift: 1 << 10 };\n\n    jm.node = function (sId, iIndex, sTopic, oData, bIsRoot, oParent, eDirection, bExpanded) {\n        if (!sId) { logger.error('invalid nodeid'); return; }\n        if (typeof iIndex != 'number') { logger.error('invalid node index'); return; }\n        if (typeof bExpanded === 'undefined') { bExpanded = true; }\n        this.id = sId;\n        this.index = iIndex;\n        this.topic = sTopic;\n        this.data = oData || {};\n        this.isroot = bIsRoot;\n        this.parent = oParent;\n        this.direction = eDirection;\n        this.expanded = !!bExpanded;\n        this.children = [];\n        this._data = {};\n    };\n\n    jm.node.compare = function (node1, node2) {\n        // '-1' is alwary the last\n        var r = 0;\n        var i1 = node1.index;\n        var i2 = node2.index;\n        if (i1 >= 0 && i2 >= 0) {\n            r = i1 - i2;\n        } else if (i1 == -1 && i2 == -1) {\n            r = 0;\n        } else if (i1 == -1) {\n            r = 1;\n        } else if (i2 == -1) {\n            r = -1;\n        } else {\n            r = 0;\n        }\n        //logger.debug(i1+' <> '+i2+'  =  '+r);\n        return r;\n    };\n\n    jm.node.inherited = function (pnode, node) {\n        if (!!pnode && !!node) {\n            if (pnode.id === node.id) {\n                return true;\n            }\n            if (pnode.isroot) {\n                return true;\n            }\n            var pid = pnode.id;\n            var p = node;\n            while (!p.isroot) {\n                p = p.parent;\n                if (p.id === pid) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n\n    jm.node.prototype = {\n        get_location: function () {\n            var vd = this._data.view;\n            return {\n                x: vd.abs_x,\n                y: vd.abs_y\n            };\n        },\n        get_size: function () {\n            var vd = this._data.view;\n            return {\n                w: vd.width,\n                h: vd.height\n            }\n        }\n    };\n\n\n    jm.mind = function () {\n        this.name = null;\n        this.author = null;\n        this.version = null;\n        this.root = null;\n        this.selected = null;\n        this.nodes = {};\n    };\n\n    jm.mind.prototype = {\n        get_node: function (nodeid) {\n            if (nodeid in this.nodes) {\n                return this.nodes[nodeid];\n            } else {\n                logger.warn('the node[id=' + nodeid + '] can not be found');\n                return null;\n            }\n        },\n\n        set_root: function (nodeid, topic, data) {\n            if (this.root == null) {\n                this.root = new jm.node(nodeid, 0, topic, data, true);\n                this._put_node(this.root);\n            } else {\n                logger.error('root node is already exist');\n            }\n        },  \n        add_node: function (parent_node, nodeid, topic, data, idx, direction, expanded) {\n            if (!jm.util.is_node(parent_node)) {\n                var the_parent_node = this.get_node(parent_node);\n                if (!the_parent_node) {\n                    logger.error('the parent_node[id=' + parent_node + '] can not be found.');\n                    return null;\n                } else {\n     \n                    return this.add_node(the_parent_node, nodeid, topic, data, idx, direction, expanded);\n\n                }\n            }\n            var nodeindex = idx || -1;\n            var node = null;\n            if (parent_node.isroot) {\n                var d = jm.direction.right;\n                if (isNaN(direction)) {\n                    var children = parent_node.children;\n                    var children_len = children.length;\n                    var r = 0;\n                    for (var i = 0; i < children_len; i++) { if (children[i].direction === jm.direction.left) { r--; } else { r++; } }\n                    d = (children_len > 1 && r > 0) ? jm.direction.left : jm.direction.right\n                } else {\n                    d = (direction != jm.direction.left) ? jm.direction.right : jm.direction.left;\n                }\n                node = new jm.node(nodeid, nodeindex, topic, data, false, parent_node, d, expanded);\n            } else {\n                node = new jm.node(nodeid, nodeindex, topic, data, false, parent_node, parent_node.direction, expanded);\n            }\n            if (this._put_node(node)) {\n                parent_node.children.push(node);\n                this._reindex(parent_node);\n\n            } else {\n                logger.error('fail, the nodeid \\'' + node.id + '\\' has been already exist.');\n                node = null;\n            }\n            \n            return node;\n        },\n\n\n        insert_node_before: function (node_before, nodeid, topic, data) {\n            if (!jm.util.is_node(node_before)) {\n                var the_node_before = this.get_node(node_before);\n                if (!the_node_before) {\n                    logger.error('the node_before[id=' + node_before + '] can not be found.');\n                    return null;\n                } else {\n                    return this.insert_node_before(the_node_before, nodeid, topic, data);\n                }\n            }\n            var node_index = node_before.index - 0.5;\n            return this.add_node(node_before.parent, nodeid, topic, data, node_index,'','','insert');\n        },\n\n        get_node_before: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return null;\n                } else {\n                    return this.get_node_before(the_node);\n                }\n            }\n            if (node.isroot) { return null; }\n            var idx = node.index - 2;\n            if (idx >= 0) {\n                return node.parent.children[idx];\n            } else {\n                return null;\n            }\n        },\n\n        insert_node_after: function (node_after, nodeid, topic, data) {\n            if (!jm.util.is_node(node_after)) {\n                var the_node_after = this.get_node(node_before);\n                if (!the_node_after) {\n                    logger.error('the node_after[id=' + node_after + '] can not be found.');\n                    return null;\n                } else {\n                    return this.insert_node_after(the_node_after, nodeid, topic, data);\n                }\n            }\n            var node_index = node_after.index + 0.5;\n            var reVal= this.add_node(node_after.parent, nodeid, topic, data, node_index,'','','insert')\n            return reVal\n\n        },\n\n\n\n        get_node_after: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return null;\n                } else {\n                    return this.get_node_after(the_node);\n                }\n            }\n            if (node.isroot) { return null; }\n            var idx = node.index;\n            var brothers = node.parent.children;\n            if (brothers.length >= idx) {\n                return node.parent.children[idx];\n            } else {\n                return null;\n            }\n        },\n\n        move_node: function (node, beforeid, parentid, direction) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return null;\n                } else {\n                    return this.move_node(the_node, beforeid, parentid, direction);\n                }\n            }\n            if (!parentid) {\n                parentid = node.parent.id;\n            }\n            return this._move_node(node, beforeid, parentid, direction);\n        },\n\n        _flow_node_direction: function (node, direction) {\n            if (typeof direction === 'undefined') {\n                direction = node.direction;\n            } else {\n                node.direction = direction;\n            }\n            var len = node.children.length;\n            while (len--) {\n                this._flow_node_direction(node.children[len], direction);\n            }\n        },\n\n        _move_node_internal: function (node, beforeid) {\n            if (!!node && !!beforeid) {\n                if (beforeid == '_last_') {\n                    node.index = -1;\n                    this._reindex(node.parent);\n                } else if (beforeid == '_first_') {\n                    node.index = 0;\n                    this._reindex(node.parent);\n                } else {\n                    var node_before = (!!beforeid) ? this.get_node(beforeid) : null;\n                    if (node_before != null && node_before.parent != null && node_before.parent.id == node.parent.id) {\n                        node.index = node_before.index - 0.5;\n                        this._reindex(node.parent);\n                    }\n                }\n            }\n            return node;\n        },\n\n        _move_node: function (node, beforeid, parentid, direction) {\n            if (!!node && !!parentid) {\n                if (node.parent.id != parentid) {\n                    // remove from parent's children\n                    var sibling = node.parent.children;\n                    var si = sibling.length;\n                    while (si--) {\n                        if (sibling[si].id == node.id) {\n                            sibling.splice(si, 1);\n                            break;\n                        }\n                    }\n                    node.parent = this.get_node(parentid);\n                    node.parent.children.push(node);\n                }\n\n                if (node.parent.isroot) {\n                    if (direction == jm.direction.left) {\n                        node.direction = direction;\n                    } else {\n                        node.direction = jm.direction.right;\n                    }\n                } else {\n                    node.direction = node.parent.direction;\n                }\n                this._move_node_internal(node, beforeid);\n                this._flow_node_direction(node);\n            }\n            return node;\n        },\n\n        remove_node: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return false;\n                } else {\n                    return this.remove_node(the_node);\n                }\n            }\n            if (!node) {\n                logger.error('fail, the node can not be found');\n                return false;\n            }\n            if (node.isroot) {\n                logger.error('fail, can not remove root node');\n                return false;\n            }\n            if (this.selected != null && this.selected.id == node.id) {\n                this.selected = null;\n            }\n            // clean all subordinate nodes\n            var children = node.children;\n            var ci = children.length;\n            while (ci--) {\n                this.remove_node(children[ci]);\n            }\n            // clean all children\n            children.length = 0;\n            // remove from parent's children\n            var sibling = node.parent.children;\n            var si = sibling.length;\n            while (si--) {\n                if (sibling[si].id == node.id) {\n                    sibling.splice(si, 1);\n                    break;\n                }\n            }\n            // remove from global nodes\n            delete this.nodes[node.id];\n            // clean all properties\n            for (var k in node) {\n                delete node[k];\n            }\n            // remove it's self\n            node = null;\n            //delete node;\n            return true;\n        },\n\n        _put_node: function (node) {\n            if (node.id in this.nodes) {\n                logger.warn('the nodeid \\'' + node.id + '\\' has been already exist.');\n                return false;\n            } else {\n                this.nodes[node.id] = node;\n                return true;\n            }\n        },\n\n        _reindex: function (node) {\n            if (node instanceof jm.node) {\n                node.children.sort(jm.node.compare);\n                for (var i = 0; i < node.children.length; i++) {\n                    node.children[i].index = i + 1;\n                }\n            }\n        },\n    };\n\n    jm.format = {\n        node_tree: {\n            example: {\n                \"meta\": {\n                    \"name\": __name__,\n                    \"author\": __author__,\n                    \"version\": __version__\n                },\n                \"format\": \"node_tree\",\n                \"data\": { \"id\": \"root\", \"topic\": \"jsMind Example\" }\n            },\n            get_mind: function (source) {\n                var df = jm.format.node_tree;\n                var mind = new jm.mind();\n                mind.name = source.meta.name;\n                mind.author = source.meta.author;\n                mind.version = source.meta.version;\n                df._parse(mind, source.data);\n                return mind;\n            },\n            get_data: function (mind) {\n                var df = jm.format.node_tree;\n                var json = {};\n                json.meta = {\n                    name: mind.name,\n                    author: mind.author,\n                    version: mind.version\n                };\n                json.format = 'node_tree';\n                json.data = df._buildnode(mind.root);\n                return json;\n            },\n\n            _parse: function (mind, node_root) {\n                var df = jm.format.node_tree;\n                var data = df._extract_data(node_root);\n                mind.set_root(node_root.id, node_root.topic, data);\n                if ('children' in node_root) {\n                    var children = node_root.children;\n                    for (var i = 0; i < children.length; i++) {\n                        df._extract_subnode(mind, mind.root, children[i]);\n                    }\n                }\n            },\n\n            _extract_data: function (node_json) {\n                var data = {};\n                for (var k in node_json) {\n                    if (k == 'id' || k == 'topic' || k == 'children' || k == 'direction' || k == 'expanded') {\n                        continue;\n                    }\n                    data[k] = node_json[k];\n                }\n                return data;\n            },\n\n            _extract_subnode: function (mind, node_parent, node_json) {\n                var df = jm.format.node_tree;\n                var data = df._extract_data(node_json);\n                var d = null;\n                if (node_parent.isroot) {\n                    d = node_json.direction == 'left' ? jm.direction.left : jm.direction.right;\n                }\n                var node = mind.add_node(node_parent, node_json.id, node_json.topic, data, null, d, node_json.expanded);\n                if ('children' in node_json) {\n                    var children = node_json.children;\n                    for (var i = 0; i < children.length; i++) {\n                        df._extract_subnode(mind, node, children[i]);\n                    }\n                }\n            },\n\n            _buildnode: function (node) {\n                var df = jm.format.node_tree;\n                if (!(node instanceof jm.node)) { return; }\n                var o = {\n                    id: node.id,\n                    topic: node.topic,\n                    expanded: node.expanded\n                };\n                if (!!node.parent && node.parent.isroot) {\n                    o.direction = node.direction == jm.direction.left ? 'left' : 'right';\n                }\n                if (node.data != null) {\n                    var node_data = node.data;\n                    for (var k in node_data) {\n                        o[k] = node_data[k];\n                    }\n                }\n                var children = node.children;\n                if (children.length > 0) {\n                    o.children = [];\n                    for (var i = 0; i < children.length; i++) {\n                        o.children.push(df._buildnode(children[i]));\n                    }\n                }\n                return o;\n            }\n        },\n\n        node_array: {\n            example: {\n                \"meta\": {\n                    \"name\": __name__,\n                    \"author\": __author__,\n                    \"version\": __version__\n                },\n                \"format\": \"node_array\",\n                \"data\": [\n                    { \"id\": \"root\", \"topic\": \"jsMind Example\", \"isroot\": true }\n                ]\n            },\n\n            get_mind: function (source) {\n                var df = jm.format.node_array;\n                var mind = new jm.mind();\n                mind.name = source.meta.name;\n                mind.author = source.meta.author;\n                mind.version = source.meta.version;\n                df._parse(mind, source.data);\n                return mind;\n            },\n\n            get_data: function (mind) {\n                var df = jm.format.node_array;\n                var json = {};\n                json.meta = {\n                    name: mind.name,\n                    author: mind.author,\n                    version: mind.version\n                };\n                json.format = 'node_array';\n                json.data = [];\n                df._array(mind, json.data);\n                return json;\n            },\n\n            _parse: function (mind, node_array) {\n                var df = jm.format.node_array;\n                var narray = node_array.slice(0);\n                // reverse array for improving looping performance\n                narray.reverse();\n                var root_id = df._extract_root(mind, narray);\n                if (!!root_id) {\n                    df._extract_subnode(mind, root_id, narray);\n                } else {\n                    logger.error('root node can not be found');\n                }\n            },\n\n            _extract_root: function (mind, node_array) {\n                var df = jm.format.node_array;\n                var i = node_array.length;\n                while (i--) {\n                    if ('isroot' in node_array[i] && node_array[i].isroot) {\n                        var root_json = node_array[i];\n                        var data = df._extract_data(root_json);\n                        mind.set_root(root_json.id, root_json.topic, data);\n                        node_array.splice(i, 1);\n                        return root_json.id;\n                    }\n                }\n                return null;\n            },\n\n            _extract_subnode: function (mind, parentid, node_array) {\n                var df = jm.format.node_array;\n                var i = node_array.length;\n                var node_json = null;\n                var data = null;\n                var extract_count = 0;\n                while (i--) {\n                    node_json = node_array[i];\n                    if (node_json.parentid == parentid) {\n                        data = df._extract_data(node_json);\n                        var d = null;\n                        var node_direction = node_json.direction;\n                        if (!!node_direction) {\n                            d = node_direction == 'left' ? jm.direction.left : jm.direction.right;\n                        }\n                        mind.add_node(parentid, node_json.id, node_json.topic, data, null, d, node_json.expanded);\n                        node_array.splice(i, 1);\n                        extract_count++;\n                        var sub_extract_count = df._extract_subnode(mind, node_json.id, node_array);\n                        if (sub_extract_count > 0) {\n                            // reset loop index after extract subordinate node\n                            i = node_array.length;\n                            extract_count += sub_extract_count;\n                        }\n                    }\n                }\n                return extract_count;\n            },\n\n            _extract_data: function (node_json) {\n                var data = {};\n                for (var k in node_json) {\n                    if (k == 'id' || k == 'topic' || k == 'parentid' || k == 'isroot' || k == 'direction' || k == 'expanded') {\n                        continue;\n                    }\n                    data[k] = node_json[k];\n                }\n                return data;\n            },\n\n            _array: function (mind, node_array) {\n                var df = jm.format.node_array;\n                df._array_node(mind.root, node_array);\n            },\n\n            _array_node: function (node, node_array) {\n                var df = jm.format.node_array;\n                if (!(node instanceof jm.node)) { return; }\n                var o = {\n                    id: node.id,\n                    topic: node.topic,\n                    expanded: node.expanded\n                };\n                if (!!node.parent) {\n                    o.parentid = node.parent.id;\n                }\n                if (node.isroot) {\n                    o.isroot = true;\n                }\n                if (!!node.parent && node.parent.isroot) {\n                    o.direction = node.direction == jm.direction.left ? 'left' : 'right';\n                }\n                if (node.data != null) {\n                    var node_data = node.data;\n                    for (var k in node_data) {\n                        o[k] = node_data[k];\n                    }\n                }\n                node_array.push(o);\n                var ci = node.children.length;\n                for (var i = 0; i < ci; i++) {\n                    df._array_node(node.children[i], node_array);\n                }\n            },\n        },\n\n        freemind: {\n            example: {\n                \"meta\": {\n                    \"name\": __name__,\n                    \"author\": __author__,\n                    \"version\": __version__\n                },\n                \"format\": \"freemind\",\n                \"data\": \"<map version=\\\"1.0.1\\\"><node ID=\\\"root\\\" TEXT=\\\"freemind Example\\\"/></map>\"\n            },\n            get_mind: function (source) {\n                var df = jm.format.freemind;\n                var mind = new jm.mind();\n                mind.name = source.meta.name;\n                mind.author = source.meta.author;\n                mind.version = source.meta.version;\n                var xml = source.data;\n                var xml_doc = df._parse_xml(xml);\n                var xml_root = df._find_root(xml_doc);\n                df._load_node(mind, null, xml_root);\n                return mind;\n            },\n\n            get_data: function (mind) {\n                var df = jm.format.freemind;\n                var json = {};\n                json.meta = {\n                    name: mind.name,\n                    author: mind.author,\n                    version: mind.version\n                };\n                json.format = 'freemind';\n                var xmllines = [];\n                xmllines.push('<map version=\\\"1.0.1\\\">');\n                df._buildmap(mind.root, xmllines);\n                xmllines.push('</map>');\n                json.data = xmllines.join(' ');\n                return json;\n            },\n\n            _parse_xml: function (xml) {\n                var xml_doc = null;\n                if (window.DOMParser) {\n                    var parser = new DOMParser();\n                    xml_doc = parser.parseFromString(xml, 'text/xml');\n                } else { // Internet Explorer\n                    xml_doc = new ActiveXObject('Microsoft.XMLDOM');\n                    xml_doc.async = false;\n                    xml_doc.loadXML(xml);\n                }\n                return xml_doc;\n            },\n\n            _find_root: function (xml_doc) {\n                var nodes = xml_doc.childNodes;\n                var node = null;\n                var root = null;\n                var n = null;\n                for (var i = 0; i < nodes.length; i++) {\n                    n = nodes[i];\n                    if (n.nodeType == 1 && n.tagName == 'map') {\n                        node = n;\n                        break;\n                    }\n                }\n                if (!!node) {\n                    var ns = node.childNodes;\n                    node = null;\n                    for (var i = 0; i < ns.length; i++) {\n                        n = ns[i];\n                        if (n.nodeType == 1 && n.tagName == 'node') {\n                            node = n;\n                            break;\n                        }\n                    }\n                }\n                return node;\n            },\n\n            _load_node: function (mind, parent_id, xml_node) {\n                var df = jm.format.freemind;\n                var node_id = xml_node.getAttribute('ID');\n                var node_topic = xml_node.getAttribute('TEXT');\n                // look for richcontent\n                if (node_topic == null) {\n                    var topic_children = xml_node.childNodes;\n                    var topic_child = null;\n                    for (var i = 0; i < topic_children.length; i++) {\n                        topic_child = topic_children[i];\n                        //logger.debug(topic_child.tagName);\n                        if (topic_child.nodeType == 1 && topic_child.tagName === 'richcontent') {\n                            node_topic = topic_child.textContent;\n                            break;\n                        }\n                    }\n                }\n                var node_data = df._load_attributes(xml_node);\n                var node_expanded = ('expanded' in node_data) ? (node_data.expanded == 'true') : true;\n                delete node_data.expanded;\n\n                var node_position = xml_node.getAttribute('POSITION');\n                var node_direction = null;\n                if (!!node_position) {\n                    node_direction = node_position == 'left' ? jm.direction.left : jm.direction.right;\n                }\n                //logger.debug(node_position +':'+ node_direction);\n                if (!!parent_id) {\n                    mind.add_node(parent_id, node_id, node_topic, node_data, null, node_direction, node_expanded);\n                } else {\n                    mind.set_root(node_id, node_topic, node_data);\n                }\n                var children = xml_node.childNodes;\n                var child = null;\n                for (var i = 0; i < children.length; i++) {\n                    child = children[i];\n                    if (child.nodeType == 1 && child.tagName == 'node') {\n                        df._load_node(mind, node_id, child);\n                    }\n                }\n            },\n\n            _load_attributes: function (xml_node) {\n                var children = xml_node.childNodes;\n                var attr = null;\n                var attr_data = {};\n                for (var i = 0; i < children.length; i++) {\n                    attr = children[i];\n                    if (attr.nodeType == 1 && attr.tagName === 'attribute') {\n                        attr_data[attr.getAttribute('NAME')] = attr.getAttribute('VALUE');\n                    }\n                }\n                return attr_data;\n            },\n\n            _buildmap: function (node, xmllines) {\n                var df = jm.format.freemind;\n                var pos = null;\n                if (!!node.parent && node.parent.isroot) {\n                    pos = node.direction === jm.direction.left ? 'left' : 'right';\n                }\n                xmllines.push('<node');\n                xmllines.push('ID=\\\"' + node.id + '\\\"');\n                if (!!pos) {\n                    xmllines.push('POSITION=\\\"' + pos + '\\\"');\n                }\n                xmllines.push('TEXT=\\\"' + node.topic + '\\\">');\n\n                // store expanded status as an attribute\n                xmllines.push('<attribute NAME=\\\"expanded\\\" VALUE=\\\"' + node.expanded + '\\\"/>');\n\n                // for attributes\n                var node_data = node.data;\n                if (node_data != null) {\n                    for (var k in node_data) {\n                        xmllines.push('<attribute NAME=\\\"' + k + '\\\" VALUE=\\\"' + node_data[k] + '\\\"/>');\n                    }\n                }\n\n                // for children\n                var children = node.children;\n                for (var i = 0; i < children.length; i++) {\n                    df._buildmap(children[i], xmllines);\n                }\n\n                xmllines.push('</node>');\n            },\n        },\n    };\n\n    // ============= utility object =============================================\n\n    jm.util = {\n        is_node: function (node) {\n            return !!node && node instanceof jm.node;\n        },\n        ajax: {\n            _xhr: function () {\n                var xhr = null;\n                if (window.XMLHttpRequest) {\n                    xhr = new XMLHttpRequest();\n                } else {\n                    try {\n                        xhr = new ActiveXObject('Microsoft.XMLHTTP');\n                    } catch (e) { }\n                }\n                return xhr;\n            },\n            _eurl: function (url) {\n                return encodeURIComponent(url);\n            },\n            request: function (url, param, method, callback, fail_callback) {\n                var a = jm.util.ajax;\n                var p = null;\n                var tmp_param = [];\n                for (var k in param) {\n                    tmp_param.push(a._eurl(k) + '=' + a._eurl(param[k]));\n                }\n                if (tmp_param.length > 0) {\n                    p = tmp_param.join('&');\n                }\n                var xhr = a._xhr();\n                if (!xhr) { return; }\n                xhr.onreadystatechange = function () {\n                    if (xhr.readyState == 4) {\n                        if (xhr.status == 200 || xhr.status == 0) {\n                            if (typeof callback === 'function') {\n                                var data = jm.util.json.string2json(xhr.responseText);\n                                if (data != null) {\n                                    callback(data);\n                                } else {\n                                    callback(xhr.responseText);\n                                }\n                            }\n                        } else {\n                            if (typeof fail_callback === 'function') {\n                                fail_callback(xhr);\n                            } else {\n                                logger.error('xhr request failed.', xhr);\n                            }\n                        }\n                    }\n                }\n                method = method || 'GET';\n                xhr.open(method, url, true);\n                xhr.setRequestHeader('If-Modified-Since', '0');\n                if (method == 'POST') {\n                    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded;charset=utf-8');\n                    xhr.send(p);\n                } else {\n                    xhr.send();\n                }\n            },\n            get: function (url, callback) {\n                return jm.util.ajax.request(url, {}, 'GET', callback);\n            },\n            post: function (url, param, callback) {\n                return jm.util.ajax.request(url, param, 'POST', callback);\n            }\n        },\n\n        dom: {\n            //target,eventType,handler\n            add_event: function (t, e, h) {\n                if (!!t.addEventListener) {\n                    t.addEventListener(e, h, false);\n                } else {\n                    t.attachEvent('on' + e, h);\n                }\n            }\n        },\n\n        file: {\n            read: function (file_data, fn_callback) {\n                var reader = new FileReader();\n                reader.onload = function () {\n                    if (typeof fn_callback === 'function') {\n                        fn_callback(this.result, file_data.name);\n                    }\n                };\n                reader.readAsText(file_data);\n            },\n\n            save: function (file_data, type, name) {\n                var blob;\n                if (typeof $w.Blob === 'function') {\n                    blob = new Blob([file_data], { type: type });\n                } else {\n                    var BlobBuilder = $w.BlobBuilder || $w.MozBlobBuilder || $w.WebKitBlobBuilder || $w.MSBlobBuilder;\n                    var bb = new BlobBuilder();\n                    bb.append(file_data);\n                    blob = bb.getBlob(type);\n                }\n                if (navigator.msSaveBlob) {\n                    navigator.msSaveBlob(blob, name);\n                } else {\n                    var URL = $w.URL || $w.webkitURL;\n                    var bloburl = URL.createObjectURL(blob);\n                    var anchor = $c('a');\n                    if ('download' in anchor) {\n                        anchor.style.visibility = 'hidden';\n                        anchor.href = bloburl;\n                        anchor.download = name;\n                        $d.body.appendChild(anchor);\n                        var evt = $d.createEvent('MouseEvents');\n                        evt.initEvent('click', true, true);\n                        anchor.dispatchEvent(evt);\n                        $d.body.removeChild(anchor);\n                    } else {\n                        location.href = bloburl;\n                    }\n                }\n            }\n        },\n\n        json: {\n            json2string: function (json) {\n                if (!!JSON) {\n                    try {\n                        var json_str = JSON.stringify(json);\n                        return json_str;\n                    } catch (e) {\n                        logger.warn(e);\n                        logger.warn('can not convert to string');\n                        return null;\n                    }\n                }\n            },\n            string2json: function (json_str) {\n                if (!!JSON) {\n                    try {\n                        var json = JSON.parse(json_str);\n                        return json;\n                    } catch (e) {\n                        logger.warn(e);\n                        logger.warn('can not parse to json');\n                        return null;\n                    }\n                }\n            },\n            merge: function (b, a) {\n                for (var o in a) {\n                    if (o in b) {\n                        if (typeof b[o] === 'object' &&\n                            Object.prototype.toString.call(b[o]).toLowerCase() == '[object object]' &&\n                            !b[o].length) {\n                            jm.util.json.merge(b[o], a[o]);\n                        } else {\n                            b[o] = a[o];\n                        }\n                    } else {\n                        b[o] = a[o];\n                    }\n                }\n                return b;\n            }\n        },\n\n        uuid: {\n            newid: function () {\n                return (new Date().getTime().toString(16) + Math.random().toString(16).substr(2)).substr(2, 16);\n            }\n        },\n\n        text: {\n            is_empty: function (s) {\n                if (!s) { return true; }\n                return s.replace(/\\s*/, '').length == 0;\n            }\n        }\n    };\n\n    jm.prototype = {\n        init: function () {\n            if (this.inited) { return; }\n            this.inited = true;\n\n            var opts = this.options;\n\n            var opts_layout = {\n                mode: opts.mode,\n                hspace: opts.layout.hspace,\n                vspace: opts.layout.vspace,\n                pspace: opts.layout.pspace\n            }\n            var opts_view = {\n                container: opts.container,\n                support_html: opts.support_html,\n                engine: opts.view.engine,\n                hmargin: opts.view.hmargin,\n                vmargin: opts.view.vmargin,\n                line_width: opts.view.line_width,\n                line_color: opts.view.line_color\n            };\n            // create instance of function provider\n            this.data = new jm.data_provider(this);\n            this.layout = new jm.layout_provider(this, opts_layout);\n            this.view = new jm.view_provider(this, opts_view);\n            this.shortcut = new jm.shortcut_provider(this, opts.shortcut);\n\n            this.data.init();\n            this.layout.init();\n            this.view.init();\n            this.shortcut.init();\n\n            this._event_bind();\n\n            jm.init_plugins(this);\n        },\n\n        enable_edit: function () {\n            this.options.editable = true;\n        },\n\n        disable_edit: function () {\n            this.options.editable = false;\n        },\n\n        // call enable_event_handle('dblclick')\n        // options are 'mousedown', 'click', 'dblclick'\n        enable_event_handle: function (event_handle) {\n            this.options.default_event_handle['enable_' + event_handle + '_handle'] = true;\n        },\n\n        // call disable_event_handle('dblclick')\n        // options are 'mousedown', 'click', 'dblclick'\n        disable_event_handle: function (event_handle) {\n            this.options.default_event_handle['enable_' + event_handle + '_handle'] = false;\n        },\n\n        get_editable: function () {\n            return this.options.editable;\n        },\n\n        set_theme: function (theme) {\n            var theme_old = this.options.theme;\n            this.options.theme = (!!theme) ? theme : null;\n            if (theme_old != this.options.theme) {\n                this.view.reset_theme();\n                this.view.reset_custom_style();\n            }\n        },\n        _event_bind: function () {\n            this.view.add_event(this, 'mousedown', this.mousedown_handle);\n            this.view.add_event(this, 'click', this.click_handle);\n            this.view.add_event(this, 'dblclick', this.dblclick_handle);\n        },\n\n        mousedown_handle: function (e) {\n            if (!this.options.default_event_handle['enable_mousedown_handle']) {\n                return;\n            }\n            var element = e.target || event.srcElement;\n            var nodeid = this.view.get_binded_nodeid(element);\n            if (!!nodeid) {\n                if (element.tagName.toLowerCase() == 'jmnode') {\n                    this.select_node(nodeid);\n                }\n            } else {\n                this.select_clear();\n            }\n        },\n\n        click_handle: function (e) {\n            if (!this.options.default_event_handle['enable_click_handle']) {\n                return;\n            }\n            var element = e.target || event.srcElement;\n            var isexpander = this.view.is_expander(element);\n            if (isexpander) {\n                var nodeid = this.view.get_binded_nodeid(element);\n                if (!!nodeid) {\n                    this.toggle_node(nodeid);\n                }\n            }\n        },\n\n        dblclick_handle: function (e) {\n            if (!this.options.default_event_handle['enable_dblclick_handle']) {\n                return;\n            }\n            if (this.get_editable()) {\n                var element = e.target || event.srcElement;\n                var nodeid = this.view.get_binded_nodeid(element);\n                if (!!nodeid) {\n                    this.begin_edit(nodeid);\n                }\n            }\n        },\n\n        begin_edit: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return false;\n                } else {\n                    return this.begin_edit(the_node);\n                }\n            }\n            if (this.get_editable()) {\n                this.view.edit_node_begin(node);\n            } else {\n                logger.error('fail, this mind map is not editable.');\n                return;\n            }\n        },\n\n        end_edit: function () {\n            this.view.edit_node_end();\n        },\n\n        toggle_node: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.toggle_node(the_node);\n                }\n            }\n            if (node.isroot) { return; }\n            this.view.save_location(node);\n            this.layout.toggle_node(node);\n            this.view.relayout();\n            this.view.restore_location(node);\n        },\n\n        expand_node: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.expand_node(the_node);\n                }\n            }\n            if (node.isroot) { return; }\n            this.view.save_location(node);\n            this.layout.expand_node(node);\n            this.view.relayout();\n            this.view.restore_location(node);\n        },\n\n        collapse_node: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.collapse_node(the_node);\n                }\n            }\n            if (node.isroot) { return; }\n            this.view.save_location(node);\n            this.layout.collapse_node(node);\n            this.view.relayout();\n            this.view.restore_location(node);\n        },\n\n        expand_all: function () {\n            this.layout.expand_all();\n            this.view.relayout();\n        },\n\n        collapse_all: function () {\n            this.layout.collapse_all();\n            this.view.relayout();\n        },\n\n        expand_to_depth: function (depth) {\n            this.layout.expand_to_depth(depth);\n            this.view.relayout();\n        },\n\n        _reset: function () {\n            this.view.reset();\n            this.layout.reset();\n            this.data.reset();\n        },\n\n        _show: function (mind) {\n            var m = mind || jm.format.node_array.example;\n\n            this.mind = this.data.load(m);\n            if (!this.mind) {\n                logger.error('data.load error');\n                return;\n            } else {\n                logger.debug('data.load ok');\n            }\n\n            this.view.load();\n            logger.debug('view.load ok');\n\n            this.layout.layout();\n            logger.debug('layout.layout ok');\n\n            this.view.show(true);\n            logger.debug('view.show ok');\n\n            this.invoke_event_handle(jm.event_type.show, { data: [mind] });\n        },\n\n        show: function (mind) {\n            this._reset();\n            this._show(mind);\n        },\n\n        get_meta: function () {\n            return {\n                name: this.mind.name,\n                author: this.mind.author,\n                version: this.mind.version\n            };\n        },\n\n        get_data: function (data_format) {\n            var df = data_format || 'node_tree';\n            return this.data.get_data(df);\n        },\n\n        get_root: function () {\n            return this.mind.root;\n        },\n\n        get_node: function (nodeid) {\n            return this.mind.get_node(nodeid);\n        },\n\n        add_node: function (parent_node, nodeid, topic, data, from) {\n            if (this.get_editable()) {\n                var node = this.mind.add_node(parent_node, nodeid, topic, data);\n                if (!!node) {\n                    this.view.add_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                    this.view.reset_node_custom_style(node);\n                    this.expand_node(parent_node);\n                    this.invoke_event_handle(jm.event_type.edit, { evt: 'add_node', data: [parent_node.id, nodeid, topic, data], node: nodeid });\n                }\n\n                if (this.isWhenIncluded(node) && from != 'break'){\n                    this.add_YN_tail(node, true)\n                }\n\n                return node;\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        insert_node_before: function (node_before, nodeid, topic, data) {\n            if (this.get_editable()) {\n                var beforeid = jm.util.is_node(node_before) ? node_before.id : node_before;\n                var node = this.mind.insert_node_before(node_before, nodeid, topic, data);\n                if (!!node) {\n                    this.view.add_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                    this.invoke_event_handle(jm.event_type.edit, { evt: 'insert_node_before', data: [beforeid, nodeid, topic, data], node: nodeid });\n                }\n                return node;\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        insert_node_after: function (node_after, nodeid, topic, data) {\n\n            if (this.get_editable()) {\n                var afterid = jm.util.is_node(node_after) ? node_after.id : node_after;\n                var node = this.mind.insert_node_after(node_after, nodeid, topic, data);\n                if (!!node) {\n                    this.view.add_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                    this.invoke_event_handle(jm.event_type.edit, { evt: 'insert_node_after', data: [afterid, nodeid, topic, data], node: nodeid });\n                }\n                if (this.isWhenIncluded(node)){\n                    this.add_YN_tail(node, true)\n\n                }\n                return node;\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n        isWhenIncluded: function(node) {\n\n            if (node['isroot']==true){\n                return false\n            }\n\n            if (node['id']=='when'){\n                \n                return true \n\n            }\n            \n            return this.isWhenIncluded(node['parent']);\n                        \n\n        },\n\n        remove_node: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return false;\n                } else {\n                    return this.remove_node(the_node);\n                }\n            }\n            if (this.get_editable()) {\n                if (node.isroot) {\n                    logger.error('fail, can not remove root node');\n                    return false;\n                }\n                var nodeid = node.id;\n                var parentid = node.parent.id;\n                var parent_node = this.get_node(parentid);\n                this.view.save_location(parent_node);\n                this.view.remove_node(node);\n                this.mind.remove_node(node);\n                this.layout.layout();\n                this.view.show(false);\n                this.view.restore_location(parent_node);\n                this.invoke_event_handle(jm.event_type.edit, { evt: 'remove_node', data: [nodeid], node: parentid });\n                return true;\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return false;\n            }\n        },\n\n        update_node: function (nodeid, topic) {\n            if (this.get_editable()) {\n                if (jm.util.text.is_empty(topic)) {\n                    logger.warn('fail, topic can not be empty');\n                    return;\n                }\n                var node = this.get_node(nodeid);\n                if (!!node) {\n                    if (node.topic === topic) {\n                        logger.info('nothing changed');\n                        this.view.update_node(node);\n                        return;\n                    }\n                    node.topic = topic;\n                    this.view.update_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                    this.invoke_event_handle(jm.event_type.edit, { evt: 'update_node', data: [nodeid, topic], node: nodeid });\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return;\n            }\n        },\n\n        move_node: function (nodeid, beforeid, parentid, direction) {\n            if (this.get_editable()) {\n                var node = this.mind.move_node(nodeid, beforeid, parentid, direction);\n                if (!!node) {\n                    this.view.update_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                    this.invoke_event_handle(jm.event_type.edit, { evt: 'move_node', data: [nodeid, beforeid, parentid, direction], node: nodeid });\n                }\n                console.log(\"move_node\")\n                if (this.isWhenIncluded(node)){\n                    this.add_YN_tail(node)\n\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return;\n            }\n        },\n        add_YN_tail: function(node, isInsert = false){\n            var yes_id = jm.util.uuid.newid();\n            var no_id = jm.util.uuid.newid();\n            \n            if ((node['parent']['topic'] == 'Yes' || node['parent']['topic'] == 'No') && isInsert == false){\n                console.log('add_YN is not working')\n            }\n            else{\n                this.add_node(node,yes_id,\"Yes\",'','break')\n                this.add_node(node,no_id,\"No\",'','break')\n            }\n            // this.add_node(node,yes_id,\"Yes\",'','break')\n            // this.add_node(node,no_id,\"No\",'','break')\n\n\n        },\n\n        select_node: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.select_node(the_node);\n                }\n            }\n            if (!this.layout.is_visible(node)) {\n                return;\n            }\n            this.mind.selected = node;\n            this.view.select_node(node);\n        },\n\n        get_selected_node: function () {\n            if (!!this.mind) {\n                return this.mind.selected;\n            } else {\n                return null;\n            }\n        },\n\n        select_clear: function () {\n            if (!!this.mind) {\n                this.mind.selected = null;\n                this.view.select_clear();\n            }\n        },\n\n        is_node_visible: function (node) {\n            return this.layout.is_visible(node);\n        },\n\n        find_node_before: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.find_node_before(the_node);\n                }\n            }\n            if (node.isroot) { return null; }\n            var n = null;\n            if (node.parent.isroot) {\n                var c = node.parent.children;\n                var prev = null;\n                var ni = null;\n                for (var i = 0; i < c.length; i++) {\n                    ni = c[i];\n                    if (node.direction === ni.direction) {\n                        if (node.id === ni.id) {\n                            n = prev;\n                        }\n                        prev = ni;\n                    }\n                }\n            } else {\n                n = this.mind.get_node_before(node);\n            }\n            return n;\n        },\n\n        find_node_after: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.find_node_after(the_node);\n                }\n            }\n            if (node.isroot) { return null; }\n            var n = null;\n            if (node.parent.isroot) {\n                var c = node.parent.children;\n                var getthis = false;\n                var ni = null;\n                for (var i = 0; i < c.length; i++) {\n                    ni = c[i];\n                    if (node.direction === ni.direction) {\n                        if (getthis) {\n                            n = ni;\n                            break;\n                        }\n                        if (node.id === ni.id) {\n                            getthis = true;\n                        }\n                    }\n                }\n            } else {\n                n = this.mind.get_node_after(node);\n            }\n            return n;\n        },\n\n        set_node_color: function (nodeid, bgcolor, fgcolor) {\n            if (this.get_editable()) {\n                var node = this.mind.get_node(nodeid);\n                if (!!node) {\n                    if (!!bgcolor) {\n                        node.data['background-color'] = bgcolor;\n                    }\n                    if (!!fgcolor) {\n                        node.data['foreground-color'] = fgcolor;\n                    }\n                    this.view.reset_node_custom_style(node);\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        set_node_font_style: function (nodeid, size, weight, style) {\n            if (this.get_editable()) {\n                var node = this.mind.get_node(nodeid);\n                if (!!node) {\n                    if (!!size) {\n                        node.data['font-size'] = size;\n                    }\n                    if (!!weight) {\n                        node.data['font-weight'] = weight;\n                    }\n                    if (!!style) {\n                        node.data['font-style'] = style;\n                    }\n                    this.view.reset_node_custom_style(node);\n                    this.view.update_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        set_node_background_image: function (nodeid, image, width, height, rotation) {\n            if (this.get_editable()) {\n                var node = this.mind.get_node(nodeid);\n                if (!!node) {\n                    if (!!image) {\n                        node.data['background-image'] = image;\n                    }\n                    if (!!width) {\n                        node.data['width'] = width;\n                    }\n                    if (!!height) {\n                        node.data['height'] = height;\n                    }\n                    if (!!rotation) {\n                        node.data['background-rotation'] = rotation;\n                    }\n                    this.view.reset_node_custom_style(node);\n                    this.view.update_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        set_node_background_rotation: function (nodeid, rotation) {\n            if (this.get_editable()) {\n                var node = this.mind.get_node(nodeid);\n                if (!!node) {\n                    if (!node.data['background-image']) {\n                        logger.error('fail, only can change rotation angle of node with background image');\n                        return null;\n                    }\n                    node.data['background-rotation'] = rotation;\n                    this.view.reset_node_custom_style(node);\n                    this.view.update_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        resize: function () {\n            this.view.resize();\n        },\n\n        // callback(type ,data)\n        add_event_listener: function (callback) {\n            if (typeof callback === 'function') {\n                this.event_handles.push(callback);\n            }\n        },\n\n        invoke_event_handle: function (type, data) {\n            var j = this;\n            $w.setTimeout(function () {\n                j._invoke_event_handle(type, data);\n            }, 0);\n        },\n\n        _invoke_event_handle: function (type, data) {\n            var l = this.event_handles.length;\n            for (var i = 0; i < l; i++) {\n                this.event_handles[i](type, data);\n            }\n        },\n\n\n    };\n\n    // ============= data provider =============================================\n\n    jm.data_provider = function (jm) {\n        this.jm = jm;\n    };\n\n    jm.data_provider.prototype = {\n        init: function () {\n            logger.debug('data.init');\n        },\n\n        reset: function () {\n            logger.debug('data.reset');\n        },\n\n        load: function (mind_data) {\n            var df = null;\n            var mind = null;\n            if (typeof mind_data === 'object') {\n                if (!!mind_data.format) {\n                    df = mind_data.format;\n                } else {\n                    df = 'node_tree';\n                }\n            } else {\n                df = 'freemind';\n            }\n\n            if (df == 'node_array') {\n                mind = jm.format.node_array.get_mind(mind_data);\n            } else if (df == 'node_tree') {\n                mind = jm.format.node_tree.get_mind(mind_data);\n            } else if (df == 'freemind') {\n                mind = jm.format.freemind.get_mind(mind_data);\n            } else {\n                logger.warn('unsupported format');\n            }\n            return mind;\n        },\n\n        get_data: function (data_format) {\n            var data = null;\n            if (data_format == 'node_array') {\n                data = jm.format.node_array.get_data(this.jm.mind);\n            } else if (data_format == 'node_tree') {\n                data = jm.format.node_tree.get_data(this.jm.mind);\n            } else if (data_format == 'freemind') {\n                data = jm.format.freemind.get_data(this.jm.mind);\n            } else {\n                logger.error('unsupported ' + data_format + ' format');\n            }\n            return data;\n        },\n    };\n\n    // ============= layout provider ===========================================\n\n    jm.layout_provider = function (jm, options) {\n        this.opts = options;\n        this.jm = jm;\n        this.isside = (this.opts.mode == 'side');\n        this.bounds = null;\n\n        this.cache_valid = false;\n    };\n\n    jm.layout_provider.prototype = {\n        init: function () {\n            logger.debug('layout.init');\n        },\n        reset: function () {\n            logger.debug('layout.reset');\n            this.bounds = { n: 0, s: 0, w: 0, e: 0 };\n        },\n        layout: function () {\n            logger.debug('layout.layout');\n            this.layout_direction();\n            this.layout_offset();\n        },\n\n        layout_direction: function () {\n            this._layout_direction_root();\n        },\n\n        _layout_direction_root: function () {\n            var node = this.jm.mind.root;\n            // logger.debug(node);\n            var layout_data = null;\n            if ('layout' in node._data) {\n                layout_data = node._data.layout;\n            } else {\n                layout_data = {};\n                node._data.layout = layout_data;\n            }\n            var children = node.children;\n            var children_count = children.length;\n            layout_data.direction = jm.direction.center;\n            layout_data.side_index = 0;\n            if (this.isside) {\n                var i = children_count;\n                while (i--) {\n                    this._layout_direction_side(children[i], jm.direction.right, i);\n                }\n            } else {\n                var i = children_count;\n                var subnode = null;\n                while (i--) {\n                    subnode = children[i];\n                    if (subnode.direction == jm.direction.left) {\n                        this._layout_direction_side(subnode, jm.direction.left, i);\n                    } else {\n                        this._layout_direction_side(subnode, jm.direction.right, i);\n                    }\n                }\n                /*\n                var boundary = Math.ceil(children_count/2);\n                var i = children_count;\n                while(i--){\n                    if(i>=boundary){\n                        this._layout_direction_side(children[i],jm.direction.left, children_count-i-1);\n                    }else{\n                        this._layout_direction_side(children[i],jm.direction.right, i);\n                    }\n                }*/\n\n            }\n        },\n\n        _layout_direction_side: function (node, direction, side_index) {\n            var layout_data = null;\n            if ('layout' in node._data) {\n                layout_data = node._data.layout;\n            } else {\n                layout_data = {};\n                node._data.layout = layout_data;\n            }\n            var children = node.children;\n            var children_count = children.length;\n\n            layout_data.direction = direction;\n            layout_data.side_index = side_index;\n            var i = children_count;\n            while (i--) {\n                this._layout_direction_side(children[i], direction, i);\n            }\n        },\n\n        layout_offset: function () {\n            var node = this.jm.mind.root;\n            var layout_data = node._data.layout;\n            layout_data.offset_x = 0;\n            layout_data.offset_y = 0;\n            layout_data.outer_height = 0;\n            var children = node.children;\n            var i = children.length;\n            var left_nodes = [];\n            var right_nodes = [];\n            var subnode = null;\n            while (i--) {\n                subnode = children[i];\n                if (subnode._data.layout.direction == jm.direction.right) {\n                    right_nodes.unshift(subnode);\n                } else {\n                    left_nodes.unshift(subnode);\n                }\n            }\n            layout_data.left_nodes = left_nodes;\n            layout_data.right_nodes = right_nodes;\n            layout_data.outer_height_left = this._layout_offset_subnodes(left_nodes);\n            layout_data.outer_height_right = this._layout_offset_subnodes(right_nodes);\n            this.bounds.e = node._data.view.width / 2;\n            this.bounds.w = 0 - this.bounds.e;\n            //logger.debug(this.bounds.w);\n            this.bounds.n = 0;\n            this.bounds.s = Math.max(layout_data.outer_height_left, layout_data.outer_height_right);\n        },\n\n        // layout both the x and y axis\n        _layout_offset_subnodes: function (nodes) {\n            var total_height = 0;\n            var nodes_count = nodes.length;\n            var i = nodes_count;\n            var node = null;\n            var node_outer_height = 0;\n            var layout_data = null;\n            var base_y = 0;\n            var pd = null; // parent._data\n            while (i--) {\n                node = nodes[i];\n                layout_data = node._data.layout;\n                if (pd == null) {\n                    pd = node.parent._data;\n                }\n\n                node_outer_height = this._layout_offset_subnodes(node.children);\n                if (!node.expanded) {\n                    node_outer_height = 0;\n                    this.set_visible(node.children, false);\n                }\n                node_outer_height = Math.max(node._data.view.height, node_outer_height);\n\n                layout_data.outer_height = node_outer_height;\n                layout_data.offset_y = base_y - node_outer_height / 2;\n                layout_data.offset_x = this.opts.hspace * layout_data.direction + pd.view.width * (pd.layout.direction + layout_data.direction) / 2;\n                if (!node.parent.isroot) {\n                    layout_data.offset_x += this.opts.pspace * layout_data.direction;\n                }\n\n                base_y = base_y - node_outer_height - this.opts.vspace;\n                total_height += node_outer_height;\n            }\n            if (nodes_count > 1) {\n                total_height += this.opts.vspace * (nodes_count - 1);\n            }\n            i = nodes_count;\n            var middle_height = total_height / 2;\n            while (i--) {\n                node = nodes[i];\n                node._data.layout.offset_y += middle_height;\n            }\n            return total_height;\n        },\n\n        // layout the y axis only, for collapse/expand a node\n        _layout_offset_subnodes_height: function (nodes) {\n            var total_height = 0;\n            var nodes_count = nodes.length;\n            var i = nodes_count;\n            var node = null;\n            var node_outer_height = 0;\n            var layout_data = null;\n            var base_y = 0;\n            var pd = null; // parent._data\n            while (i--) {\n                node = nodes[i];\n                layout_data = node._data.layout;\n                if (pd == null) {\n                    pd = node.parent._data;\n                }\n\n                node_outer_height = this._layout_offset_subnodes_height(node.children);\n                if (!node.expanded) {\n                    node_outer_height = 0;\n                }\n                node_outer_height = Math.max(node._data.view.height, node_outer_height);\n\n                layout_data.outer_height = node_outer_height;\n                layout_data.offset_y = base_y - node_outer_height / 2;\n                base_y = base_y - node_outer_height - this.opts.vspace;\n                total_height += node_outer_height;\n            }\n            if (nodes_count > 1) {\n                total_height += this.opts.vspace * (nodes_count - 1);\n            }\n            i = nodes_count;\n            var middle_height = total_height / 2;\n            while (i--) {\n                node = nodes[i];\n                node._data.layout.offset_y += middle_height;\n                //logger.debug(node.topic);\n                //logger.debug(node._data.layout.offset_y);\n            }\n            return total_height;\n        },\n\n        get_node_offset: function (node) {\n            var layout_data = node._data.layout;\n            var offset_cache = null;\n            if (('_offset_' in layout_data) && this.cache_valid) {\n                offset_cache = layout_data._offset_;\n            } else {\n                offset_cache = { x: -1, y: -1 };\n                layout_data._offset_ = offset_cache;\n            }\n            if (offset_cache.x == -1 || offset_cache.y == -1) {\n                var x = layout_data.offset_x;\n                var y = layout_data.offset_y;\n                if (!node.isroot) {\n                    var offset_p = this.get_node_offset(node.parent);\n                    x += offset_p.x;\n                    y += offset_p.y;\n                }\n                offset_cache.x = x;\n                offset_cache.y = y;\n            }\n            return offset_cache;\n        },\n\n        get_node_point: function (node) {\n            var view_data = node._data.view;\n            var offset_p = this.get_node_offset(node);\n            //logger.debug(offset_p);\n            var p = {};\n            p.x = offset_p.x + view_data.width * (node._data.layout.direction - 1) / 2;\n            p.y = offset_p.y - view_data.height / 2;\n            //logger.debug(p);\n            return p;\n        },\n\n        get_node_point_in: function (node) {\n            var p = this.get_node_offset(node);\n            return p;\n        },\n\n        get_node_point_out: function (node) {\n            var layout_data = node._data.layout;\n            var pout_cache = null;\n            if (('_pout_' in layout_data) && this.cache_valid) {\n                pout_cache = layout_data._pout_;\n            } else {\n                pout_cache = { x: -1, y: -1 };\n                layout_data._pout_ = pout_cache;\n            }\n            if (pout_cache.x == -1 || pout_cache.y == -1) {\n                if (node.isroot) {\n                    pout_cache.x = 0;\n                    pout_cache.y = 0;\n                } else {\n                    var view_data = node._data.view;\n                    var offset_p = this.get_node_offset(node);\n                    pout_cache.x = offset_p.x + (view_data.width + this.opts.pspace) * node._data.layout.direction;\n                    pout_cache.y = offset_p.y;\n                    //logger.debug('pout');\n                    //logger.debug(pout_cache);\n                }\n            }\n            return pout_cache;\n        },\n\n        get_expander_point: function (node) {\n            var p = this.get_node_point_out(node);\n            var ex_p = {};\n            if (node._data.layout.direction == jm.direction.right) {\n                ex_p.x = p.x - this.opts.pspace;\n            } else {\n                ex_p.x = p.x;\n            }\n            ex_p.y = p.y - Math.ceil(this.opts.pspace / 2);\n            return ex_p;\n        },\n\n        get_min_size: function () {\n            var nodes = this.jm.mind.nodes;\n            var node = null;\n            var pout = null;\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                pout = this.get_node_point_out(node);\n                if (pout.x > this.bounds.e) { this.bounds.e = pout.x; }\n                if (pout.x < this.bounds.w) { this.bounds.w = pout.x; }\n            }\n            return {\n                w: this.bounds.e - this.bounds.w,\n                h: this.bounds.s - this.bounds.n\n            }\n        },\n\n        toggle_node: function (node) {\n            if (node.isroot) {\n                return;\n            }\n            if (node.expanded) {\n                this.collapse_node(node);\n            } else {\n                this.expand_node(node);\n            }\n        },\n\n        expand_node: function (node) {\n            node.expanded = true;\n            this.part_layout(node);\n            this.set_visible(node.children, true);\n        },\n\n        collapse_node: function (node) {\n            node.expanded = false;\n            this.part_layout(node);\n            this.set_visible(node.children, false);\n        },\n\n        expand_all: function () {\n            var nodes = this.jm.mind.nodes;\n            var c = 0;\n            var node;\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                if (!node.expanded) {\n                    node.expanded = true;\n                    c++;\n                }\n            }\n            if (c > 0) {\n                var root = this.jm.mind.root;\n                this.part_layout(root);\n                this.set_visible(root.children, true);\n            }\n        },\n\n        collapse_all: function () {\n            var nodes = this.jm.mind.nodes;\n            var c = 0;\n            var node;\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                if (node.expanded && !node.isroot) {\n                    node.expanded = false\n                    c++;\n                }\n            }\n            if (c > 0) {\n                var root = this.jm.mind.root;\n                this.part_layout(root);\n                this.set_visible(root.children, true);\n            }\n        },\n\n        expand_to_depth: function (target_depth, curr_nodes, curr_depth) {\n            if (target_depth < 1) { return; }\n            var nodes = curr_nodes || this.jm.mind.root.children;\n            var depth = curr_depth || 1;\n            var i = nodes.length;\n            var node = null;\n            while (i--) {\n                node = nodes[i];\n                if (depth < target_depth) {\n                    if (!node.expanded) {\n                        this.expand_node(node);\n                    }\n                    this.expand_to_depth(target_depth, node.children, depth + 1);\n                }\n                if (depth == target_depth) {\n                    if (node.expanded) {\n                        this.collapse_node(node);\n                    }\n                }\n            }\n        },\n\n        part_layout: function (node) {\n            var root = this.jm.mind.root;\n            if (!!root) {\n                var root_layout_data = root._data.layout;\n                if (node.isroot) {\n                    root_layout_data.outer_height_right = this._layout_offset_subnodes_height(root_layout_data.right_nodes);\n                    root_layout_data.outer_height_left = this._layout_offset_subnodes_height(root_layout_data.left_nodes);\n                } else {\n                    if (node._data.layout.direction == jm.direction.right) {\n                        root_layout_data.outer_height_right = this._layout_offset_subnodes_height(root_layout_data.right_nodes);\n                    } else {\n                        root_layout_data.outer_height_left = this._layout_offset_subnodes_height(root_layout_data.left_nodes);\n                    }\n                }\n                this.bounds.s = Math.max(root_layout_data.outer_height_left, root_layout_data.outer_height_right);\n                this.cache_valid = false;\n            } else {\n                logger.warn('can not found root node');\n            }\n        },\n\n        set_visible: function (nodes, visible) {\n            var i = nodes.length;\n            var node = null;\n            var layout_data = null;\n            while (i--) {\n                node = nodes[i];\n                layout_data = node._data.layout;\n                if (node.expanded) {\n                    this.set_visible(node.children, visible);\n                } else {\n                    this.set_visible(node.children, false);\n                }\n                if (!node.isroot) {\n                    node._data.layout.visible = visible;\n                }\n            }\n        },\n\n        is_expand: function (node) {\n            return node.expanded;\n        },\n\n        is_visible: function (node) {\n            var layout_data = node._data.layout;\n            if (('visible' in layout_data) && !layout_data.visible) {\n                return false;\n            } else {\n                return true;\n            }\n        }\n    };\n\n    jm.graph_canvas = function (view) {\n        this.opts = view.opts;\n        this.e_canvas = $c('canvas');\n        this.canvas_ctx = this.e_canvas.getContext('2d');\n        this.size = { w: 0, h: 0 };\n    };\n\n    jm.graph_canvas.prototype = {\n        element: function () {\n            return this.e_canvas;\n        },\n\n        set_size: function (w, h) {\n            this.size.w = w;\n            this.size.h = h;\n            this.e_canvas.width = w;\n            this.e_canvas.height = h;\n        },\n\n        clear: function () {\n            this.canvas_ctx.clearRect(0, 0, this.size.w, this.size.h);\n        },\n\n        draw_line: function (pout, pin, offset) {\n            var ctx = this.canvas_ctx;\n            ctx.strokeStyle = this.opts.line_color;\n            ctx.lineWidth = this.opts.line_width;\n            ctx.lineCap = 'round';\n\n            this._bezier_to(ctx,\n                pin.x + offset.x,\n                pin.y + offset.y,\n                pout.x + offset.x,\n                pout.y + offset.y);\n        },\n\n        copy_to: function (dest_canvas_ctx, callback) {\n            dest_canvas_ctx.drawImage(this.e_canvas, 0, 0);\n            !!callback && callback();\n        },\n\n        _bezier_to: function (ctx, x1, y1, x2, y2) {\n            ctx.beginPath();\n            ctx.moveTo(x1, y1);\n            ctx.bezierCurveTo(x1 + (x2 - x1) * 2 / 3, y1, x1, y2, x2, y2);\n            ctx.stroke();\n        },\n\n        _line_to: function (ctx, x1, y1, x2, y2) {\n            ctx.beginPath();\n            ctx.moveTo(x1, y1);\n            ctx.lineTo(x2, y2);\n            ctx.stroke();\n        }\n    };\n\n    jm.graph_svg = function (view) {\n        this.view = view;\n        this.opts = view.opts;\n        this.e_svg = jm.graph_svg.c('svg');\n        this.size = { w: 0, h: 0 };\n        this.lines = [];\n    };\n\n    jm.graph_svg.c = function (tag) {\n        return $d.createElementNS('http://www.w3.org/2000/svg', tag);\n    };\n\n    jm.graph_svg.prototype = {\n        element: function () {\n            return this.e_svg;\n        },\n\n        set_size: function (w, h) {\n            this.size.w = w;\n            this.size.h = h;\n            this.e_svg.setAttribute('width', w);\n            this.e_svg.setAttribute('height', h);\n        },\n\n        clear: function () {\n            var len = this.lines.length;\n            while (len--) {\n                this.e_svg.removeChild(this.lines[len]);\n            }\n            this.lines.length = 0;\n        },\n\n        draw_line: function (pout, pin, offset) {\n            var line = jm.graph_svg.c('path');\n            line.setAttribute('stroke', this.opts.line_color);\n            line.setAttribute('stroke-width', this.opts.line_width);\n            line.setAttribute('fill', 'transparent');\n            this.lines.push(line);\n            this.e_svg.appendChild(line);\n            this._bezier_to(line, pin.x + offset.x, pin.y + offset.y, pout.x + offset.x, pout.y + offset.y);\n        },\n\n        copy_to: function (dest_canvas_ctx, callback) {\n            var img = new Image();\n            img.onload = function () {\n                dest_canvas_ctx.drawImage(img, 0, 0);\n                !!callback && callback();\n            }\n            img.src = 'data:image/svg+xml;base64,' + btoa(new XMLSerializer().serializeToString(this.e_svg));\n        },\n\n        _bezier_to: function (path, x1, y1, x2, y2) {\n            path.setAttribute('d', 'M' + x1 + ' ' + y1 + ' C ' + (x1 + (x2 - x1) * 2 / 3) + ' ' + y1 + ', ' + x1 + ' ' + y2 + ', ' + x2 + ' ' + y2);\n        },\n\n        _line_to: function (path, x1, y1, x2, y2) {\n            path.setAttribute('d', 'M ' + x1 + ' ' + y1 + ' L ' + x2 + ' ' + y2);\n        }\n    };\n\n    // view provider\n    jm.view_provider = function (jm, options) {\n        this.opts = options;\n        this.jm = jm;\n        this.layout = jm.layout;\n\n        this.container = null;\n        this.e_panel = null;\n        this.e_nodes = null;\n\n        this.size = { w: 0, h: 0 };\n\n        this.selected_node = null;\n        this.editing_node = null;\n\n        this.graph = null;\n    };\n\n    jm.view_provider.prototype = {\n        init: function () {\n            logger.debug('view.init');\n\n            this.container = $i(this.opts.container) ? this.opts.container : $g(this.opts.container);\n            if (!this.container) {\n                logger.error('the options.view.container was not be found in dom');\n                return;\n            }\n            this.e_panel = $c('div');\n            this.e_nodes = $c('jmnodes');\n            this.e_editor = $c('input');\n\n            this.graph = this.opts.engine.toLowerCase() === 'svg' ? new jm.graph_svg(this) : new jm.graph_canvas(this);\n\n            this.e_panel.className = 'jsmind-inner';\n            this.e_panel.appendChild(this.graph.element());\n            this.e_panel.appendChild(this.e_nodes);\n\n            this.e_editor.className = 'jsmind-editor';\n            this.e_editor.type = 'text';\n\n            this.actualZoom = 1;\n            this.zoomStep = 0.1;\n            this.minZoom = 0.5;\n            this.maxZoom = 2;\n\n            var v = this;\n            jm.util.dom.add_event(this.e_editor, 'keydown', function (e) {\n                var evt = e || event;\n                if (evt.keyCode == 13) { v.edit_node_end(); evt.stopPropagation(); }\n            });\n            jm.util.dom.add_event(this.e_editor, 'blur', function (e) {\n                v.edit_node_end();\n            });\n\n            this.container.appendChild(this.e_panel);\n        },\n\n        add_event: function (obj, event_name, event_handle) {\n            jm.util.dom.add_event(this.e_nodes, event_name, function (e) {\n                var evt = e || event;\n                event_handle.call(obj, evt);\n            });\n        },\n\n        get_binded_nodeid: function (element) {\n            if (element == null) {\n                return null;\n            }\n            var tagName = element.tagName.toLowerCase();\n            if (tagName == 'jmnodes' || tagName == 'body' || tagName == 'html') {\n                return null;\n            }\n            if (tagName == 'jmnode' || tagName == 'jmexpander') {\n                return element.getAttribute('nodeid');\n            } else {\n                return this.get_binded_nodeid(element.parentElement);\n            }\n        },\n\n        is_expander: function (element) {\n            return (element.tagName.toLowerCase() == 'jmexpander');\n        },\n\n        reset: function () {\n            logger.debug('view.reset');\n            this.selected_node = null;\n            this.clear_lines();\n            this.clear_nodes();\n            this.reset_theme();\n        },\n\n        reset_theme: function () {\n            var theme_name = this.jm.options.theme;\n            if (!!theme_name) {\n                this.e_nodes.className = 'theme-' + theme_name;\n            } else {\n                this.e_nodes.className = '';\n            }\n        },\n\n        reset_custom_style: function () {\n            var nodes = this.jm.mind.nodes;\n            for (var nodeid in nodes) {\n                this.reset_node_custom_style(nodes[nodeid]);\n            }\n        },\n\n        load: function () {\n            logger.debug('view.load');\n            this.init_nodes();\n        },\n\n        expand_size: function () {\n            var min_size = this.layout.get_min_size();\n            var min_width = min_size.w + this.opts.hmargin * 2;\n            var min_height = min_size.h + this.opts.vmargin * 2;\n            var client_w = this.e_panel.clientWidth;\n            var client_h = this.e_panel.clientHeight;\n            if (client_w < min_width) { client_w = min_width; }\n            if (client_h < min_height) { client_h = min_height; }\n            this.size.w = client_w;\n            this.size.h = client_h;\n        },\n\n        init_nodes_size: function (node) {\n            var view_data = node._data.view;\n            view_data.width = view_data.element.clientWidth;\n            view_data.height = view_data.element.clientHeight;\n        },\n\n        init_nodes: function () {\n            var nodes = this.jm.mind.nodes;\n            var doc_frag = $d.createDocumentFragment();\n            for (var nodeid in nodes) {\n                this.create_node_element(nodes[nodeid], doc_frag);\n            }\n            this.e_nodes.appendChild(doc_frag);\n            for (var nodeid in nodes) {\n                this.init_nodes_size(nodes[nodeid]);\n            }\n        },\n\n        add_node: function (node) {\n            this.create_node_element(node, this.e_nodes);\n            this.init_nodes_size(node);\n            \n        },\n        add_yes_no: function(node_after){\n            var yes_id = jm.util.uuid.newid();\n            var no_id = jm.util.uuid.newid();\n\n        },\n        isWhenIncluded: function(node) {\n\n            if (node['isroot']==true){\n                return false\n            }\n\n            if (node['topic']=='When'){\n                \n                return true \n\n            }\n            \n            return this.isWhenIncluded(node['parent']);\n                        \n\n        },\n\n\n        create_node_element: function (node, parent_node) {\n            var view_data = null;\n            if ('view' in node._data) {\n                view_data = node._data.view;\n            } else {\n                view_data = {};\n                node._data.view = view_data;\n            }\n\n            var d = $c('jmnode');\n            if (node.isroot) {\n                d.className = 'root';\n            } else {\n                var d_e = $c('jmexpander');\n                $t(d_e, '-');\n                d_e.setAttribute('nodeid', node.id);\n                d_e.style.visibility = 'hidden';\n                parent_node.appendChild(d_e);\n                view_data.expander = d_e;\n            }\n            if (!!node.topic) {\n                if (this.opts.support_html) {\n                    $h(d, node.topic);\n                } else {\n                    $t(d, node.topic);\n                }\n            }\n            d.setAttribute('nodeid', node.id);\n            d.style.visibility = 'hidden';\n            this._reset_node_custom_style(d, node.data);\n\n            parent_node.appendChild(d);\n            view_data.element = d;\n        },\n\n        remove_node: function (node) {\n            if (this.selected_node != null && this.selected_node.id == node.id) {\n                this.selected_node = null;\n            }\n            if (this.editing_node != null && this.editing_node.id == node.id) {\n                node._data.view.element.removeChild(this.e_editor);\n                this.editing_node = null;\n            }\n            var children = node.children;\n            var i = children.length;\n            while (i--) {\n                this.remove_node(children[i]);\n            }\n            if (node._data.view) {\n                var element = node._data.view.element;\n                var expander = node._data.view.expander;\n                this.e_nodes.removeChild(element);\n                this.e_nodes.removeChild(expander);\n                node._data.view.element = null;\n                node._data.view.expander = null;\n            }\n        },\n\n        update_node: function (node) {\n            var view_data = node._data.view;\n            var element = view_data.element;\n            if (!!node.topic) {\n                if (this.opts.support_html) {\n                    $h(element, node.topic);\n                } else {\n                    $t(element, node.topic);\n                }\n            }\n            view_data.width = element.clientWidth;\n            view_data.height = element.clientHeight;\n        },\n\n        select_node: function (node) {\n            if (!!this.selected_node) {\n                this.selected_node._data.view.element.className =\n                    this.selected_node._data.view.element.className.replace(/\\s*selected\\b/i, '');\n                this.reset_node_custom_style(this.selected_node);\n            }\n            if (!!node) {\n                this.selected_node = node;\n                node._data.view.element.className += ' selected';\n                this.clear_node_custom_style(node);\n            }\n        },\n\n        select_clear: function () {\n            this.select_node(null);\n        },\n\n        get_editing_node: function () {\n            return this.editing_node;\n        },\n\n        is_editing: function () {\n            return (!!this.editing_node);\n        },\n\n        edit_node_begin: function (node) {\n            if (!node.topic) {\n                logger.warn(\"don't edit image nodes\");\n                return;\n            }\n            if (this.editing_node != null) {\n                this.edit_node_end();\n            }\n            this.editing_node = node;\n            var view_data = node._data.view;\n            var element = view_data.element;\n            var topic = node.topic;\n            var ncs = getComputedStyle(element);\n            this.e_editor.value = topic;\n            this.e_editor.style.width = (element.clientWidth - parseInt(ncs.getPropertyValue('padding-left')) - parseInt(ncs.getPropertyValue('padding-right'))) + 'px';\n            element.innerHTML = '';\n            element.appendChild(this.e_editor);\n            element.style.zIndex = 5;\n            this.e_editor.focus();\n            this.e_editor.select();\n        },\n\n        edit_node_end: function () {\n            if (this.editing_node != null) {\n                var node = this.editing_node;\n                this.editing_node = null;\n                var view_data = node._data.view;\n                var element = view_data.element;\n                var topic = this.e_editor.value;\n                element.style.zIndex = 'auto';\n                element.removeChild(this.e_editor);\n                if (jm.util.text.is_empty(topic) || node.topic === topic) {\n                    if (this.opts.support_html) {\n                        $h(element, node.topic);\n                    } else {\n                        $t(element, node.topic);\n                    }\n                } else {\n                    this.jm.update_node(node.id, topic);\n                }\n            }\n        },\n\n        get_view_offset: function () {\n            var bounds = this.layout.bounds;\n            var _x = (this.size.w - bounds.e - bounds.w) / 2;\n            var _y = this.size.h / 2;\n            return { x: _x, y: _y };\n        },\n\n        resize: function () {\n            this.graph.set_size(1, 1);\n            this.e_nodes.style.width = '1px';\n            this.e_nodes.style.height = '1px';\n\n            this.expand_size();\n            this._show();\n        },\n\n        _show: function () {\n            this.graph.set_size(this.size.w, this.size.h);\n            this.e_nodes.style.width = this.size.w + 'px';\n            this.e_nodes.style.height = this.size.h + 'px';\n            this.show_nodes();\n            this.show_lines();\n            //this.layout.cache_valid = true;\n            this.jm.invoke_event_handle(jm.event_type.resize, { data: [] });\n        },\n\n        zoomIn: function () {\n            return this.setZoom(this.actualZoom + this.zoomStep);\n        },\n\n        zoomOut: function () {\n            return this.setZoom(this.actualZoom - this.zoomStep);\n        },\n\n        setZoom: function (zoom) {\n            if ((zoom < this.minZoom) || (zoom > this.maxZoom)) {\n                return false;\n            }\n            this.actualZoom = zoom;\n            for (var i = 0; i < this.e_panel.children.length; i++) {\n                this.e_panel.children[i].style.transform = 'scale(' + zoom + ')';\n            };\n            this.show(true);\n            return true;\n\n        },\n\n        _center_root: function () {\n            // center root node\n            var outer_w = this.e_panel.clientWidth;\n            var outer_h = this.e_panel.clientHeight;\n            if (this.size.w > outer_w) {\n                var _offset = this.get_view_offset();\n                this.e_panel.scrollLeft = _offset.x - outer_w / 2;\n            }\n            if (this.size.h > outer_h) {\n                this.e_panel.scrollTop = (this.size.h - outer_h) / 2;\n            }\n        },\n\n        show: function (keep_center) {\n            logger.debug('view.show');\n            this.expand_size();\n            this._show();\n            if (!!keep_center) {\n                this._center_root();\n            }\n        },\n\n        relayout: function () {\n            this.expand_size();\n            this._show();\n        },\n\n        save_location: function (node) {\n            var vd = node._data.view;\n            vd._saved_location = {\n                x: parseInt(vd.element.style.left) - this.e_panel.scrollLeft,\n                y: parseInt(vd.element.style.top) - this.e_panel.scrollTop,\n            };\n        },\n\n        restore_location: function (node) {\n            var vd = node._data.view;\n            this.e_panel.scrollLeft = parseInt(vd.element.style.left) - vd._saved_location.x;\n            this.e_panel.scrollTop = parseInt(vd.element.style.top) - vd._saved_location.y;\n        },\n\n        clear_nodes: function () {\n            var mind = this.jm.mind;\n            if (mind == null) {\n                return;\n            }\n            var nodes = mind.nodes;\n            var node = null;\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                node._data.view.element = null;\n                node._data.view.expander = null;\n            }\n            this.e_nodes.innerHTML = '';\n        },\n\n        show_nodes: function () {\n            var nodes = this.jm.mind.nodes;\n            var node = null;\n            var node_element = null;\n            var expander = null;\n            var p = null;\n            var p_expander = null;\n            var expander_text = '-';\n            var view_data = null;\n            var _offset = this.get_view_offset();\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                view_data = node._data.view;\n                node_element = view_data.element;\n                expander = view_data.expander;\n                if (!this.layout.is_visible(node)) {\n                    node_element.style.display = 'none';\n                    expander.style.display = 'none';\n                    continue;\n                }\n                this.reset_node_custom_style(node);\n                p = this.layout.get_node_point(node);\n                view_data.abs_x = _offset.x + p.x;\n                view_data.abs_y = _offset.y + p.y;\n                node_element.style.left = (_offset.x + p.x) + 'px';\n                node_element.style.top = (_offset.y + p.y) + 'px';\n                node_element.style.display = '';\n                node_element.style.visibility = 'visible';\n                if (!node.isroot && node.children.length > 0) {\n                    expander_text = node.expanded ? '-' : '+';\n                    p_expander = this.layout.get_expander_point(node);\n                    expander.style.left = (_offset.x + p_expander.x) + 'px';\n                    expander.style.top = (_offset.y + p_expander.y) + 'px';\n                    expander.style.display = '';\n                    expander.style.visibility = 'visible';\n                    $t(expander, expander_text);\n                }\n                // hide expander while all children have been removed\n                if (!node.isroot && node.children.length == 0) {\n                    expander.style.display = 'none';\n                    expander.style.visibility = 'hidden';\n                }\n            }\n        },\n\n        reset_node_custom_style: function (node) {\n            this._reset_node_custom_style(node._data.view.element, node.data);\n        },\n\n        _reset_node_custom_style: function (node_element, node_data) {\n            if ('background-color' in node_data) {\n                node_element.style.backgroundColor = node_data['background-color'];\n            }\n            if ('foreground-color' in node_data) {\n                node_element.style.color = node_data['foreground-color'];\n            }\n            if ('width' in node_data) {\n                node_element.style.width = node_data['width'] + 'px';\n            }\n            if ('height' in node_data) {\n                node_element.style.height = node_data['height'] + 'px';\n            }\n            if ('font-size' in node_data) {\n                node_element.style.fontSize = node_data['font-size'] + 'px';\n            }\n            if ('font-weight' in node_data) {\n                node_element.style.fontWeight = node_data['font-weight'];\n            }\n            if ('font-style' in node_data) {\n                node_element.style.fontStyle = node_data['font-style'];\n            }\n            if ('background-image' in node_data) {\n                var backgroundImage = node_data['background-image'];\n                if (backgroundImage.startsWith('data') && node_data['width'] && node_data['height']) {\n                    var img = new Image();\n\n                    img.onload = function () {\n                        var c = $c('canvas');\n                        c.width = node_element.clientWidth;\n                        c.height = node_element.clientHeight;\n                        var img = this;\n                        if (c.getContext) {\n                            var ctx = c.getContext('2d');\n                            ctx.drawImage(img, 2, 2, node_element.clientWidth, node_element.clientHeight);\n                            var scaledImageData = c.toDataURL();\n                            node_element.style.backgroundImage = 'url(' + scaledImageData + ')';\n                        }\n                    };\n                    img.src = backgroundImage;\n\n                } else {\n                    node_element.style.backgroundImage = 'url(' + backgroundImage + ')';\n                }\n                node_element.style.backgroundSize = '99%';\n\n                if ('background-rotation' in node_data) {\n                    node_element.style.transform = 'rotate(' + node_data['background-rotation'] + 'deg)';\n                }\n            }\n        },\n\n        clear_node_custom_style: function (node) {\n            var node_element = node._data.view.element;\n            node_element.style.backgroundColor = \"\";\n            node_element.style.color = \"\";\n        },\n\n        clear_lines: function () {\n            this.graph.clear();\n        },\n\n        show_lines: function () {\n            this.clear_lines();\n            var nodes = this.jm.mind.nodes;\n            var node = null;\n            var pin = null;\n            var pout = null;\n            var _offset = this.get_view_offset();\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                if (!!node.isroot) { continue; }\n                if (('visible' in node._data.layout) && !node._data.layout.visible) { continue; }\n                pin = this.layout.get_node_point_in(node);\n                pout = this.layout.get_node_point_out(node.parent);\n                this.graph.draw_line(pout, pin, _offset);\n            }\n        },\n    };\n\n    // shortcut provider\n    jm.shortcut_provider = function (jm, options) {\n        this.jm = jm;\n        this.opts = options;\n        this.mapping = options.mapping;\n        this.handles = options.handles;\n        this._mapping = {};\n    };\n\n    jm.shortcut_provider.prototype = {\n        init: function () {\n            jm.util.dom.add_event($d, 'keydown', this.handler.bind(this));\n\n            this.handles['addchild'] = this.handle_addchild;\n            this.handles['addbrother'] = this.handle_addbrother;\n            this.handles['editnode'] = this.handle_editnode;\n            this.handles['delnode'] = this.handle_delnode;\n            this.handles['toggle'] = this.handle_toggle;\n            this.handles['up'] = this.handle_up;\n            this.handles['down'] = this.handle_down;\n            this.handles['left'] = this.handle_left;\n            this.handles['right'] = this.handle_right;\n\n            for (var handle in this.mapping) {\n                if (!!this.mapping[handle] && (handle in this.handles)) {\n                    this._mapping[this.mapping[handle]] = this.handles[handle];\n                }\n            }\n        },\n\n        enable_shortcut: function () {\n            this.opts.enable = true;\n        },\n\n        disable_shortcut: function () {\n            this.opts.enable = false;\n        },\n\n        handler: function (e) {\n            if (this.jm.view.is_editing()) { return; }\n            var evt = e || event;\n            if (!this.opts.enable) { return true; }\n            var kc = evt.keyCode + (evt.metaKey << 13) + (evt.ctrlKey << 12) + (evt.altKey << 11) + (evt.shiftKey << 10);\n            if (kc in this._mapping) {\n                this._mapping[kc].call(this, this.jm, e);\n            }\n        },\n\n        handle_addchild: function (_jm, e) {\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node) {\n                var nodeid = jm.util.uuid.newid();\n                var node = _jm.add_node(selected_node, nodeid, 'New Node');\n                if (!!node) {\n                    _jm.select_node(nodeid);\n                    _jm.begin_edit(nodeid);\n                }\n            }\n        },\n        handle_addbrother: function (_jm, e) {\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node && !selected_node.isroot) {\n                var nodeid = jm.util.uuid.newid();\n                var node = _jm.insert_node_after(selected_node, nodeid, 'New Node');\n                if (!!node) {\n                    _jm.select_node(nodeid);\n                    _jm.begin_edit(nodeid);\n                }\n            }\n        },\n        handle_editnode: function (_jm, e) {\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node) {\n                _jm.begin_edit(selected_node);\n            }\n        },\n        handle_delnode: function (_jm, e) {\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node && !selected_node.isroot) {\n                _jm.select_node(selected_node.parent);\n                _jm.remove_node(selected_node);\n            }\n        },\n        handle_toggle: function (_jm, e) {\n            var evt = e || event;\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node) {\n                _jm.toggle_node(selected_node.id);\n                evt.stopPropagation();\n                evt.preventDefault();\n            }\n        },\n        handle_up: function (_jm, e) {\n            var evt = e || event;\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node) {\n                var up_node = _jm.find_node_before(selected_node);\n                if (!up_node) {\n                    var np = _jm.find_node_before(selected_node.parent);\n                    if (!!np && np.children.length > 0) {\n                        up_node = np.children[np.children.length - 1];\n                    }\n                }\n                if (!!up_node) {\n                    _jm.select_node(up_node);\n                }\n                evt.stopPropagation();\n                evt.preventDefault();\n            }\n        },\n\n        handle_down: function (_jm, e) {\n            var evt = e || event;\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node) {\n                var down_node = _jm.find_node_after(selected_node);\n                if (!down_node) {\n                    var np = _jm.find_node_after(selected_node.parent);\n                    if (!!np && np.children.length > 0) {\n                        down_node = np.children[0];\n                    }\n                }\n                if (!!down_node) {\n                    _jm.select_node(down_node);\n                }\n                evt.stopPropagation();\n                evt.preventDefault();\n            }\n        },\n\n        handle_left: function (_jm, e) {\n            this._handle_direction(_jm, e, jm.direction.left);\n        },\n        handle_right: function (_jm, e) {\n            this._handle_direction(_jm, e, jm.direction.right);\n        },\n        _handle_direction: function (_jm, e, d) {\n            var evt = e || event;\n            var selected_node = _jm.get_selected_node();\n            var node = null;\n            if (!!selected_node) {\n                if (selected_node.isroot) {\n                    var c = selected_node.children;\n                    var children = [];\n                    for (var i = 0; i < c.length; i++) {\n                        if (c[i].direction === d) {\n                            children.push(i)\n                        }\n                    }\n                    node = c[children[Math.floor((children.length - 1) / 2)]];\n                }\n                else if (selected_node.direction === d) {\n                    var children = selected_node.children;\n                    var childrencount = children.length;\n                    if (childrencount > 0) {\n                        node = children[Math.floor((childrencount - 1) / 2)]\n                    }\n                } else {\n                    node = selected_node.parent;\n                }\n                if (!!node) {\n                    _jm.select_node(node);\n                }\n                evt.stopPropagation();\n                evt.preventDefault();\n            }\n        },\n    };\n\n\n    // plugin\n    jm.plugin = function (name, init) {\n        this.name = name;\n        this.init = init;\n    };\n\n    jm.plugins = [];\n\n    jm.register_plugin = function (plugin) {\n        if (plugin instanceof jm.plugin) {\n            jm.plugins.push(plugin);\n        }\n    };\n\n    jm.init_plugins = function (sender) {\n        $w.setTimeout(function () {\n            jm._init_plugins(sender);\n        }, 0);\n    };\n\n    jm._init_plugins = function (sender) {\n        var l = jm.plugins.length;\n        var fn_init = null;\n        for (var i = 0; i < l; i++) {\n            fn_init = jm.plugins[i].init;\n            if (typeof fn_init === 'function') {\n                fn_init(sender);\n            }\n        }\n    };\n\n    // quick way\n    jm.show = function (options, mind) {\n        var _jm = new jm(options);\n        _jm.show(mind);\n        return _jm;\n    };\n\n    // export jsmind\n    if (typeof module !== 'undefined' && typeof exports === 'object') {\n        module.exports = jm;\n        $w[__name__] = jm;\n    } else if (typeof define === 'function' && (define.amd || define.cmd)) {\n        define(function () { return jm; });\n    } else {\n        $w[__name__] = jm;\n    }\n})(typeof window !== 'undefined' ? window : global);\n\n"],"sourceRoot":""}