{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/JsMind/JsMind.vue?3c19","webpack:///./src/App.vue?9b05","webpack:///./src/App.vue?c59d","webpack:///src/App.vue","webpack:///./src/App.vue?a7d1","webpack:///./src/App.vue?a938","webpack:///./src/router/index.js","webpack:///./src/components/JsMind/JsMind.vue?daf5","webpack:///src/components/JsMind/JsMind.vue","webpack:///./src/components/JsMind/JsMind.vue?bf52","webpack:///./src/components/JsMind/JsMind.vue?6269","webpack:///./src/components/JsMind/index.js","webpack:///./src/main.js","webpack:///./src/components/JsMind/jsmind.draggable.js","webpack:///./src/components/JsMind/jsmind.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","_v","staticRenderFns","component","Vue","use","VueRouter","routes","path","router","base","process","refresh","style","height","_m","staticStyle","staticClass","props","values","required","options","mounted","init","jm","default_options","updated","watch","methods","jsMind","install","config","productionTip","JsMind","render","h","App","$mount","$w","$d","__name__","draggable","jdom","util","dom","clear_selection","getSelection","removeAllRanges","selection","empty","line_width","lookup_delay","lookup_interval","e_canvas","canvas_ctx","shadow","shadow_w","shadow_h","active_node","target_node","target_direct","client_w","client_h","offset_x","offset_y","hlookup_delay","hlookup_timer","capture","moved","_create_canvas","_create_shadow","_event_bind","resize","view","e_nodes","width","size","w","e_panel","ctx","getContext","visibility","zIndex","cursor","opacity","reset_shadow","el","innerHTML","left","top","backgroundImage","backgroundSize","transform","clientWidth","clientHeight","show_shadow","hide_shadow","_magnet_shadow","node","lineWidth","strokeStyle","lineCap","_clear_lines","_canvas_lineto","sp","x","y","np","clearRect","x1","y1","x2","y2","beginPath","moveTo","lineTo","stroke","_lookup_close_node","nl","root","get_root","root_location","get_location","root_size","get_size","root_x","sw","sh","sx","offsetLeft","sy","offsetTop","direct","direction","right","nodes","mind","min_distance","Number","MAX_VALUE","distance","closest_node","closest_p","shadow_p","nodeid","isroot","id","Math","abs","result_node","lookup_close_node","node_data","jd","container","add_event","evt","dragstart","drag","dragend","get_editable","jview","srcElement","tagName","toLowerCase","get_binded_nodeid","get_node","clientX","touches","clientY","client_hw","floor","client_hh","clearInterval","setInterval","preventDefault","px","py","src_node","move_node","inherited","sibling_nodes","children","sc","delta_y","node_before","beforeid","dy","jm_event_handle","event_type","draggable_plugin","plugin","add_event_listener","register_plugin","__version__","__author__","_noop","logger","log","debug","warn","info","$g","getElementById","$c","$t","hasChildNodes","firstChild","nodeValue","createTextNode","$h","HTMLElement","$i","nodeType","ownerDocument","String","startsWith","DEFAULT_OPTIONS","editable","theme","support_html","engine","hmargin","vmargin","line_color","layout","hspace","vspace","pspace","default_event_handle","enable_mousedown_handle","enable_click_handle","enable_dblclick_handle","shortcut","enable","handles","mapping","addchild","addbrother","editnode","delnode","toggle","up","down","current","version","opts","json","merge","inited","event_handles","center","show","edit","select","meta","ctrl","alt","sId","iIndex","sTopic","oData","bIsRoot","oParent","eDirection","bExpanded","index","topic","parent","expanded","_data","compare","node1","node2","i1","i2","pnode","pid","vd","abs_x","abs_y","author","selected","set_root","_put_node","add_node","parent_node","idx","is_node","the_parent_node","nodeindex","isNaN","children_len","_reindex","insert_node_before","the_node_before","node_index","get_node_before","the_node","insert_node_after","node_after","the_node_after","get_node_after","brothers","parentid","_move_node","_flow_node_direction","len","_move_node_internal","sibling","si","remove_node","ci","k","sort","format","node_tree","example","get_mind","source","df","_parse","get_data","_buildnode","node_root","_extract_data","_extract_subnode","node_json","node_parent","node_array","_array","narray","reverse","root_id","_extract_root","root_json","extract_count","node_direction","sub_extract_count","_array_node","freemind","xml","xml_doc","_parse_xml","xml_root","_find_root","_load_node","xmllines","_buildmap","join","DOMParser","parser","parseFromString","ActiveXObject","async","loadXML","childNodes","parent_id","xml_node","node_id","node_topic","topic_children","topic_child","textContent","_load_attributes","node_expanded","node_position","child","attr","attr_data","pos","ajax","_xhr","xhr","XMLHttpRequest","_eurl","url","encodeURIComponent","param","method","callback","fail_callback","a","tmp_param","onreadystatechange","readyState","status","string2json","responseText","open","setRequestHeader","send","post","addEventListener","attachEvent","file","read","file_data","fn_callback","reader","FileReader","readAsText","save","blob","Blob","BlobBuilder","MozBlobBuilder","WebKitBlobBuilder","MSBlobBuilder","bb","append","getBlob","navigator","msSaveBlob","URL","webkitURL","bloburl","createObjectURL","anchor","download","body","createEvent","initEvent","dispatchEvent","location","json2string","JSON","json_str","stringify","parse","b","toString","uuid","newid","Date","getTime","random","substr","text","is_empty","replace","opts_layout","opts_view","data_provider","layout_provider","view_provider","shortcut_provider","init_plugins","enable_edit","disable_edit","enable_event_handle","event_handle","disable_event_handle","set_theme","theme_old","reset_theme","reset_custom_style","mousedown_handle","click_handle","dblclick_handle","element","select_node","select_clear","isexpander","is_expander","toggle_node","begin_edit","edit_node_begin","end_edit","edit_node_end","save_location","relayout","restore_location","expand_node","collapse_node","expand_all","collapse_all","expand_to_depth","depth","_reset","reset","_show","load","invoke_event_handle","get_meta","data_format","reset_node_custom_style","afterid","update_node","is_visible","get_selected_node","is_node_visible","find_node_before","prev","ni","find_node_after","getthis","set_node_color","bgcolor","fgcolor","set_node_font_style","weight","set_node_background_image","image","rotation","set_node_background_rotation","_invoke_event_handle","mind_data","isside","bounds","cache_valid","layout_direction","layout_offset","_layout_direction_root","layout_data","children_count","side_index","_layout_direction_side","subnode","outer_height","left_nodes","right_nodes","unshift","outer_height_left","_layout_offset_subnodes","outer_height_right","max","total_height","nodes_count","node_outer_height","base_y","pd","set_visible","middle_height","_layout_offset_subnodes_height","get_node_offset","offset_cache","_offset_","offset_p","get_node_point","view_data","get_node_point_in","get_node_point_out","pout_cache","_pout_","get_expander_point","ex_p","ceil","get_min_size","pout","part_layout","target_depth","curr_nodes","curr_depth","root_layout_data","visible","is_expand","graph_canvas","set_size","clear","draw_line","pin","offset","_bezier_to","copy_to","dest_canvas_ctx","drawImage","bezierCurveTo","_line_to","graph_svg","e_svg","lines","createElementNS","line","img","Image","btoa","XMLSerializer","serializeToString","selected_node","editing_node","graph","e_editor","className","actualZoom","zoomStep","minZoom","maxZoom","v","keyCode","stopPropagation","obj","event_name","parentElement","clear_lines","clear_nodes","theme_name","init_nodes","expand_size","min_size","min_width","min_height","init_nodes_size","doc_frag","createDocumentFragment","create_node_element","d_e","expander","_reset_node_custom_style","clear_node_custom_style","get_editing_node","is_editing","ncs","getComputedStyle","parseInt","getPropertyValue","focus","get_view_offset","_x","_y","show_nodes","show_lines","zoomIn","setZoom","zoomOut","zoom","_center_root","outer_w","outer_h","_offset","scrollLeft","scrollTop","keep_center","_saved_location","node_element","p_expander","expander_text","display","backgroundColor","color","fontSize","fontWeight","fontStyle","scaledImageData","toDataURL","_mapping","handle","handler","handle_addchild","handle_addbrother","handle_editnode","handle_delnode","handle_toggle","handle_up","handle_down","handle_left","handle_right","enable_shortcut","disable_shortcut","kc","metaKey","ctrlKey","altKey","shiftKey","_jm","up_node","down_node","_handle_direction","childrencount","plugins","sender","_init_plugins","fn_init","define","global"],"mappings":"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","file":"js/app.17b84a7a.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-1779c4b4\":\"1b734d39\",\"chunk-2d0b16b3\":\"b63782ae\",\"chunk-741f5406\":\"8f49ce40\",\"chunk-1d265b3a\":\"b85e47bf\",\"chunk-379134ea\":\"47bed3c1\",\"chunk-d67babc0\":\"d7961ed4\",\"chunk-e32b1f48\":\"4f47bbd0\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"chunk-1d265b3a\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-1779c4b4\":\"31d6cfe0\",\"chunk-2d0b16b3\":\"31d6cfe0\",\"chunk-741f5406\":\"31d6cfe0\",\"chunk-1d265b3a\":\"ea7086bc\",\"chunk-379134ea\":\"31d6cfe0\",\"chunk-d67babc0\":\"31d6cfe0\",\"chunk-e32b1f48\":\"31d6cfe0\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./JsMind.vue?vue&type=style&index=0&id=633694eb&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./JsMind.vue?vue&type=style&index=0&id=633694eb&scoped=true&lang=css&\"","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('h1',{attrs:{\"id\":\"toc_0\"}},[_c('router-link',{attrs:{\"to\":\"/\"}},[_vm._v(\" Analyzing context\")])],1),_c('p',[_vm._v(\"Tools for analyzing complicate context for developers\")]),_c('br'),_c('br'),_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n<template>\n  <div id=\"app\">\n    <h1 id=\"toc_0\"><router-link to='/'>\n        Analyzing context</router-link></h1>\n\n    <p>Tools for analyzing complicate context for developers&hellip;</p>\n    <br><br>\n\n    <router-view/>\n\n  </div>\n</template>\n\n<script>\n//import FramePage from './components/FrontPage.vue'\nexport default {\n  name: 'App',\n  // components: {\n  //   FramePage\n  // }\n    methods:{\n        goHome(){\n            var router = this.$router \n            router.push({\n                name:Home,\n            })\n        }\n    }\n\n\n}\n</script>\n\n<style>\n\n@import url(http://fonts.googleapis.com/earlyaccess/notosanskr.css);\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\np,\nblockquote {\n    margin: 0;\n    padding: 0;\n}\nbody {\n    /*font-family: \"Helvetica Neue\", Helvetica, \"Hiragino Sans GB\", Arial, sans-serif;*/\n    font-family: 'Noto Sans KR', sans-serif;\n    font-size: 13px;\n    line-height: 18px;\n    color: #737373;\n    background-color: white;\n    margin: 10px 13px 10px 13px;\n}\ntable {\n\tmargin: 10px 0 15px 0;\n\tborder-collapse: collapse;\n}\ntd,th {\n\tborder: 1px solid #ddd;\n\tpadding: 3px 10px;\n}\nth {\n\tpadding: 5px 10px;\n}\n\na {\n    color: #737373;\n    text-decoration: none;\n}\na:hover {\n    color: #0050a3;\n    text-decoration: none;\n}\na img {\n    border: none;\n}\np {\n    margin-bottom: 9px;\n}\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n    color: #404040;\n    line-height: 36px;\n}\nh1 {\n    margin-bottom: 18px;\n    font-size: 30px;\n}\nh2 {\n    font-size: 24px;\n}\nh3 {\n    font-size: 18px;\n}\nh4 {\n    font-size: 16px;\n}\nh5 {\n    font-size: 14px;\n}\nh6 {\n    font-size: 13px;\n}\nhr {\n    margin: 0 0 19px;\n    border: 0;\n    border-bottom: 1px solid #ccc;\n}\nblockquote {\n    padding: 13px 13px 21px 15px;\n    margin-bottom: 18px;\n    font-family:georgia,serif;\n    font-style: italic;\n}\nblockquote:before {\n    content:\"\\201C\";\n    font-size:40px;\n    margin-left:-10px;\n    font-family:georgia,serif;\n    color:#eee;\n}\nblockquote p {\n    font-size: 14px;\n    font-weight: 300;\n    line-height: 18px;\n    margin-bottom: 0;\n    font-style: italic;\n}\ncode, pre {\n    font-family: Monaco, Andale Mono, Courier New, monospace;\n}\ncode {\n    background-color: #fee9cc;\n    color: rgba(0, 0, 0, 0.75);\n    padding: 1px 3px;\n    font-size: 12px;\n    -webkit-border-radius: 3px;\n    -moz-border-radius: 3px;\n    border-radius: 3px;\n}\npre {\n    display: block;\n    padding: 14px;\n    margin: 0 0 18px;\n    line-height: 16px;\n    font-size: 11px;\n    border: 1px solid #d9d9d9;\n    white-space: pre-wrap;\n    word-wrap: break-word;\n}\npre code {\n    background-color: #fff;\n    color:#737373;\n    font-size: 11px;\n    padding: 0;\n}\nsup {\n    font-size: 0.83em;\n    vertical-align: super;\n    line-height: 0;\n}\n* {\n\t-webkit-print-color-adjust: exact;\n}\n@media screen and (min-width: 914px) {\n    body {\n        width: 854px;\n        margin:10px auto;\n    }\n}\n@media print {\n\tbody,code,pre code,h1,h2,h3,h4,h5,h6 {\n\t\tcolor: black;\n\t}\n\ttable, pre {\n\t\tpage-break-inside: avoid;\n\t}\n}\n\n\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=50f30a52&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport VueRouter from 'vue-router'\n\nVue.use(VueRouter)\n\n  const routes = [\n  {\n    path: '/',\n    name: 'Home',\n    component: () => import ('../components/FrontPage.vue')\n  },\n  {\n    path: '/mindmapinput',\n    name: 'mindmapinput',\n    // route level code-splitting\n    // this generates a separate chunk (about.[hash].js) for this route\n    // which is lazy-loaded when the route is visited.\n    component: () => import('../components/MindmapInput.vue')\n  },\n  {\n    path: '/mindmapresult',\n    name: 'mindmapresult',\n    component: () => import('../components/MindmapResult.vue')\n  },\n  {\n    path: '/mcdcinput',\n    name: 'mcdcinput',\n    component: () => import('../components/MCDCInput.vue')\n  },  {\n    path: '/mcdcresult',\n    name: 'mcdcresult',\n    component: () => import('../components/MCDCResult.vue')\n  },\n  {\n    path: '/errorpage',\n    name: 'errorpage',\n    component: () => import('../components/errorPage.vue')\n  },\n  \n]\n\nconst router = new VueRouter({\n  //mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n})\n\nexport default router\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{key:_vm.refresh,style:({height: _vm.height})},[_c('div',{attrs:{\"id\":\"jsmind_container\"}}),_vm._m(0)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"display\":\"none\"}},[_c('input',{staticClass:\"file\",attrs:{\"type\":\"file\",\"id\":\"image-chooser\",\"accept\":\"image/*\"}})])}]\n\nexport { render, staticRenderFns }","<template>\n<div :key='refresh' :style=\"{height}\">\n      <div id=\"jsmind_container\"></div>\n  \n  <div style=\"display:none\">\n      <input class=\"file\" type=\"file\" id=\"image-chooser\" accept=\"image/*\"/>\n    </div>\n</div>\n</template>\n\n<script>\nimport  \"./jsmind.js\";\nimport \"./jsmind.css\";\nimport './jsmind.draggable.js'\n//import './jsmind.screenshot.js'\nexport default {\n  name: \"jsMind\",\n  props: {\n    values: {\n      type: Object,\n      required: true\n    },\n    options: {\n      type: Object\n    },\n    height:{\n      type:String,\n      required:true\n    }\n  },\n  mounted() {\n    this.init()\n  },\n  data(){\n    return{\n      jm:{},\n      refresh:1,\n      value:{},\n       // \n      default_options : {\n      container: \"jsmind_container\",\n      editable: true, // \n      theme: \"primary\", // \n      mode: \"full\", // \n      support_html: true, // HTML\n      view: {\n        engine: \"canvas\", // \n        hmargin: 100, // \n        vmargin: 50, // \n        line_width: 2, // \n        line_color: \"#555\" // \n      },\n      layout: {\n        hspace: 30, // \n        vspace: 20, // \n        pspace: 13 // /\n      },\n      shortcut: {\n        enable: true, // \n        handles: {\n          SavePNG(){\n            this.jm.screenshot.shootDownload();\n          }\n        }, // \n        mapping: {\n          // \n          addchild: 45, // <Insert>\n          addbrother: 13, // <Enter>\n          editnode: 113, // <F2>\n          delnode: 46, // <Delete>\n          toggle: 32, // <Space>\n          left: 37, // <Left>\n          up: 38, // <Up>\n          right: 39, // <Right>\n          down: 40 ,// <Down>\n          SavePNG:jsMind.key.ctrl + 83\n        }\n      }\n    }\n    }\n  },\n  updated(){\n    this.init()\n  },\n  watch:{\n    options(){\n     this.$nextTick(()=>{\n      this.refresh++\n     })\n    }\n  },\n  methods:{\n    init(){\n      if(this.jm.get_data){\n        this.value=this.jm.get_data()\n      }else{\n        this.value=this.values\n      }\n      const options = Object.assign(this.default_options, this.options);\n      this.jm=window.jsMind.show(options,this.value)\n    }\n  }\n};\n</script>\n<style scoped>\n#jsmind_container {\n  height: 100%;\n  width: 100%;\n  border : 1px;\n  border-style:solid;\n\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./JsMind.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./JsMind.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./JsMind.vue?vue&type=template&id=633694eb&scoped=true&\"\nimport script from \"./JsMind.vue?vue&type=script&lang=js&\"\nexport * from \"./JsMind.vue?vue&type=script&lang=js&\"\nimport style0 from \"./JsMind.vue?vue&type=style&index=0&id=633694eb&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"633694eb\",\n  null\n  \n)\n\nexport default component.exports","import jsMind from './JsMind.vue'\njsMind.install = Vue => {\n    Vue.component(jsMind.name, jsMind)\n}\n\nif (typeof window !== 'undefined' && window.Vue) {\n    window.Vue.component(jsMind.name, jsMind)\n}\n\nexport default jsMind;\n","import Vue from 'vue'\nimport App from './App.vue'\nimport router from './router'\nimport JsMind from './components/JsMind/index'\n\nVue.config.productionTip = false\nVue.use(JsMind)\n\nnew Vue({\n  router,\n  render: h => h(App)\n}).$mount('#app')\n\n","/*\n * Released under BSD License\n * Copyright (c) 2014-2015 hizzgdev@163.com\n * \n * Project Home:\n *   https://github.com/hizzgdev/jsmind/\n */\n\n(function ($w) {\n    'use strict';\n    var $d = $w.document;\n    var __name__ = 'jsMind';\n    var jsMind = $w[__name__];\n    if (!jsMind) { return; }\n    if (typeof jsMind.draggable != 'undefined') { return; }\n\n    var jdom = jsMind.util.dom;\n    var clear_selection = 'getSelection' in $w ? function () {\n        $w.getSelection().removeAllRanges();\n    } : function () {\n        $d.selection.empty();\n    };\n\n    var options = {\n        line_width: 5,\n        lookup_delay: 500,\n        lookup_interval: 80\n    };\n\n    jsMind.draggable = function (jm) {\n        this.jm = jm;\n        this.e_canvas = null;\n        this.canvas_ctx = null;\n        this.shadow = null;\n        this.shadow_w = 0;\n        this.shadow_h = 0;\n        this.active_node = null;\n        this.target_node = null;\n        this.target_direct = null;\n        this.client_w = 0;\n        this.client_h = 0;\n        this.offset_x = 0;\n        this.offset_y = 0;\n        this.hlookup_delay = 0;\n        this.hlookup_timer = 0;\n        this.capture = false;\n        this.moved = false;\n    };\n\n    jsMind.draggable.prototype = {\n        init: function () {\n            this._create_canvas();\n            this._create_shadow();\n            this._event_bind();\n        },\n\n        resize: function () {\n            this.jm.view.e_nodes.appendChild(this.shadow);\n            this.e_canvas.width = this.jm.view.size.w;\n            this.e_canvas.height = this.jm.view.size.h;\n        },\n\n        _create_canvas: function () {\n            var c = $d.createElement('canvas');\n            this.jm.view.e_panel.appendChild(c);\n            var ctx = c.getContext('2d');\n            this.e_canvas = c;\n            this.canvas_ctx = ctx;\n        },\n\n        _create_shadow: function () {\n            var s = $d.createElement('jmnode');\n            s.style.visibility = 'hidden';\n            s.style.zIndex = '3';\n            s.style.cursor = 'move';\n            s.style.opacity = '0.7';\n            this.shadow = s;\n        },\n\n        reset_shadow: function (el) {\n            var s = this.shadow.style;\n            this.shadow.innerHTML = el.innerHTML;\n            s.left = el.style.left;\n            s.top = el.style.top;\n            s.width = el.style.width;\n            s.height = el.style.height;\n            s.backgroundImage = el.style.backgroundImage;\n            s.backgroundSize = el.style.backgroundSize;\n            s.transform = el.style.transform;\n            this.shadow_w = this.shadow.clientWidth;\n            this.shadow_h = this.shadow.clientHeight;\n\n        },\n\n        show_shadow: function () {\n            if (!this.moved) {\n                this.shadow.style.visibility = 'visible';\n            }\n        },\n\n        hide_shadow: function () {\n            this.shadow.style.visibility = 'hidden';\n        },\n\n        _magnet_shadow: function (node) {\n            if (!!node) {\n                this.canvas_ctx.lineWidth = options.line_width;\n                this.canvas_ctx.strokeStyle = 'rgba(0,0,0,0.3)';\n                this.canvas_ctx.lineCap = 'round';\n                this._clear_lines();\n                this._canvas_lineto(node.sp.x, node.sp.y, node.np.x, node.np.y);\n            }\n        },\n\n        _clear_lines: function () {\n            this.canvas_ctx.clearRect(0, 0, this.jm.view.size.w, this.jm.view.size.h);\n        },\n\n        _canvas_lineto: function (x1, y1, x2, y2) {\n            this.canvas_ctx.beginPath();\n            this.canvas_ctx.moveTo(x1, y1);\n            this.canvas_ctx.lineTo(x2, y2);\n            this.canvas_ctx.stroke();\n        },\n\n        _lookup_close_node: function () {\n            var root = this.jm.get_root();\n            var root_location = root.get_location();\n            var root_size = root.get_size();\n            var root_x = root_location.x + root_size.w / 2;\n\n            var sw = this.shadow_w;\n            var sh = this.shadow_h;\n            var sx = this.shadow.offsetLeft;\n            var sy = this.shadow.offsetTop;\n\n            var ns, nl;\n\n            var direct = (sx + sw / 2) >= root_x ?\n                jsMind.direction.right : jsMind.direction.left;\n            var nodes = this.jm.mind.nodes;\n            var node = null;\n            var min_distance = Number.MAX_VALUE;\n            var distance = 0;\n            var closest_node = null;\n            var closest_p = null;\n            var shadow_p = null;\n            for (var nodeid in nodes) {\n                var np, sp;\n                node = nodes[nodeid];\n                if (node.isroot || node.direction == direct) {\n                    if (node.id == this.active_node.id) {\n                        continue;\n                    }\n                    ns = node.get_size();\n                    nl = node.get_location();\n                    if (direct == jsMind.direction.right) {\n                        if (sx - nl.x - ns.w <= 0) { continue; }\n                        distance = Math.abs(sx - nl.x - ns.w) + Math.abs(sy + sh / 2 - nl.y - ns.h / 2);\n                        np = { x: nl.x + ns.w - options.line_width, y: nl.y + ns.h / 2 };\n                        sp = { x: sx + options.line_width, y: sy + sh / 2 };\n                    } else {\n                        if (nl.x - sx - sw <= 0) { continue; }\n                        distance = Math.abs(sx + sw - nl.x) + Math.abs(sy + sh / 2 - nl.y - ns.h / 2);\n                        np = { x: nl.x + options.line_width, y: nl.y + ns.h / 2 };\n                        sp = { x: sx + sw - options.line_width, y: sy + sh / 2 };\n                    }\n                    if (distance < min_distance) {\n                        closest_node = node;\n                        closest_p = np;\n                        shadow_p = sp;\n                        min_distance = distance;\n                    }\n                }\n            }\n            var result_node = null;\n            if (!!closest_node) {\n                result_node = {\n                    node: closest_node,\n                    direction: direct,\n                    sp: shadow_p,\n                    np: closest_p\n                };\n            }\n            return result_node;\n        },\n\n        lookup_close_node: function () {\n            var node_data = this._lookup_close_node();\n            if (!!node_data) {\n                this._magnet_shadow(node_data);\n                this.target_node = node_data.node;\n                this.target_direct = node_data.direction;\n            }\n        },\n\n        _event_bind: function () {\n            var jd = this;\n            var container = this.jm.view.container;\n            jdom.add_event(container, 'mousedown', function (e) {\n                var evt = e || event;\n                jd.dragstart.call(jd, evt);\n            });\n            jdom.add_event(container, 'mousemove', function (e) {\n                var evt = e || event;\n                jd.drag.call(jd, evt);\n            });\n            jdom.add_event(container, 'mouseup', function (e) {\n                var evt = e || event;\n                jd.dragend.call(jd, evt);\n            });\n            jdom.add_event(container, 'touchstart', function (e) {\n                var evt = e || event;\n                jd.dragstart.call(jd, evt);\n            });\n            jdom.add_event(container, 'touchmove', function (e) {\n                var evt = e || event;\n                jd.drag.call(jd, evt);\n            });\n            jdom.add_event(container, 'touchend', function (e) {\n                var evt = e || event;\n                jd.dragend.call(jd, evt);\n            });\n        },\n\n        dragstart: function (e) {\n            if (!this.jm.get_editable()) { return; }\n            if (this.capture) { return; }\n            this.active_node = null;\n\n            var jview = this.jm.view;\n            var el = e.target || event.srcElement;\n            if (el.tagName.toLowerCase() != 'jmnode') { return; }\n            var nodeid = jview.get_binded_nodeid(el);\n            if (!!nodeid) {\n                var node = this.jm.get_node(nodeid);\n                if (!node.isroot) {\n                    this.reset_shadow(el);\n                    this.active_node = node;\n                    this.offset_x = (e.clientX || e.touches[0].clientX) - el.offsetLeft;\n                    this.offset_y = (e.clientY || e.touches[0].clientY) - el.offsetTop;\n                    this.client_hw = Math.floor(el.clientWidth / 2);\n                    this.client_hh = Math.floor(el.clientHeight / 2);\n                    if (this.hlookup_delay != 0) {\n                        $w.clearTimeout(this.hlookup_delay);\n                    }\n                    if (this.hlookup_timer != 0) {\n                        $w.clearInterval(this.hlookup_timer);\n                    }\n                    var jd = this;\n                    this.hlookup_delay = $w.setTimeout(function () {\n                        jd.hlookup_delay = 0;\n                        jd.hlookup_timer = $w.setInterval(function () {\n                            jd.lookup_close_node.call(jd);\n                        }, options.lookup_interval);\n                    }, options.lookup_delay);\n                    this.capture = true;\n                }\n            }\n        },\n\n        drag: function (e) {\n            if (!this.jm.get_editable()) { return; }\n            if (this.capture) {\n                e.preventDefault();\n                this.show_shadow();\n                this.moved = true;\n                clear_selection();\n                var px = (e.clientX || e.touches[0].clientX) - this.offset_x;\n                var py = (e.clientY || e.touches[0].clientY) - this.offset_y;\n                var cx = px + this.client_hw;\n                var cy = py + this.client_hh;\n                this.shadow.style.left = px + 'px';\n                this.shadow.style.top = py + 'px';\n                clear_selection();\n            }\n        },\n\n        dragend: function (e) {\n            if (!this.jm.get_editable()) { return; }\n            if (this.capture) {\n                if (this.hlookup_delay != 0) {\n                    $w.clearTimeout(this.hlookup_delay);\n                    this.hlookup_delay = 0;\n                    this._clear_lines();\n                }\n                if (this.hlookup_timer != 0) {\n                    $w.clearInterval(this.hlookup_timer);\n                    this.hlookup_timer = 0;\n                    this._clear_lines();\n                }\n                if (this.moved) {\n                    var src_node = this.active_node;\n                    var target_node = this.target_node;\n                    var target_direct = this.target_direct;\n                    this.move_node(src_node, target_node, target_direct);\n                }\n                this.hide_shadow();\n            }\n            this.moved = false;\n            this.capture = false;\n        },\n\n        move_node: function (src_node, target_node, target_direct) {\n            var shadow_h = this.shadow.offsetTop;\n            if (!!target_node && !!src_node && !jsMind.node.inherited(src_node, target_node)) {\n                // lookup before_node\n                var sibling_nodes = target_node.children;\n                var sc = sibling_nodes.length;\n                var node = null;\n                var delta_y = Number.MAX_VALUE;\n                var node_before = null;\n                var beforeid = '_last_';\n                while (sc--) {\n                    node = sibling_nodes[sc];\n                    if (node.direction == target_direct && node.id != src_node.id) {\n                        var dy = node.get_location().y - shadow_h;\n                        if (dy > 0 && dy < delta_y) {\n                            delta_y = dy;\n                            node_before = node;\n                            beforeid = '_first_';\n                        }\n                    }\n                }\n                if (!!node_before) { beforeid = node_before.id; }\n                this.jm.move_node(src_node.id, beforeid, target_node.id, target_direct);\n            }\n            this.active_node = null;\n            this.target_node = null;\n            this.target_direct = null;\n        },\n\n        jm_event_handle: function (type, data) {\n            if (type === jsMind.event_type.resize) {\n                this.resize();\n            }\n        }\n    };\n\n    var draggable_plugin = new jsMind.plugin('draggable', function (jm) {\n        var jd = new jsMind.draggable(jm);\n        jd.init();\n        jm.add_event_listener(function (type, data) {\n            jd.jm_event_handle.call(jd, type, data);\n        });\n    });\n\n    jsMind.register_plugin(draggable_plugin);\n\n})(window);\n","/*\n * Released under BSD License\n * Copyright (c) 2014-2016 hizzgdev@163.com\n *\n * Project Home:\n *   https://github.com/hizzgdev/jsmind/\n */\n\n; (function ($w) {\n    'use strict';\n    // set 'jsMind' as the library name.\n    // __name__ should be a const value, Never try to change it easily.\n    var __name__ = 'jsMind';\n    // library version\n    var __version__ = '0.4.6';\n    // author\n    var __author__ = 'hizzgdev@163.com';\n\n    // an noop function define\n    var _noop = function () { };\n    var logger = (typeof console === 'undefined') ? {\n        log: _noop, debug: _noop, error: _noop, warn: _noop, info: _noop\n    } : console;\n\n    // check global variables\n    if (typeof module === 'undefined' || !module.exports) {\n        if (typeof $w[__name__] != 'undefined') {\n            logger.log(__name__ + ' has been already exist.');\n            return;\n        }\n    }\n\n    // shortcut of methods in dom\n    var $d = $w.document;\n    var $g = function (id) { return $d.getElementById(id); };\n    var $c = function (tag) { return $d.createElement(tag); };\n    var $t = function (n, t) { if (n.hasChildNodes()) { n.firstChild.nodeValue = t; } else { n.appendChild($d.createTextNode(t)); } };\n\n    var $h = function (n, t) {\n        if (t instanceof HTMLElement) {\n            n.innerHTML = '';\n            n.appendChild(t)\n        } else {\n            n.innerHTML = t;\n        }\n    };\n    // detect isElement\n    var $i = function (el) { return !!el && (typeof el === 'object') && (el.nodeType === 1) && (typeof el.style === 'object') && (typeof el.ownerDocument === 'object'); };\n    if (typeof String.prototype.startsWith != 'function') { String.prototype.startsWith = function (p) { return this.slice(0, p.length) === p; }; }\n\n    var DEFAULT_OPTIONS = {\n        container: '',   // id of the container\n        editable: false, // you can change it in your options\n        theme: null,\n        mode: 'full',    // full or side\n        support_html: true,\n\n        view: {\n            engine: 'canvas',\n            hmargin: 100,\n            vmargin: 50,\n            line_width: 2,\n            line_color: '#555'\n        },\n        layout: {\n            hspace: 30,\n            vspace: 20,\n            pspace: 13\n        },\n        default_event_handle: {\n            enable_mousedown_handle: true,\n            enable_click_handle: true,\n            enable_dblclick_handle: true\n        },\n        shortcut: {\n            enable: true,\n            handles: {\n            },\n            mapping: {\n                addchild: 45, // Insert\n                addbrother: 13, // Enter\n                editnode: 113,// F2\n                delnode: 46, // Delete\n                toggle: 32, // Space\n                left: 37, // Left\n                up: 38, // Up\n                right: 39, // Right\n                down: 40, // Down\n            }\n        },\n    };\n\n    // core object\n    var jm = function (options) {\n        jm.current = this;\n\n        this.version = __version__;\n        var opts = {};\n        jm.util.json.merge(opts, DEFAULT_OPTIONS);\n        jm.util.json.merge(opts, options);\n\n        if (!opts.container) {\n            logger.error('the options.container should not be null or empty.');\n            return;\n        }\n        this.options = opts;\n        this.inited = false;\n        this.mind = null;\n        this.event_handles = [];\n        this.init();\n    };\n\n    // ============= static object =============================================\n    jm.direction = { left: -1, center: 0, right: 1 };\n    jm.event_type = { show: 1, resize: 2, edit: 3, select: 4 };\n    jm.key = { meta: 1 << 13, ctrl: 1 << 12, alt: 1 << 11, shift: 1 << 10 };\n\n    jm.node = function (sId, iIndex, sTopic, oData, bIsRoot, oParent, eDirection, bExpanded) {\n        if (!sId) { logger.error('invalid nodeid'); return; }\n        if (typeof iIndex != 'number') { logger.error('invalid node index'); return; }\n        if (typeof bExpanded === 'undefined') { bExpanded = true; }\n        this.id = sId;\n        this.index = iIndex;\n        this.topic = sTopic;\n        this.data = oData || {};\n        this.isroot = bIsRoot;\n        this.parent = oParent;\n        this.direction = eDirection;\n        this.expanded = !!bExpanded;\n        this.children = [];\n        this._data = {};\n    };\n\n    jm.node.compare = function (node1, node2) {\n        // '-1' is alwary the last\n        var r = 0;\n        var i1 = node1.index;\n        var i2 = node2.index;\n        if (i1 >= 0 && i2 >= 0) {\n            r = i1 - i2;\n        } else if (i1 == -1 && i2 == -1) {\n            r = 0;\n        } else if (i1 == -1) {\n            r = 1;\n        } else if (i2 == -1) {\n            r = -1;\n        } else {\n            r = 0;\n        }\n        //logger.debug(i1+' <> '+i2+'  =  '+r);\n        return r;\n    };\n\n    jm.node.inherited = function (pnode, node) {\n        if (!!pnode && !!node) {\n            if (pnode.id === node.id) {\n                return true;\n            }\n            if (pnode.isroot) {\n                return true;\n            }\n            var pid = pnode.id;\n            var p = node;\n            while (!p.isroot) {\n                p = p.parent;\n                if (p.id === pid) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n\n    jm.node.prototype = {\n        get_location: function () {\n            var vd = this._data.view;\n            return {\n                x: vd.abs_x,\n                y: vd.abs_y\n            };\n        },\n        get_size: function () {\n            var vd = this._data.view;\n            return {\n                w: vd.width,\n                h: vd.height\n            }\n        }\n    };\n\n\n    jm.mind = function () {\n        this.name = null;\n        this.author = null;\n        this.version = null;\n        this.root = null;\n        this.selected = null;\n        this.nodes = {};\n    };\n\n    jm.mind.prototype = {\n        get_node: function (nodeid) {\n            if (nodeid in this.nodes) {\n                return this.nodes[nodeid];\n            } else {\n                logger.warn('the node[id=' + nodeid + '] can not be found');\n                return null;\n            }\n        },\n\n        set_root: function (nodeid, topic, data) {\n            if (this.root == null) {\n                this.root = new jm.node(nodeid, 0, topic, data, true);\n                this._put_node(this.root);\n            } else {\n                logger.error('root node is already exist');\n            }\n        },\n\n        add_node: function (parent_node, nodeid, topic, data, idx, direction, expanded) {\n            if (!jm.util.is_node(parent_node)) {\n                var the_parent_node = this.get_node(parent_node);\n                if (!the_parent_node) {\n                    logger.error('the parent_node[id=' + parent_node + '] can not be found.');\n                    return null;\n                } else {\n                    return this.add_node(the_parent_node, nodeid, topic, data, idx, direction, expanded);\n                }\n            }\n            var nodeindex = idx || -1;\n            var node = null;\n            if (parent_node.isroot) {\n                var d = jm.direction.right;\n                if (isNaN(direction)) {\n                    var children = parent_node.children;\n                    var children_len = children.length;\n                    var r = 0;\n                    for (var i = 0; i < children_len; i++) { if (children[i].direction === jm.direction.left) { r--; } else { r++; } }\n                    d = (children_len > 1 && r > 0) ? jm.direction.left : jm.direction.right\n                } else {\n                    d = (direction != jm.direction.left) ? jm.direction.right : jm.direction.left;\n                }\n                node = new jm.node(nodeid, nodeindex, topic, data, false, parent_node, d, expanded);\n            } else {\n                node = new jm.node(nodeid, nodeindex, topic, data, false, parent_node, parent_node.direction, expanded);\n            }\n            if (this._put_node(node)) {\n                parent_node.children.push(node);\n                this._reindex(parent_node);\n            } else {\n                logger.error('fail, the nodeid \\'' + node.id + '\\' has been already exist.');\n                node = null;\n            }\n            return node;\n        },\n\n        insert_node_before: function (node_before, nodeid, topic, data) {\n            if (!jm.util.is_node(node_before)) {\n                var the_node_before = this.get_node(node_before);\n                if (!the_node_before) {\n                    logger.error('the node_before[id=' + node_before + '] can not be found.');\n                    return null;\n                } else {\n                    return this.insert_node_before(the_node_before, nodeid, topic, data);\n                }\n            }\n            var node_index = node_before.index - 0.5;\n            return this.add_node(node_before.parent, nodeid, topic, data, node_index);\n        },\n\n        get_node_before: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return null;\n                } else {\n                    return this.get_node_before(the_node);\n                }\n            }\n            if (node.isroot) { return null; }\n            var idx = node.index - 2;\n            if (idx >= 0) {\n                return node.parent.children[idx];\n            } else {\n                return null;\n            }\n        },\n\n        insert_node_after: function (node_after, nodeid, topic, data) {\n            if (!jm.util.is_node(node_after)) {\n                var the_node_after = this.get_node(node_before);\n                if (!the_node_after) {\n                    logger.error('the node_after[id=' + node_after + '] can not be found.');\n                    return null;\n                } else {\n                    return this.insert_node_after(the_node_after, nodeid, topic, data);\n                }\n            }\n            var node_index = node_after.index + 0.5;\n            return this.add_node(node_after.parent, nodeid, topic, data, node_index);\n        },\n\n        get_node_after: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return null;\n                } else {\n                    return this.get_node_after(the_node);\n                }\n            }\n            if (node.isroot) { return null; }\n            var idx = node.index;\n            var brothers = node.parent.children;\n            if (brothers.length >= idx) {\n                return node.parent.children[idx];\n            } else {\n                return null;\n            }\n        },\n\n        move_node: function (node, beforeid, parentid, direction) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return null;\n                } else {\n                    return this.move_node(the_node, beforeid, parentid, direction);\n                }\n            }\n            if (!parentid) {\n                parentid = node.parent.id;\n            }\n            return this._move_node(node, beforeid, parentid, direction);\n        },\n\n        _flow_node_direction: function (node, direction) {\n            if (typeof direction === 'undefined') {\n                direction = node.direction;\n            } else {\n                node.direction = direction;\n            }\n            var len = node.children.length;\n            while (len--) {\n                this._flow_node_direction(node.children[len], direction);\n            }\n        },\n\n        _move_node_internal: function (node, beforeid) {\n            if (!!node && !!beforeid) {\n                if (beforeid == '_last_') {\n                    node.index = -1;\n                    this._reindex(node.parent);\n                } else if (beforeid == '_first_') {\n                    node.index = 0;\n                    this._reindex(node.parent);\n                } else {\n                    var node_before = (!!beforeid) ? this.get_node(beforeid) : null;\n                    if (node_before != null && node_before.parent != null && node_before.parent.id == node.parent.id) {\n                        node.index = node_before.index - 0.5;\n                        this._reindex(node.parent);\n                    }\n                }\n            }\n            return node;\n        },\n\n        _move_node: function (node, beforeid, parentid, direction) {\n            if (!!node && !!parentid) {\n                if (node.parent.id != parentid) {\n                    // remove from parent's children\n                    var sibling = node.parent.children;\n                    var si = sibling.length;\n                    while (si--) {\n                        if (sibling[si].id == node.id) {\n                            sibling.splice(si, 1);\n                            break;\n                        }\n                    }\n                    node.parent = this.get_node(parentid);\n                    node.parent.children.push(node);\n                }\n\n                if (node.parent.isroot) {\n                    if (direction == jm.direction.left) {\n                        node.direction = direction;\n                    } else {\n                        node.direction = jm.direction.right;\n                    }\n                } else {\n                    node.direction = node.parent.direction;\n                }\n                this._move_node_internal(node, beforeid);\n                this._flow_node_direction(node);\n            }\n            return node;\n        },\n\n        remove_node: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return false;\n                } else {\n                    return this.remove_node(the_node);\n                }\n            }\n            if (!node) {\n                logger.error('fail, the node can not be found');\n                return false;\n            }\n            if (node.isroot) {\n                logger.error('fail, can not remove root node');\n                return false;\n            }\n            if (this.selected != null && this.selected.id == node.id) {\n                this.selected = null;\n            }\n            // clean all subordinate nodes\n            var children = node.children;\n            var ci = children.length;\n            while (ci--) {\n                this.remove_node(children[ci]);\n            }\n            // clean all children\n            children.length = 0;\n            // remove from parent's children\n            var sibling = node.parent.children;\n            var si = sibling.length;\n            while (si--) {\n                if (sibling[si].id == node.id) {\n                    sibling.splice(si, 1);\n                    break;\n                }\n            }\n            // remove from global nodes\n            delete this.nodes[node.id];\n            // clean all properties\n            for (var k in node) {\n                delete node[k];\n            }\n            // remove it's self\n            node = null;\n            //delete node;\n            return true;\n        },\n\n        _put_node: function (node) {\n            if (node.id in this.nodes) {\n                logger.warn('the nodeid \\'' + node.id + '\\' has been already exist.');\n                return false;\n            } else {\n                this.nodes[node.id] = node;\n                return true;\n            }\n        },\n\n        _reindex: function (node) {\n            if (node instanceof jm.node) {\n                node.children.sort(jm.node.compare);\n                for (var i = 0; i < node.children.length; i++) {\n                    node.children[i].index = i + 1;\n                }\n            }\n        },\n    };\n\n    jm.format = {\n        node_tree: {\n            example: {\n                \"meta\": {\n                    \"name\": __name__,\n                    \"author\": __author__,\n                    \"version\": __version__\n                },\n                \"format\": \"node_tree\",\n                \"data\": { \"id\": \"root\", \"topic\": \"jsMind Example\" }\n            },\n            get_mind: function (source) {\n                var df = jm.format.node_tree;\n                var mind = new jm.mind();\n                mind.name = source.meta.name;\n                mind.author = source.meta.author;\n                mind.version = source.meta.version;\n                df._parse(mind, source.data);\n                return mind;\n            },\n            get_data: function (mind) {\n                var df = jm.format.node_tree;\n                var json = {};\n                json.meta = {\n                    name: mind.name,\n                    author: mind.author,\n                    version: mind.version\n                };\n                json.format = 'node_tree';\n                json.data = df._buildnode(mind.root);\n                return json;\n            },\n\n            _parse: function (mind, node_root) {\n                var df = jm.format.node_tree;\n                var data = df._extract_data(node_root);\n                mind.set_root(node_root.id, node_root.topic, data);\n                if ('children' in node_root) {\n                    var children = node_root.children;\n                    for (var i = 0; i < children.length; i++) {\n                        df._extract_subnode(mind, mind.root, children[i]);\n                    }\n                }\n            },\n\n            _extract_data: function (node_json) {\n                var data = {};\n                for (var k in node_json) {\n                    if (k == 'id' || k == 'topic' || k == 'children' || k == 'direction' || k == 'expanded') {\n                        continue;\n                    }\n                    data[k] = node_json[k];\n                }\n                return data;\n            },\n\n            _extract_subnode: function (mind, node_parent, node_json) {\n                var df = jm.format.node_tree;\n                var data = df._extract_data(node_json);\n                var d = null;\n                if (node_parent.isroot) {\n                    d = node_json.direction == 'left' ? jm.direction.left : jm.direction.right;\n                }\n                var node = mind.add_node(node_parent, node_json.id, node_json.topic, data, null, d, node_json.expanded);\n                if ('children' in node_json) {\n                    var children = node_json.children;\n                    for (var i = 0; i < children.length; i++) {\n                        df._extract_subnode(mind, node, children[i]);\n                    }\n                }\n            },\n\n            _buildnode: function (node) {\n                var df = jm.format.node_tree;\n                if (!(node instanceof jm.node)) { return; }\n                var o = {\n                    id: node.id,\n                    topic: node.topic,\n                    expanded: node.expanded\n                };\n                if (!!node.parent && node.parent.isroot) {\n                    o.direction = node.direction == jm.direction.left ? 'left' : 'right';\n                }\n                if (node.data != null) {\n                    var node_data = node.data;\n                    for (var k in node_data) {\n                        o[k] = node_data[k];\n                    }\n                }\n                var children = node.children;\n                if (children.length > 0) {\n                    o.children = [];\n                    for (var i = 0; i < children.length; i++) {\n                        o.children.push(df._buildnode(children[i]));\n                    }\n                }\n                return o;\n            }\n        },\n\n        node_array: {\n            example: {\n                \"meta\": {\n                    \"name\": __name__,\n                    \"author\": __author__,\n                    \"version\": __version__\n                },\n                \"format\": \"node_array\",\n                \"data\": [\n                    { \"id\": \"root\", \"topic\": \"jsMind Example\", \"isroot\": true }\n                ]\n            },\n\n            get_mind: function (source) {\n                var df = jm.format.node_array;\n                var mind = new jm.mind();\n                mind.name = source.meta.name;\n                mind.author = source.meta.author;\n                mind.version = source.meta.version;\n                df._parse(mind, source.data);\n                return mind;\n            },\n\n            get_data: function (mind) {\n                var df = jm.format.node_array;\n                var json = {};\n                json.meta = {\n                    name: mind.name,\n                    author: mind.author,\n                    version: mind.version\n                };\n                json.format = 'node_array';\n                json.data = [];\n                df._array(mind, json.data);\n                return json;\n            },\n\n            _parse: function (mind, node_array) {\n                var df = jm.format.node_array;\n                var narray = node_array.slice(0);\n                // reverse array for improving looping performance\n                narray.reverse();\n                var root_id = df._extract_root(mind, narray);\n                if (!!root_id) {\n                    df._extract_subnode(mind, root_id, narray);\n                } else {\n                    logger.error('root node can not be found');\n                }\n            },\n\n            _extract_root: function (mind, node_array) {\n                var df = jm.format.node_array;\n                var i = node_array.length;\n                while (i--) {\n                    if ('isroot' in node_array[i] && node_array[i].isroot) {\n                        var root_json = node_array[i];\n                        var data = df._extract_data(root_json);\n                        mind.set_root(root_json.id, root_json.topic, data);\n                        node_array.splice(i, 1);\n                        return root_json.id;\n                    }\n                }\n                return null;\n            },\n\n            _extract_subnode: function (mind, parentid, node_array) {\n                var df = jm.format.node_array;\n                var i = node_array.length;\n                var node_json = null;\n                var data = null;\n                var extract_count = 0;\n                while (i--) {\n                    node_json = node_array[i];\n                    if (node_json.parentid == parentid) {\n                        data = df._extract_data(node_json);\n                        var d = null;\n                        var node_direction = node_json.direction;\n                        if (!!node_direction) {\n                            d = node_direction == 'left' ? jm.direction.left : jm.direction.right;\n                        }\n                        mind.add_node(parentid, node_json.id, node_json.topic, data, null, d, node_json.expanded);\n                        node_array.splice(i, 1);\n                        extract_count++;\n                        var sub_extract_count = df._extract_subnode(mind, node_json.id, node_array);\n                        if (sub_extract_count > 0) {\n                            // reset loop index after extract subordinate node\n                            i = node_array.length;\n                            extract_count += sub_extract_count;\n                        }\n                    }\n                }\n                return extract_count;\n            },\n\n            _extract_data: function (node_json) {\n                var data = {};\n                for (var k in node_json) {\n                    if (k == 'id' || k == 'topic' || k == 'parentid' || k == 'isroot' || k == 'direction' || k == 'expanded') {\n                        continue;\n                    }\n                    data[k] = node_json[k];\n                }\n                return data;\n            },\n\n            _array: function (mind, node_array) {\n                var df = jm.format.node_array;\n                df._array_node(mind.root, node_array);\n            },\n\n            _array_node: function (node, node_array) {\n                var df = jm.format.node_array;\n                if (!(node instanceof jm.node)) { return; }\n                var o = {\n                    id: node.id,\n                    topic: node.topic,\n                    expanded: node.expanded\n                };\n                if (!!node.parent) {\n                    o.parentid = node.parent.id;\n                }\n                if (node.isroot) {\n                    o.isroot = true;\n                }\n                if (!!node.parent && node.parent.isroot) {\n                    o.direction = node.direction == jm.direction.left ? 'left' : 'right';\n                }\n                if (node.data != null) {\n                    var node_data = node.data;\n                    for (var k in node_data) {\n                        o[k] = node_data[k];\n                    }\n                }\n                node_array.push(o);\n                var ci = node.children.length;\n                for (var i = 0; i < ci; i++) {\n                    df._array_node(node.children[i], node_array);\n                }\n            },\n        },\n\n        freemind: {\n            example: {\n                \"meta\": {\n                    \"name\": __name__,\n                    \"author\": __author__,\n                    \"version\": __version__\n                },\n                \"format\": \"freemind\",\n                \"data\": \"<map version=\\\"1.0.1\\\"><node ID=\\\"root\\\" TEXT=\\\"freemind Example\\\"/></map>\"\n            },\n            get_mind: function (source) {\n                var df = jm.format.freemind;\n                var mind = new jm.mind();\n                mind.name = source.meta.name;\n                mind.author = source.meta.author;\n                mind.version = source.meta.version;\n                var xml = source.data;\n                var xml_doc = df._parse_xml(xml);\n                var xml_root = df._find_root(xml_doc);\n                df._load_node(mind, null, xml_root);\n                return mind;\n            },\n\n            get_data: function (mind) {\n                var df = jm.format.freemind;\n                var json = {};\n                json.meta = {\n                    name: mind.name,\n                    author: mind.author,\n                    version: mind.version\n                };\n                json.format = 'freemind';\n                var xmllines = [];\n                xmllines.push('<map version=\\\"1.0.1\\\">');\n                df._buildmap(mind.root, xmllines);\n                xmllines.push('</map>');\n                json.data = xmllines.join(' ');\n                return json;\n            },\n\n            _parse_xml: function (xml) {\n                var xml_doc = null;\n                if (window.DOMParser) {\n                    var parser = new DOMParser();\n                    xml_doc = parser.parseFromString(xml, 'text/xml');\n                } else { // Internet Explorer\n                    xml_doc = new ActiveXObject('Microsoft.XMLDOM');\n                    xml_doc.async = false;\n                    xml_doc.loadXML(xml);\n                }\n                return xml_doc;\n            },\n\n            _find_root: function (xml_doc) {\n                var nodes = xml_doc.childNodes;\n                var node = null;\n                var root = null;\n                var n = null;\n                for (var i = 0; i < nodes.length; i++) {\n                    n = nodes[i];\n                    if (n.nodeType == 1 && n.tagName == 'map') {\n                        node = n;\n                        break;\n                    }\n                }\n                if (!!node) {\n                    var ns = node.childNodes;\n                    node = null;\n                    for (var i = 0; i < ns.length; i++) {\n                        n = ns[i];\n                        if (n.nodeType == 1 && n.tagName == 'node') {\n                            node = n;\n                            break;\n                        }\n                    }\n                }\n                return node;\n            },\n\n            _load_node: function (mind, parent_id, xml_node) {\n                var df = jm.format.freemind;\n                var node_id = xml_node.getAttribute('ID');\n                var node_topic = xml_node.getAttribute('TEXT');\n                // look for richcontent\n                if (node_topic == null) {\n                    var topic_children = xml_node.childNodes;\n                    var topic_child = null;\n                    for (var i = 0; i < topic_children.length; i++) {\n                        topic_child = topic_children[i];\n                        //logger.debug(topic_child.tagName);\n                        if (topic_child.nodeType == 1 && topic_child.tagName === 'richcontent') {\n                            node_topic = topic_child.textContent;\n                            break;\n                        }\n                    }\n                }\n                var node_data = df._load_attributes(xml_node);\n                var node_expanded = ('expanded' in node_data) ? (node_data.expanded == 'true') : true;\n                delete node_data.expanded;\n\n                var node_position = xml_node.getAttribute('POSITION');\n                var node_direction = null;\n                if (!!node_position) {\n                    node_direction = node_position == 'left' ? jm.direction.left : jm.direction.right;\n                }\n                //logger.debug(node_position +':'+ node_direction);\n                if (!!parent_id) {\n                    mind.add_node(parent_id, node_id, node_topic, node_data, null, node_direction, node_expanded);\n                } else {\n                    mind.set_root(node_id, node_topic, node_data);\n                }\n                var children = xml_node.childNodes;\n                var child = null;\n                for (var i = 0; i < children.length; i++) {\n                    child = children[i];\n                    if (child.nodeType == 1 && child.tagName == 'node') {\n                        df._load_node(mind, node_id, child);\n                    }\n                }\n            },\n\n            _load_attributes: function (xml_node) {\n                var children = xml_node.childNodes;\n                var attr = null;\n                var attr_data = {};\n                for (var i = 0; i < children.length; i++) {\n                    attr = children[i];\n                    if (attr.nodeType == 1 && attr.tagName === 'attribute') {\n                        attr_data[attr.getAttribute('NAME')] = attr.getAttribute('VALUE');\n                    }\n                }\n                return attr_data;\n            },\n\n            _buildmap: function (node, xmllines) {\n                var df = jm.format.freemind;\n                var pos = null;\n                if (!!node.parent && node.parent.isroot) {\n                    pos = node.direction === jm.direction.left ? 'left' : 'right';\n                }\n                xmllines.push('<node');\n                xmllines.push('ID=\\\"' + node.id + '\\\"');\n                if (!!pos) {\n                    xmllines.push('POSITION=\\\"' + pos + '\\\"');\n                }\n                xmllines.push('TEXT=\\\"' + node.topic + '\\\">');\n\n                // store expanded status as an attribute\n                xmllines.push('<attribute NAME=\\\"expanded\\\" VALUE=\\\"' + node.expanded + '\\\"/>');\n\n                // for attributes\n                var node_data = node.data;\n                if (node_data != null) {\n                    for (var k in node_data) {\n                        xmllines.push('<attribute NAME=\\\"' + k + '\\\" VALUE=\\\"' + node_data[k] + '\\\"/>');\n                    }\n                }\n\n                // for children\n                var children = node.children;\n                for (var i = 0; i < children.length; i++) {\n                    df._buildmap(children[i], xmllines);\n                }\n\n                xmllines.push('</node>');\n            },\n        },\n    };\n\n    // ============= utility object =============================================\n\n    jm.util = {\n        is_node: function (node) {\n            return !!node && node instanceof jm.node;\n        },\n        ajax: {\n            _xhr: function () {\n                var xhr = null;\n                if (window.XMLHttpRequest) {\n                    xhr = new XMLHttpRequest();\n                } else {\n                    try {\n                        xhr = new ActiveXObject('Microsoft.XMLHTTP');\n                    } catch (e) { }\n                }\n                return xhr;\n            },\n            _eurl: function (url) {\n                return encodeURIComponent(url);\n            },\n            request: function (url, param, method, callback, fail_callback) {\n                var a = jm.util.ajax;\n                var p = null;\n                var tmp_param = [];\n                for (var k in param) {\n                    tmp_param.push(a._eurl(k) + '=' + a._eurl(param[k]));\n                }\n                if (tmp_param.length > 0) {\n                    p = tmp_param.join('&');\n                }\n                var xhr = a._xhr();\n                if (!xhr) { return; }\n                xhr.onreadystatechange = function () {\n                    if (xhr.readyState == 4) {\n                        if (xhr.status == 200 || xhr.status == 0) {\n                            if (typeof callback === 'function') {\n                                var data = jm.util.json.string2json(xhr.responseText);\n                                if (data != null) {\n                                    callback(data);\n                                } else {\n                                    callback(xhr.responseText);\n                                }\n                            }\n                        } else {\n                            if (typeof fail_callback === 'function') {\n                                fail_callback(xhr);\n                            } else {\n                                logger.error('xhr request failed.', xhr);\n                            }\n                        }\n                    }\n                }\n                method = method || 'GET';\n                xhr.open(method, url, true);\n                xhr.setRequestHeader('If-Modified-Since', '0');\n                if (method == 'POST') {\n                    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded;charset=utf-8');\n                    xhr.send(p);\n                } else {\n                    xhr.send();\n                }\n            },\n            get: function (url, callback) {\n                return jm.util.ajax.request(url, {}, 'GET', callback);\n            },\n            post: function (url, param, callback) {\n                return jm.util.ajax.request(url, param, 'POST', callback);\n            }\n        },\n\n        dom: {\n            //target,eventType,handler\n            add_event: function (t, e, h) {\n                if (!!t.addEventListener) {\n                    t.addEventListener(e, h, false);\n                } else {\n                    t.attachEvent('on' + e, h);\n                }\n            }\n        },\n\n        file: {\n            read: function (file_data, fn_callback) {\n                var reader = new FileReader();\n                reader.onload = function () {\n                    if (typeof fn_callback === 'function') {\n                        fn_callback(this.result, file_data.name);\n                    }\n                };\n                reader.readAsText(file_data);\n            },\n\n            save: function (file_data, type, name) {\n                var blob;\n                if (typeof $w.Blob === 'function') {\n                    blob = new Blob([file_data], { type: type });\n                } else {\n                    var BlobBuilder = $w.BlobBuilder || $w.MozBlobBuilder || $w.WebKitBlobBuilder || $w.MSBlobBuilder;\n                    var bb = new BlobBuilder();\n                    bb.append(file_data);\n                    blob = bb.getBlob(type);\n                }\n                if (navigator.msSaveBlob) {\n                    navigator.msSaveBlob(blob, name);\n                } else {\n                    var URL = $w.URL || $w.webkitURL;\n                    var bloburl = URL.createObjectURL(blob);\n                    var anchor = $c('a');\n                    if ('download' in anchor) {\n                        anchor.style.visibility = 'hidden';\n                        anchor.href = bloburl;\n                        anchor.download = name;\n                        $d.body.appendChild(anchor);\n                        var evt = $d.createEvent('MouseEvents');\n                        evt.initEvent('click', true, true);\n                        anchor.dispatchEvent(evt);\n                        $d.body.removeChild(anchor);\n                    } else {\n                        location.href = bloburl;\n                    }\n                }\n            }\n        },\n\n        json: {\n            json2string: function (json) {\n                if (!!JSON) {\n                    try {\n                        var json_str = JSON.stringify(json);\n                        return json_str;\n                    } catch (e) {\n                        logger.warn(e);\n                        logger.warn('can not convert to string');\n                        return null;\n                    }\n                }\n            },\n            string2json: function (json_str) {\n                if (!!JSON) {\n                    try {\n                        var json = JSON.parse(json_str);\n                        return json;\n                    } catch (e) {\n                        logger.warn(e);\n                        logger.warn('can not parse to json');\n                        return null;\n                    }\n                }\n            },\n            merge: function (b, a) {\n                for (var o in a) {\n                    if (o in b) {\n                        if (typeof b[o] === 'object' &&\n                            Object.prototype.toString.call(b[o]).toLowerCase() == '[object object]' &&\n                            !b[o].length) {\n                            jm.util.json.merge(b[o], a[o]);\n                        } else {\n                            b[o] = a[o];\n                        }\n                    } else {\n                        b[o] = a[o];\n                    }\n                }\n                return b;\n            }\n        },\n\n        uuid: {\n            newid: function () {\n                return (new Date().getTime().toString(16) + Math.random().toString(16).substr(2)).substr(2, 16);\n            }\n        },\n\n        text: {\n            is_empty: function (s) {\n                if (!s) { return true; }\n                return s.replace(/\\s*/, '').length == 0;\n            }\n        }\n    };\n\n    jm.prototype = {\n        init: function () {\n            if (this.inited) { return; }\n            this.inited = true;\n\n            var opts = this.options;\n\n            var opts_layout = {\n                mode: opts.mode,\n                hspace: opts.layout.hspace,\n                vspace: opts.layout.vspace,\n                pspace: opts.layout.pspace\n            }\n            var opts_view = {\n                container: opts.container,\n                support_html: opts.support_html,\n                engine: opts.view.engine,\n                hmargin: opts.view.hmargin,\n                vmargin: opts.view.vmargin,\n                line_width: opts.view.line_width,\n                line_color: opts.view.line_color\n            };\n            // create instance of function provider\n            this.data = new jm.data_provider(this);\n            this.layout = new jm.layout_provider(this, opts_layout);\n            this.view = new jm.view_provider(this, opts_view);\n            this.shortcut = new jm.shortcut_provider(this, opts.shortcut);\n\n            this.data.init();\n            this.layout.init();\n            this.view.init();\n            this.shortcut.init();\n\n            this._event_bind();\n\n            jm.init_plugins(this);\n        },\n\n        enable_edit: function () {\n            this.options.editable = true;\n        },\n\n        disable_edit: function () {\n            this.options.editable = false;\n        },\n\n        // call enable_event_handle('dblclick')\n        // options are 'mousedown', 'click', 'dblclick'\n        enable_event_handle: function (event_handle) {\n            this.options.default_event_handle['enable_' + event_handle + '_handle'] = true;\n        },\n\n        // call disable_event_handle('dblclick')\n        // options are 'mousedown', 'click', 'dblclick'\n        disable_event_handle: function (event_handle) {\n            this.options.default_event_handle['enable_' + event_handle + '_handle'] = false;\n        },\n\n        get_editable: function () {\n            return this.options.editable;\n        },\n\n        set_theme: function (theme) {\n            var theme_old = this.options.theme;\n            this.options.theme = (!!theme) ? theme : null;\n            if (theme_old != this.options.theme) {\n                this.view.reset_theme();\n                this.view.reset_custom_style();\n            }\n        },\n        _event_bind: function () {\n            this.view.add_event(this, 'mousedown', this.mousedown_handle);\n            this.view.add_event(this, 'click', this.click_handle);\n            this.view.add_event(this, 'dblclick', this.dblclick_handle);\n        },\n\n        mousedown_handle: function (e) {\n            if (!this.options.default_event_handle['enable_mousedown_handle']) {\n                return;\n            }\n            var element = e.target || event.srcElement;\n            var nodeid = this.view.get_binded_nodeid(element);\n            if (!!nodeid) {\n                if (element.tagName.toLowerCase() == 'jmnode') {\n                    this.select_node(nodeid);\n                }\n            } else {\n                this.select_clear();\n            }\n        },\n\n        click_handle: function (e) {\n            if (!this.options.default_event_handle['enable_click_handle']) {\n                return;\n            }\n            var element = e.target || event.srcElement;\n            var isexpander = this.view.is_expander(element);\n            if (isexpander) {\n                var nodeid = this.view.get_binded_nodeid(element);\n                if (!!nodeid) {\n                    this.toggle_node(nodeid);\n                }\n            }\n        },\n\n        dblclick_handle: function (e) {\n            if (!this.options.default_event_handle['enable_dblclick_handle']) {\n                return;\n            }\n            if (this.get_editable()) {\n                var element = e.target || event.srcElement;\n                var nodeid = this.view.get_binded_nodeid(element);\n                if (!!nodeid) {\n                    this.begin_edit(nodeid);\n                }\n            }\n        },\n\n        begin_edit: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return false;\n                } else {\n                    return this.begin_edit(the_node);\n                }\n            }\n            if (this.get_editable()) {\n                this.view.edit_node_begin(node);\n            } else {\n                logger.error('fail, this mind map is not editable.');\n                return;\n            }\n        },\n\n        end_edit: function () {\n            this.view.edit_node_end();\n        },\n\n        toggle_node: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.toggle_node(the_node);\n                }\n            }\n            if (node.isroot) { return; }\n            this.view.save_location(node);\n            this.layout.toggle_node(node);\n            this.view.relayout();\n            this.view.restore_location(node);\n        },\n\n        expand_node: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.expand_node(the_node);\n                }\n            }\n            if (node.isroot) { return; }\n            this.view.save_location(node);\n            this.layout.expand_node(node);\n            this.view.relayout();\n            this.view.restore_location(node);\n        },\n\n        collapse_node: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.collapse_node(the_node);\n                }\n            }\n            if (node.isroot) { return; }\n            this.view.save_location(node);\n            this.layout.collapse_node(node);\n            this.view.relayout();\n            this.view.restore_location(node);\n        },\n\n        expand_all: function () {\n            this.layout.expand_all();\n            this.view.relayout();\n        },\n\n        collapse_all: function () {\n            this.layout.collapse_all();\n            this.view.relayout();\n        },\n\n        expand_to_depth: function (depth) {\n            this.layout.expand_to_depth(depth);\n            this.view.relayout();\n        },\n\n        _reset: function () {\n            this.view.reset();\n            this.layout.reset();\n            this.data.reset();\n        },\n\n        _show: function (mind) {\n            var m = mind || jm.format.node_array.example;\n\n            this.mind = this.data.load(m);\n            if (!this.mind) {\n                logger.error('data.load error');\n                return;\n            } else {\n                logger.debug('data.load ok');\n            }\n\n            this.view.load();\n            logger.debug('view.load ok');\n\n            this.layout.layout();\n            logger.debug('layout.layout ok');\n\n            this.view.show(true);\n            logger.debug('view.show ok');\n\n            this.invoke_event_handle(jm.event_type.show, { data: [mind] });\n        },\n\n        show: function (mind) {\n            this._reset();\n            this._show(mind);\n        },\n\n        get_meta: function () {\n            return {\n                name: this.mind.name,\n                author: this.mind.author,\n                version: this.mind.version\n            };\n        },\n\n        get_data: function (data_format) {\n            var df = data_format || 'node_tree';\n            return this.data.get_data(df);\n        },\n\n        get_root: function () {\n            return this.mind.root;\n        },\n\n        get_node: function (nodeid) {\n            return this.mind.get_node(nodeid);\n        },\n\n        add_node: function (parent_node, nodeid, topic, data) {\n            if (this.get_editable()) {\n                var node = this.mind.add_node(parent_node, nodeid, topic, data);\n                if (!!node) {\n                    this.view.add_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                    this.view.reset_node_custom_style(node);\n                    this.expand_node(parent_node);\n                    this.invoke_event_handle(jm.event_type.edit, { evt: 'add_node', data: [parent_node.id, nodeid, topic, data], node: nodeid });\n                }\n                return node;\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        insert_node_before: function (node_before, nodeid, topic, data) {\n            if (this.get_editable()) {\n                var beforeid = jm.util.is_node(node_before) ? node_before.id : node_before;\n                var node = this.mind.insert_node_before(node_before, nodeid, topic, data);\n                if (!!node) {\n                    this.view.add_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                    this.invoke_event_handle(jm.event_type.edit, { evt: 'insert_node_before', data: [beforeid, nodeid, topic, data], node: nodeid });\n                }\n                return node;\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        insert_node_after: function (node_after, nodeid, topic, data) {\n            if (this.get_editable()) {\n                var afterid = jm.util.is_node(node_after) ? node_after.id : node_after;\n                var node = this.mind.insert_node_after(node_after, nodeid, topic, data);\n                if (!!node) {\n                    this.view.add_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                    this.invoke_event_handle(jm.event_type.edit, { evt: 'insert_node_after', data: [afterid, nodeid, topic, data], node: nodeid });\n                }\n                return node;\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        remove_node: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return false;\n                } else {\n                    return this.remove_node(the_node);\n                }\n            }\n            if (this.get_editable()) {\n                if (node.isroot) {\n                    logger.error('fail, can not remove root node');\n                    return false;\n                }\n                var nodeid = node.id;\n                var parentid = node.parent.id;\n                var parent_node = this.get_node(parentid);\n                this.view.save_location(parent_node);\n                this.view.remove_node(node);\n                this.mind.remove_node(node);\n                this.layout.layout();\n                this.view.show(false);\n                this.view.restore_location(parent_node);\n                this.invoke_event_handle(jm.event_type.edit, { evt: 'remove_node', data: [nodeid], node: parentid });\n                return true;\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return false;\n            }\n        },\n\n        update_node: function (nodeid, topic) {\n            if (this.get_editable()) {\n                if (jm.util.text.is_empty(topic)) {\n                    logger.warn('fail, topic can not be empty');\n                    return;\n                }\n                var node = this.get_node(nodeid);\n                if (!!node) {\n                    if (node.topic === topic) {\n                        logger.info('nothing changed');\n                        this.view.update_node(node);\n                        return;\n                    }\n                    node.topic = topic;\n                    this.view.update_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                    this.invoke_event_handle(jm.event_type.edit, { evt: 'update_node', data: [nodeid, topic], node: nodeid });\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return;\n            }\n        },\n\n        move_node: function (nodeid, beforeid, parentid, direction) {\n            if (this.get_editable()) {\n                var node = this.mind.move_node(nodeid, beforeid, parentid, direction);\n                if (!!node) {\n                    this.view.update_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                    this.invoke_event_handle(jm.event_type.edit, { evt: 'move_node', data: [nodeid, beforeid, parentid, direction], node: nodeid });\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return;\n            }\n        },\n\n        select_node: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.select_node(the_node);\n                }\n            }\n            if (!this.layout.is_visible(node)) {\n                return;\n            }\n            this.mind.selected = node;\n            this.view.select_node(node);\n        },\n\n        get_selected_node: function () {\n            if (!!this.mind) {\n                return this.mind.selected;\n            } else {\n                return null;\n            }\n        },\n\n        select_clear: function () {\n            if (!!this.mind) {\n                this.mind.selected = null;\n                this.view.select_clear();\n            }\n        },\n\n        is_node_visible: function (node) {\n            return this.layout.is_visible(node);\n        },\n\n        find_node_before: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.find_node_before(the_node);\n                }\n            }\n            if (node.isroot) { return null; }\n            var n = null;\n            if (node.parent.isroot) {\n                var c = node.parent.children;\n                var prev = null;\n                var ni = null;\n                for (var i = 0; i < c.length; i++) {\n                    ni = c[i];\n                    if (node.direction === ni.direction) {\n                        if (node.id === ni.id) {\n                            n = prev;\n                        }\n                        prev = ni;\n                    }\n                }\n            } else {\n                n = this.mind.get_node_before(node);\n            }\n            return n;\n        },\n\n        find_node_after: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.find_node_after(the_node);\n                }\n            }\n            if (node.isroot) { return null; }\n            var n = null;\n            if (node.parent.isroot) {\n                var c = node.parent.children;\n                var getthis = false;\n                var ni = null;\n                for (var i = 0; i < c.length; i++) {\n                    ni = c[i];\n                    if (node.direction === ni.direction) {\n                        if (getthis) {\n                            n = ni;\n                            break;\n                        }\n                        if (node.id === ni.id) {\n                            getthis = true;\n                        }\n                    }\n                }\n            } else {\n                n = this.mind.get_node_after(node);\n            }\n            return n;\n        },\n\n        set_node_color: function (nodeid, bgcolor, fgcolor) {\n            if (this.get_editable()) {\n                var node = this.mind.get_node(nodeid);\n                if (!!node) {\n                    if (!!bgcolor) {\n                        node.data['background-color'] = bgcolor;\n                    }\n                    if (!!fgcolor) {\n                        node.data['foreground-color'] = fgcolor;\n                    }\n                    this.view.reset_node_custom_style(node);\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        set_node_font_style: function (nodeid, size, weight, style) {\n            if (this.get_editable()) {\n                var node = this.mind.get_node(nodeid);\n                if (!!node) {\n                    if (!!size) {\n                        node.data['font-size'] = size;\n                    }\n                    if (!!weight) {\n                        node.data['font-weight'] = weight;\n                    }\n                    if (!!style) {\n                        node.data['font-style'] = style;\n                    }\n                    this.view.reset_node_custom_style(node);\n                    this.view.update_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        set_node_background_image: function (nodeid, image, width, height, rotation) {\n            if (this.get_editable()) {\n                var node = this.mind.get_node(nodeid);\n                if (!!node) {\n                    if (!!image) {\n                        node.data['background-image'] = image;\n                    }\n                    if (!!width) {\n                        node.data['width'] = width;\n                    }\n                    if (!!height) {\n                        node.data['height'] = height;\n                    }\n                    if (!!rotation) {\n                        node.data['background-rotation'] = rotation;\n                    }\n                    this.view.reset_node_custom_style(node);\n                    this.view.update_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        set_node_background_rotation: function (nodeid, rotation) {\n            if (this.get_editable()) {\n                var node = this.mind.get_node(nodeid);\n                if (!!node) {\n                    if (!node.data['background-image']) {\n                        logger.error('fail, only can change rotation angle of node with background image');\n                        return null;\n                    }\n                    node.data['background-rotation'] = rotation;\n                    this.view.reset_node_custom_style(node);\n                    this.view.update_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        resize: function () {\n            this.view.resize();\n        },\n\n        // callback(type ,data)\n        add_event_listener: function (callback) {\n            if (typeof callback === 'function') {\n                this.event_handles.push(callback);\n            }\n        },\n\n        invoke_event_handle: function (type, data) {\n            var j = this;\n            $w.setTimeout(function () {\n                j._invoke_event_handle(type, data);\n            }, 0);\n        },\n\n        _invoke_event_handle: function (type, data) {\n            var l = this.event_handles.length;\n            for (var i = 0; i < l; i++) {\n                this.event_handles[i](type, data);\n            }\n        }\n\n    };\n\n    // ============= data provider =============================================\n\n    jm.data_provider = function (jm) {\n        this.jm = jm;\n    };\n\n    jm.data_provider.prototype = {\n        init: function () {\n            logger.debug('data.init');\n        },\n\n        reset: function () {\n            logger.debug('data.reset');\n        },\n\n        load: function (mind_data) {\n            var df = null;\n            var mind = null;\n            if (typeof mind_data === 'object') {\n                if (!!mind_data.format) {\n                    df = mind_data.format;\n                } else {\n                    df = 'node_tree';\n                }\n            } else {\n                df = 'freemind';\n            }\n\n            if (df == 'node_array') {\n                mind = jm.format.node_array.get_mind(mind_data);\n            } else if (df == 'node_tree') {\n                mind = jm.format.node_tree.get_mind(mind_data);\n            } else if (df == 'freemind') {\n                mind = jm.format.freemind.get_mind(mind_data);\n            } else {\n                logger.warn('unsupported format');\n            }\n            return mind;\n        },\n\n        get_data: function (data_format) {\n            var data = null;\n            if (data_format == 'node_array') {\n                data = jm.format.node_array.get_data(this.jm.mind);\n            } else if (data_format == 'node_tree') {\n                data = jm.format.node_tree.get_data(this.jm.mind);\n            } else if (data_format == 'freemind') {\n                data = jm.format.freemind.get_data(this.jm.mind);\n            } else {\n                logger.error('unsupported ' + data_format + ' format');\n            }\n            return data;\n        },\n    };\n\n    // ============= layout provider ===========================================\n\n    jm.layout_provider = function (jm, options) {\n        this.opts = options;\n        this.jm = jm;\n        this.isside = (this.opts.mode == 'side');\n        this.bounds = null;\n\n        this.cache_valid = false;\n    };\n\n    jm.layout_provider.prototype = {\n        init: function () {\n            logger.debug('layout.init');\n        },\n        reset: function () {\n            logger.debug('layout.reset');\n            this.bounds = { n: 0, s: 0, w: 0, e: 0 };\n        },\n        layout: function () {\n            logger.debug('layout.layout');\n            this.layout_direction();\n            this.layout_offset();\n        },\n\n        layout_direction: function () {\n            this._layout_direction_root();\n        },\n\n        _layout_direction_root: function () {\n            var node = this.jm.mind.root;\n            // logger.debug(node);\n            var layout_data = null;\n            if ('layout' in node._data) {\n                layout_data = node._data.layout;\n            } else {\n                layout_data = {};\n                node._data.layout = layout_data;\n            }\n            var children = node.children;\n            var children_count = children.length;\n            layout_data.direction = jm.direction.center;\n            layout_data.side_index = 0;\n            if (this.isside) {\n                var i = children_count;\n                while (i--) {\n                    this._layout_direction_side(children[i], jm.direction.right, i);\n                }\n            } else {\n                var i = children_count;\n                var subnode = null;\n                while (i--) {\n                    subnode = children[i];\n                    if (subnode.direction == jm.direction.left) {\n                        this._layout_direction_side(subnode, jm.direction.left, i);\n                    } else {\n                        this._layout_direction_side(subnode, jm.direction.right, i);\n                    }\n                }\n                /*\n                var boundary = Math.ceil(children_count/2);\n                var i = children_count;\n                while(i--){\n                    if(i>=boundary){\n                        this._layout_direction_side(children[i],jm.direction.left, children_count-i-1);\n                    }else{\n                        this._layout_direction_side(children[i],jm.direction.right, i);\n                    }\n                }*/\n\n            }\n        },\n\n        _layout_direction_side: function (node, direction, side_index) {\n            var layout_data = null;\n            if ('layout' in node._data) {\n                layout_data = node._data.layout;\n            } else {\n                layout_data = {};\n                node._data.layout = layout_data;\n            }\n            var children = node.children;\n            var children_count = children.length;\n\n            layout_data.direction = direction;\n            layout_data.side_index = side_index;\n            var i = children_count;\n            while (i--) {\n                this._layout_direction_side(children[i], direction, i);\n            }\n        },\n\n        layout_offset: function () {\n            var node = this.jm.mind.root;\n            var layout_data = node._data.layout;\n            layout_data.offset_x = 0;\n            layout_data.offset_y = 0;\n            layout_data.outer_height = 0;\n            var children = node.children;\n            var i = children.length;\n            var left_nodes = [];\n            var right_nodes = [];\n            var subnode = null;\n            while (i--) {\n                subnode = children[i];\n                if (subnode._data.layout.direction == jm.direction.right) {\n                    right_nodes.unshift(subnode);\n                } else {\n                    left_nodes.unshift(subnode);\n                }\n            }\n            layout_data.left_nodes = left_nodes;\n            layout_data.right_nodes = right_nodes;\n            layout_data.outer_height_left = this._layout_offset_subnodes(left_nodes);\n            layout_data.outer_height_right = this._layout_offset_subnodes(right_nodes);\n            this.bounds.e = node._data.view.width / 2;\n            this.bounds.w = 0 - this.bounds.e;\n            //logger.debug(this.bounds.w);\n            this.bounds.n = 0;\n            this.bounds.s = Math.max(layout_data.outer_height_left, layout_data.outer_height_right);\n        },\n\n        // layout both the x and y axis\n        _layout_offset_subnodes: function (nodes) {\n            var total_height = 0;\n            var nodes_count = nodes.length;\n            var i = nodes_count;\n            var node = null;\n            var node_outer_height = 0;\n            var layout_data = null;\n            var base_y = 0;\n            var pd = null; // parent._data\n            while (i--) {\n                node = nodes[i];\n                layout_data = node._data.layout;\n                if (pd == null) {\n                    pd = node.parent._data;\n                }\n\n                node_outer_height = this._layout_offset_subnodes(node.children);\n                if (!node.expanded) {\n                    node_outer_height = 0;\n                    this.set_visible(node.children, false);\n                }\n                node_outer_height = Math.max(node._data.view.height, node_outer_height);\n\n                layout_data.outer_height = node_outer_height;\n                layout_data.offset_y = base_y - node_outer_height / 2;\n                layout_data.offset_x = this.opts.hspace * layout_data.direction + pd.view.width * (pd.layout.direction + layout_data.direction) / 2;\n                if (!node.parent.isroot) {\n                    layout_data.offset_x += this.opts.pspace * layout_data.direction;\n                }\n\n                base_y = base_y - node_outer_height - this.opts.vspace;\n                total_height += node_outer_height;\n            }\n            if (nodes_count > 1) {\n                total_height += this.opts.vspace * (nodes_count - 1);\n            }\n            i = nodes_count;\n            var middle_height = total_height / 2;\n            while (i--) {\n                node = nodes[i];\n                node._data.layout.offset_y += middle_height;\n            }\n            return total_height;\n        },\n\n        // layout the y axis only, for collapse/expand a node\n        _layout_offset_subnodes_height: function (nodes) {\n            var total_height = 0;\n            var nodes_count = nodes.length;\n            var i = nodes_count;\n            var node = null;\n            var node_outer_height = 0;\n            var layout_data = null;\n            var base_y = 0;\n            var pd = null; // parent._data\n            while (i--) {\n                node = nodes[i];\n                layout_data = node._data.layout;\n                if (pd == null) {\n                    pd = node.parent._data;\n                }\n\n                node_outer_height = this._layout_offset_subnodes_height(node.children);\n                if (!node.expanded) {\n                    node_outer_height = 0;\n                }\n                node_outer_height = Math.max(node._data.view.height, node_outer_height);\n\n                layout_data.outer_height = node_outer_height;\n                layout_data.offset_y = base_y - node_outer_height / 2;\n                base_y = base_y - node_outer_height - this.opts.vspace;\n                total_height += node_outer_height;\n            }\n            if (nodes_count > 1) {\n                total_height += this.opts.vspace * (nodes_count - 1);\n            }\n            i = nodes_count;\n            var middle_height = total_height / 2;\n            while (i--) {\n                node = nodes[i];\n                node._data.layout.offset_y += middle_height;\n                //logger.debug(node.topic);\n                //logger.debug(node._data.layout.offset_y);\n            }\n            return total_height;\n        },\n\n        get_node_offset: function (node) {\n            var layout_data = node._data.layout;\n            var offset_cache = null;\n            if (('_offset_' in layout_data) && this.cache_valid) {\n                offset_cache = layout_data._offset_;\n            } else {\n                offset_cache = { x: -1, y: -1 };\n                layout_data._offset_ = offset_cache;\n            }\n            if (offset_cache.x == -1 || offset_cache.y == -1) {\n                var x = layout_data.offset_x;\n                var y = layout_data.offset_y;\n                if (!node.isroot) {\n                    var offset_p = this.get_node_offset(node.parent);\n                    x += offset_p.x;\n                    y += offset_p.y;\n                }\n                offset_cache.x = x;\n                offset_cache.y = y;\n            }\n            return offset_cache;\n        },\n\n        get_node_point: function (node) {\n            var view_data = node._data.view;\n            var offset_p = this.get_node_offset(node);\n            //logger.debug(offset_p);\n            var p = {};\n            p.x = offset_p.x + view_data.width * (node._data.layout.direction - 1) / 2;\n            p.y = offset_p.y - view_data.height / 2;\n            //logger.debug(p);\n            return p;\n        },\n\n        get_node_point_in: function (node) {\n            var p = this.get_node_offset(node);\n            return p;\n        },\n\n        get_node_point_out: function (node) {\n            var layout_data = node._data.layout;\n            var pout_cache = null;\n            if (('_pout_' in layout_data) && this.cache_valid) {\n                pout_cache = layout_data._pout_;\n            } else {\n                pout_cache = { x: -1, y: -1 };\n                layout_data._pout_ = pout_cache;\n            }\n            if (pout_cache.x == -1 || pout_cache.y == -1) {\n                if (node.isroot) {\n                    pout_cache.x = 0;\n                    pout_cache.y = 0;\n                } else {\n                    var view_data = node._data.view;\n                    var offset_p = this.get_node_offset(node);\n                    pout_cache.x = offset_p.x + (view_data.width + this.opts.pspace) * node._data.layout.direction;\n                    pout_cache.y = offset_p.y;\n                    //logger.debug('pout');\n                    //logger.debug(pout_cache);\n                }\n            }\n            return pout_cache;\n        },\n\n        get_expander_point: function (node) {\n            var p = this.get_node_point_out(node);\n            var ex_p = {};\n            if (node._data.layout.direction == jm.direction.right) {\n                ex_p.x = p.x - this.opts.pspace;\n            } else {\n                ex_p.x = p.x;\n            }\n            ex_p.y = p.y - Math.ceil(this.opts.pspace / 2);\n            return ex_p;\n        },\n\n        get_min_size: function () {\n            var nodes = this.jm.mind.nodes;\n            var node = null;\n            var pout = null;\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                pout = this.get_node_point_out(node);\n                if (pout.x > this.bounds.e) { this.bounds.e = pout.x; }\n                if (pout.x < this.bounds.w) { this.bounds.w = pout.x; }\n            }\n            return {\n                w: this.bounds.e - this.bounds.w,\n                h: this.bounds.s - this.bounds.n\n            }\n        },\n\n        toggle_node: function (node) {\n            if (node.isroot) {\n                return;\n            }\n            if (node.expanded) {\n                this.collapse_node(node);\n            } else {\n                this.expand_node(node);\n            }\n        },\n\n        expand_node: function (node) {\n            node.expanded = true;\n            this.part_layout(node);\n            this.set_visible(node.children, true);\n        },\n\n        collapse_node: function (node) {\n            node.expanded = false;\n            this.part_layout(node);\n            this.set_visible(node.children, false);\n        },\n\n        expand_all: function () {\n            var nodes = this.jm.mind.nodes;\n            var c = 0;\n            var node;\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                if (!node.expanded) {\n                    node.expanded = true;\n                    c++;\n                }\n            }\n            if (c > 0) {\n                var root = this.jm.mind.root;\n                this.part_layout(root);\n                this.set_visible(root.children, true);\n            }\n        },\n\n        collapse_all: function () {\n            var nodes = this.jm.mind.nodes;\n            var c = 0;\n            var node;\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                if (node.expanded && !node.isroot) {\n                    node.expanded = false\n                    c++;\n                }\n            }\n            if (c > 0) {\n                var root = this.jm.mind.root;\n                this.part_layout(root);\n                this.set_visible(root.children, true);\n            }\n        },\n\n        expand_to_depth: function (target_depth, curr_nodes, curr_depth) {\n            if (target_depth < 1) { return; }\n            var nodes = curr_nodes || this.jm.mind.root.children;\n            var depth = curr_depth || 1;\n            var i = nodes.length;\n            var node = null;\n            while (i--) {\n                node = nodes[i];\n                if (depth < target_depth) {\n                    if (!node.expanded) {\n                        this.expand_node(node);\n                    }\n                    this.expand_to_depth(target_depth, node.children, depth + 1);\n                }\n                if (depth == target_depth) {\n                    if (node.expanded) {\n                        this.collapse_node(node);\n                    }\n                }\n            }\n        },\n\n        part_layout: function (node) {\n            var root = this.jm.mind.root;\n            if (!!root) {\n                var root_layout_data = root._data.layout;\n                if (node.isroot) {\n                    root_layout_data.outer_height_right = this._layout_offset_subnodes_height(root_layout_data.right_nodes);\n                    root_layout_data.outer_height_left = this._layout_offset_subnodes_height(root_layout_data.left_nodes);\n                } else {\n                    if (node._data.layout.direction == jm.direction.right) {\n                        root_layout_data.outer_height_right = this._layout_offset_subnodes_height(root_layout_data.right_nodes);\n                    } else {\n                        root_layout_data.outer_height_left = this._layout_offset_subnodes_height(root_layout_data.left_nodes);\n                    }\n                }\n                this.bounds.s = Math.max(root_layout_data.outer_height_left, root_layout_data.outer_height_right);\n                this.cache_valid = false;\n            } else {\n                logger.warn('can not found root node');\n            }\n        },\n\n        set_visible: function (nodes, visible) {\n            var i = nodes.length;\n            var node = null;\n            var layout_data = null;\n            while (i--) {\n                node = nodes[i];\n                layout_data = node._data.layout;\n                if (node.expanded) {\n                    this.set_visible(node.children, visible);\n                } else {\n                    this.set_visible(node.children, false);\n                }\n                if (!node.isroot) {\n                    node._data.layout.visible = visible;\n                }\n            }\n        },\n\n        is_expand: function (node) {\n            return node.expanded;\n        },\n\n        is_visible: function (node) {\n            var layout_data = node._data.layout;\n            if (('visible' in layout_data) && !layout_data.visible) {\n                return false;\n            } else {\n                return true;\n            }\n        }\n    };\n\n    jm.graph_canvas = function (view) {\n        this.opts = view.opts;\n        this.e_canvas = $c('canvas');\n        this.canvas_ctx = this.e_canvas.getContext('2d');\n        this.size = { w: 0, h: 0 };\n    };\n\n    jm.graph_canvas.prototype = {\n        element: function () {\n            return this.e_canvas;\n        },\n\n        set_size: function (w, h) {\n            this.size.w = w;\n            this.size.h = h;\n            this.e_canvas.width = w;\n            this.e_canvas.height = h;\n        },\n\n        clear: function () {\n            this.canvas_ctx.clearRect(0, 0, this.size.w, this.size.h);\n        },\n\n        draw_line: function (pout, pin, offset) {\n            var ctx = this.canvas_ctx;\n            ctx.strokeStyle = this.opts.line_color;\n            ctx.lineWidth = this.opts.line_width;\n            ctx.lineCap = 'round';\n\n            this._bezier_to(ctx,\n                pin.x + offset.x,\n                pin.y + offset.y,\n                pout.x + offset.x,\n                pout.y + offset.y);\n        },\n\n        copy_to: function (dest_canvas_ctx, callback) {\n            dest_canvas_ctx.drawImage(this.e_canvas, 0, 0);\n            !!callback && callback();\n        },\n\n        _bezier_to: function (ctx, x1, y1, x2, y2) {\n            ctx.beginPath();\n            ctx.moveTo(x1, y1);\n            ctx.bezierCurveTo(x1 + (x2 - x1) * 2 / 3, y1, x1, y2, x2, y2);\n            ctx.stroke();\n        },\n\n        _line_to: function (ctx, x1, y1, x2, y2) {\n            ctx.beginPath();\n            ctx.moveTo(x1, y1);\n            ctx.lineTo(x2, y2);\n            ctx.stroke();\n        }\n    };\n\n    jm.graph_svg = function (view) {\n        this.view = view;\n        this.opts = view.opts;\n        this.e_svg = jm.graph_svg.c('svg');\n        this.size = { w: 0, h: 0 };\n        this.lines = [];\n    };\n\n    jm.graph_svg.c = function (tag) {\n        return $d.createElementNS('http://www.w3.org/2000/svg', tag);\n    };\n\n    jm.graph_svg.prototype = {\n        element: function () {\n            return this.e_svg;\n        },\n\n        set_size: function (w, h) {\n            this.size.w = w;\n            this.size.h = h;\n            this.e_svg.setAttribute('width', w);\n            this.e_svg.setAttribute('height', h);\n        },\n\n        clear: function () {\n            var len = this.lines.length;\n            while (len--) {\n                this.e_svg.removeChild(this.lines[len]);\n            }\n            this.lines.length = 0;\n        },\n\n        draw_line: function (pout, pin, offset) {\n            var line = jm.graph_svg.c('path');\n            line.setAttribute('stroke', this.opts.line_color);\n            line.setAttribute('stroke-width', this.opts.line_width);\n            line.setAttribute('fill', 'transparent');\n            this.lines.push(line);\n            this.e_svg.appendChild(line);\n            this._bezier_to(line, pin.x + offset.x, pin.y + offset.y, pout.x + offset.x, pout.y + offset.y);\n        },\n\n        copy_to: function (dest_canvas_ctx, callback) {\n            var img = new Image();\n            img.onload = function () {\n                dest_canvas_ctx.drawImage(img, 0, 0);\n                !!callback && callback();\n            }\n            img.src = 'data:image/svg+xml;base64,' + btoa(new XMLSerializer().serializeToString(this.e_svg));\n        },\n\n        _bezier_to: function (path, x1, y1, x2, y2) {\n            path.setAttribute('d', 'M' + x1 + ' ' + y1 + ' C ' + (x1 + (x2 - x1) * 2 / 3) + ' ' + y1 + ', ' + x1 + ' ' + y2 + ', ' + x2 + ' ' + y2);\n        },\n\n        _line_to: function (path, x1, y1, x2, y2) {\n            path.setAttribute('d', 'M ' + x1 + ' ' + y1 + ' L ' + x2 + ' ' + y2);\n        }\n    };\n\n    // view provider\n    jm.view_provider = function (jm, options) {\n        this.opts = options;\n        this.jm = jm;\n        this.layout = jm.layout;\n\n        this.container = null;\n        this.e_panel = null;\n        this.e_nodes = null;\n\n        this.size = { w: 0, h: 0 };\n\n        this.selected_node = null;\n        this.editing_node = null;\n\n        this.graph = null;\n    };\n\n    jm.view_provider.prototype = {\n        init: function () {\n            logger.debug('view.init');\n\n            this.container = $i(this.opts.container) ? this.opts.container : $g(this.opts.container);\n            if (!this.container) {\n                logger.error('the options.view.container was not be found in dom');\n                return;\n            }\n            this.e_panel = $c('div');\n            this.e_nodes = $c('jmnodes');\n            this.e_editor = $c('input');\n\n            this.graph = this.opts.engine.toLowerCase() === 'svg' ? new jm.graph_svg(this) : new jm.graph_canvas(this);\n\n            this.e_panel.className = 'jsmind-inner';\n            this.e_panel.appendChild(this.graph.element());\n            this.e_panel.appendChild(this.e_nodes);\n\n            this.e_editor.className = 'jsmind-editor';\n            this.e_editor.type = 'text';\n\n            this.actualZoom = 1;\n            this.zoomStep = 0.1;\n            this.minZoom = 0.5;\n            this.maxZoom = 2;\n\n            var v = this;\n            jm.util.dom.add_event(this.e_editor, 'keydown', function (e) {\n                var evt = e || event;\n                if (evt.keyCode == 13) { v.edit_node_end(); evt.stopPropagation(); }\n            });\n            jm.util.dom.add_event(this.e_editor, 'blur', function (e) {\n                v.edit_node_end();\n            });\n\n            this.container.appendChild(this.e_panel);\n        },\n\n        add_event: function (obj, event_name, event_handle) {\n            jm.util.dom.add_event(this.e_nodes, event_name, function (e) {\n                var evt = e || event;\n                event_handle.call(obj, evt);\n            });\n        },\n\n        get_binded_nodeid: function (element) {\n            if (element == null) {\n                return null;\n            }\n            var tagName = element.tagName.toLowerCase();\n            if (tagName == 'jmnodes' || tagName == 'body' || tagName == 'html') {\n                return null;\n            }\n            if (tagName == 'jmnode' || tagName == 'jmexpander') {\n                return element.getAttribute('nodeid');\n            } else {\n                return this.get_binded_nodeid(element.parentElement);\n            }\n        },\n\n        is_expander: function (element) {\n            return (element.tagName.toLowerCase() == 'jmexpander');\n        },\n\n        reset: function () {\n            logger.debug('view.reset');\n            this.selected_node = null;\n            this.clear_lines();\n            this.clear_nodes();\n            this.reset_theme();\n        },\n\n        reset_theme: function () {\n            var theme_name = this.jm.options.theme;\n            if (!!theme_name) {\n                this.e_nodes.className = 'theme-' + theme_name;\n            } else {\n                this.e_nodes.className = '';\n            }\n        },\n\n        reset_custom_style: function () {\n            var nodes = this.jm.mind.nodes;\n            for (var nodeid in nodes) {\n                this.reset_node_custom_style(nodes[nodeid]);\n            }\n        },\n\n        load: function () {\n            logger.debug('view.load');\n            this.init_nodes();\n        },\n\n        expand_size: function () {\n            var min_size = this.layout.get_min_size();\n            var min_width = min_size.w + this.opts.hmargin * 2;\n            var min_height = min_size.h + this.opts.vmargin * 2;\n            var client_w = this.e_panel.clientWidth;\n            var client_h = this.e_panel.clientHeight;\n            if (client_w < min_width) { client_w = min_width; }\n            if (client_h < min_height) { client_h = min_height; }\n            this.size.w = client_w;\n            this.size.h = client_h;\n        },\n\n        init_nodes_size: function (node) {\n            var view_data = node._data.view;\n            view_data.width = view_data.element.clientWidth;\n            view_data.height = view_data.element.clientHeight;\n        },\n\n        init_nodes: function () {\n            var nodes = this.jm.mind.nodes;\n            var doc_frag = $d.createDocumentFragment();\n            for (var nodeid in nodes) {\n                this.create_node_element(nodes[nodeid], doc_frag);\n            }\n            this.e_nodes.appendChild(doc_frag);\n            for (var nodeid in nodes) {\n                this.init_nodes_size(nodes[nodeid]);\n            }\n        },\n\n        add_node: function (node) {\n            this.create_node_element(node, this.e_nodes);\n            this.init_nodes_size(node);\n        },\n\n        create_node_element: function (node, parent_node) {\n            var view_data = null;\n            if ('view' in node._data) {\n                view_data = node._data.view;\n            } else {\n                view_data = {};\n                node._data.view = view_data;\n            }\n\n            var d = $c('jmnode');\n            if (node.isroot) {\n                d.className = 'root';\n            } else {\n                var d_e = $c('jmexpander');\n                $t(d_e, '-');\n                d_e.setAttribute('nodeid', node.id);\n                d_e.style.visibility = 'hidden';\n                parent_node.appendChild(d_e);\n                view_data.expander = d_e;\n            }\n            if (!!node.topic) {\n                if (this.opts.support_html) {\n                    $h(d, node.topic);\n                } else {\n                    $t(d, node.topic);\n                }\n            }\n            d.setAttribute('nodeid', node.id);\n            d.style.visibility = 'hidden';\n            this._reset_node_custom_style(d, node.data);\n\n            parent_node.appendChild(d);\n            view_data.element = d;\n        },\n\n        remove_node: function (node) {\n            if (this.selected_node != null && this.selected_node.id == node.id) {\n                this.selected_node = null;\n            }\n            if (this.editing_node != null && this.editing_node.id == node.id) {\n                node._data.view.element.removeChild(this.e_editor);\n                this.editing_node = null;\n            }\n            var children = node.children;\n            var i = children.length;\n            while (i--) {\n                this.remove_node(children[i]);\n            }\n            if (node._data.view) {\n                var element = node._data.view.element;\n                var expander = node._data.view.expander;\n                this.e_nodes.removeChild(element);\n                this.e_nodes.removeChild(expander);\n                node._data.view.element = null;\n                node._data.view.expander = null;\n            }\n        },\n\n        update_node: function (node) {\n            var view_data = node._data.view;\n            var element = view_data.element;\n            if (!!node.topic) {\n                if (this.opts.support_html) {\n                    $h(element, node.topic);\n                } else {\n                    $t(element, node.topic);\n                }\n            }\n            view_data.width = element.clientWidth;\n            view_data.height = element.clientHeight;\n        },\n\n        select_node: function (node) {\n            if (!!this.selected_node) {\n                this.selected_node._data.view.element.className =\n                    this.selected_node._data.view.element.className.replace(/\\s*selected\\b/i, '');\n                this.reset_node_custom_style(this.selected_node);\n            }\n            if (!!node) {\n                this.selected_node = node;\n                node._data.view.element.className += ' selected';\n                this.clear_node_custom_style(node);\n            }\n        },\n\n        select_clear: function () {\n            this.select_node(null);\n        },\n\n        get_editing_node: function () {\n            return this.editing_node;\n        },\n\n        is_editing: function () {\n            return (!!this.editing_node);\n        },\n\n        edit_node_begin: function (node) {\n            if (!node.topic) {\n                logger.warn(\"don't edit image nodes\");\n                return;\n            }\n            if (this.editing_node != null) {\n                this.edit_node_end();\n            }\n            this.editing_node = node;\n            var view_data = node._data.view;\n            var element = view_data.element;\n            var topic = node.topic;\n            var ncs = getComputedStyle(element);\n            this.e_editor.value = topic;\n            this.e_editor.style.width = (element.clientWidth - parseInt(ncs.getPropertyValue('padding-left')) - parseInt(ncs.getPropertyValue('padding-right'))) + 'px';\n            element.innerHTML = '';\n            element.appendChild(this.e_editor);\n            element.style.zIndex = 5;\n            this.e_editor.focus();\n            this.e_editor.select();\n        },\n\n        edit_node_end: function () {\n            if (this.editing_node != null) {\n                var node = this.editing_node;\n                this.editing_node = null;\n                var view_data = node._data.view;\n                var element = view_data.element;\n                var topic = this.e_editor.value;\n                element.style.zIndex = 'auto';\n                element.removeChild(this.e_editor);\n                if (jm.util.text.is_empty(topic) || node.topic === topic) {\n                    if (this.opts.support_html) {\n                        $h(element, node.topic);\n                    } else {\n                        $t(element, node.topic);\n                    }\n                } else {\n                    this.jm.update_node(node.id, topic);\n                }\n            }\n        },\n\n        get_view_offset: function () {\n            var bounds = this.layout.bounds;\n            var _x = (this.size.w - bounds.e - bounds.w) / 2;\n            var _y = this.size.h / 2;\n            return { x: _x, y: _y };\n        },\n\n        resize: function () {\n            this.graph.set_size(1, 1);\n            this.e_nodes.style.width = '1px';\n            this.e_nodes.style.height = '1px';\n\n            this.expand_size();\n            this._show();\n        },\n\n        _show: function () {\n            this.graph.set_size(this.size.w, this.size.h);\n            this.e_nodes.style.width = this.size.w + 'px';\n            this.e_nodes.style.height = this.size.h + 'px';\n            this.show_nodes();\n            this.show_lines();\n            //this.layout.cache_valid = true;\n            this.jm.invoke_event_handle(jm.event_type.resize, { data: [] });\n        },\n\n        zoomIn: function () {\n            return this.setZoom(this.actualZoom + this.zoomStep);\n        },\n\n        zoomOut: function () {\n            return this.setZoom(this.actualZoom - this.zoomStep);\n        },\n\n        setZoom: function (zoom) {\n            if ((zoom < this.minZoom) || (zoom > this.maxZoom)) {\n                return false;\n            }\n            this.actualZoom = zoom;\n            for (var i = 0; i < this.e_panel.children.length; i++) {\n                this.e_panel.children[i].style.transform = 'scale(' + zoom + ')';\n            };\n            this.show(true);\n            return true;\n\n        },\n\n        _center_root: function () {\n            // center root node\n            var outer_w = this.e_panel.clientWidth;\n            var outer_h = this.e_panel.clientHeight;\n            if (this.size.w > outer_w) {\n                var _offset = this.get_view_offset();\n                this.e_panel.scrollLeft = _offset.x - outer_w / 2;\n            }\n            if (this.size.h > outer_h) {\n                this.e_panel.scrollTop = (this.size.h - outer_h) / 2;\n            }\n        },\n\n        show: function (keep_center) {\n            logger.debug('view.show');\n            this.expand_size();\n            this._show();\n            if (!!keep_center) {\n                this._center_root();\n            }\n        },\n\n        relayout: function () {\n            this.expand_size();\n            this._show();\n        },\n\n        save_location: function (node) {\n            var vd = node._data.view;\n            vd._saved_location = {\n                x: parseInt(vd.element.style.left) - this.e_panel.scrollLeft,\n                y: parseInt(vd.element.style.top) - this.e_panel.scrollTop,\n            };\n        },\n\n        restore_location: function (node) {\n            var vd = node._data.view;\n            this.e_panel.scrollLeft = parseInt(vd.element.style.left) - vd._saved_location.x;\n            this.e_panel.scrollTop = parseInt(vd.element.style.top) - vd._saved_location.y;\n        },\n\n        clear_nodes: function () {\n            var mind = this.jm.mind;\n            if (mind == null) {\n                return;\n            }\n            var nodes = mind.nodes;\n            var node = null;\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                node._data.view.element = null;\n                node._data.view.expander = null;\n            }\n            this.e_nodes.innerHTML = '';\n        },\n\n        show_nodes: function () {\n            var nodes = this.jm.mind.nodes;\n            var node = null;\n            var node_element = null;\n            var expander = null;\n            var p = null;\n            var p_expander = null;\n            var expander_text = '-';\n            var view_data = null;\n            var _offset = this.get_view_offset();\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                view_data = node._data.view;\n                node_element = view_data.element;\n                expander = view_data.expander;\n                if (!this.layout.is_visible(node)) {\n                    node_element.style.display = 'none';\n                    expander.style.display = 'none';\n                    continue;\n                }\n                this.reset_node_custom_style(node);\n                p = this.layout.get_node_point(node);\n                view_data.abs_x = _offset.x + p.x;\n                view_data.abs_y = _offset.y + p.y;\n                node_element.style.left = (_offset.x + p.x) + 'px';\n                node_element.style.top = (_offset.y + p.y) + 'px';\n                node_element.style.display = '';\n                node_element.style.visibility = 'visible';\n                if (!node.isroot && node.children.length > 0) {\n                    expander_text = node.expanded ? '-' : '+';\n                    p_expander = this.layout.get_expander_point(node);\n                    expander.style.left = (_offset.x + p_expander.x) + 'px';\n                    expander.style.top = (_offset.y + p_expander.y) + 'px';\n                    expander.style.display = '';\n                    expander.style.visibility = 'visible';\n                    $t(expander, expander_text);\n                }\n                // hide expander while all children have been removed\n                if (!node.isroot && node.children.length == 0) {\n                    expander.style.display = 'none';\n                    expander.style.visibility = 'hidden';\n                }\n            }\n        },\n\n        reset_node_custom_style: function (node) {\n            this._reset_node_custom_style(node._data.view.element, node.data);\n        },\n\n        _reset_node_custom_style: function (node_element, node_data) {\n            if ('background-color' in node_data) {\n                node_element.style.backgroundColor = node_data['background-color'];\n            }\n            if ('foreground-color' in node_data) {\n                node_element.style.color = node_data['foreground-color'];\n            }\n            if ('width' in node_data) {\n                node_element.style.width = node_data['width'] + 'px';\n            }\n            if ('height' in node_data) {\n                node_element.style.height = node_data['height'] + 'px';\n            }\n            if ('font-size' in node_data) {\n                node_element.style.fontSize = node_data['font-size'] + 'px';\n            }\n            if ('font-weight' in node_data) {\n                node_element.style.fontWeight = node_data['font-weight'];\n            }\n            if ('font-style' in node_data) {\n                node_element.style.fontStyle = node_data['font-style'];\n            }\n            if ('background-image' in node_data) {\n                var backgroundImage = node_data['background-image'];\n                if (backgroundImage.startsWith('data') && node_data['width'] && node_data['height']) {\n                    var img = new Image();\n\n                    img.onload = function () {\n                        var c = $c('canvas');\n                        c.width = node_element.clientWidth;\n                        c.height = node_element.clientHeight;\n                        var img = this;\n                        if (c.getContext) {\n                            var ctx = c.getContext('2d');\n                            ctx.drawImage(img, 2, 2, node_element.clientWidth, node_element.clientHeight);\n                            var scaledImageData = c.toDataURL();\n                            node_element.style.backgroundImage = 'url(' + scaledImageData + ')';\n                        }\n                    };\n                    img.src = backgroundImage;\n\n                } else {\n                    node_element.style.backgroundImage = 'url(' + backgroundImage + ')';\n                }\n                node_element.style.backgroundSize = '99%';\n\n                if ('background-rotation' in node_data) {\n                    node_element.style.transform = 'rotate(' + node_data['background-rotation'] + 'deg)';\n                }\n            }\n        },\n\n        clear_node_custom_style: function (node) {\n            var node_element = node._data.view.element;\n            node_element.style.backgroundColor = \"\";\n            node_element.style.color = \"\";\n        },\n\n        clear_lines: function () {\n            this.graph.clear();\n        },\n\n        show_lines: function () {\n            this.clear_lines();\n            var nodes = this.jm.mind.nodes;\n            var node = null;\n            var pin = null;\n            var pout = null;\n            var _offset = this.get_view_offset();\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                if (!!node.isroot) { continue; }\n                if (('visible' in node._data.layout) && !node._data.layout.visible) { continue; }\n                pin = this.layout.get_node_point_in(node);\n                pout = this.layout.get_node_point_out(node.parent);\n                this.graph.draw_line(pout, pin, _offset);\n            }\n        },\n    };\n\n    // shortcut provider\n    jm.shortcut_provider = function (jm, options) {\n        this.jm = jm;\n        this.opts = options;\n        this.mapping = options.mapping;\n        this.handles = options.handles;\n        this._mapping = {};\n    };\n\n    jm.shortcut_provider.prototype = {\n        init: function () {\n            jm.util.dom.add_event($d, 'keydown', this.handler.bind(this));\n\n            this.handles['addchild'] = this.handle_addchild;\n            this.handles['addbrother'] = this.handle_addbrother;\n            this.handles['editnode'] = this.handle_editnode;\n            this.handles['delnode'] = this.handle_delnode;\n            this.handles['toggle'] = this.handle_toggle;\n            this.handles['up'] = this.handle_up;\n            this.handles['down'] = this.handle_down;\n            this.handles['left'] = this.handle_left;\n            this.handles['right'] = this.handle_right;\n\n            for (var handle in this.mapping) {\n                if (!!this.mapping[handle] && (handle in this.handles)) {\n                    this._mapping[this.mapping[handle]] = this.handles[handle];\n                }\n            }\n        },\n\n        enable_shortcut: function () {\n            this.opts.enable = true;\n        },\n\n        disable_shortcut: function () {\n            this.opts.enable = false;\n        },\n\n        handler: function (e) {\n            if (this.jm.view.is_editing()) { return; }\n            var evt = e || event;\n            if (!this.opts.enable) { return true; }\n            var kc = evt.keyCode + (evt.metaKey << 13) + (evt.ctrlKey << 12) + (evt.altKey << 11) + (evt.shiftKey << 10);\n            if (kc in this._mapping) {\n                this._mapping[kc].call(this, this.jm, e);\n            }\n        },\n\n        handle_addchild: function (_jm, e) {\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node) {\n                var nodeid = jm.util.uuid.newid();\n                var node = _jm.add_node(selected_node, nodeid, 'New Node');\n                if (!!node) {\n                    _jm.select_node(nodeid);\n                    _jm.begin_edit(nodeid);\n                }\n            }\n        },\n        handle_addbrother: function (_jm, e) {\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node && !selected_node.isroot) {\n                var nodeid = jm.util.uuid.newid();\n                var node = _jm.insert_node_after(selected_node, nodeid, 'New Node');\n                if (!!node) {\n                    _jm.select_node(nodeid);\n                    _jm.begin_edit(nodeid);\n                }\n            }\n        },\n        handle_editnode: function (_jm, e) {\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node) {\n                _jm.begin_edit(selected_node);\n            }\n        },\n        handle_delnode: function (_jm, e) {\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node && !selected_node.isroot) {\n                _jm.select_node(selected_node.parent);\n                _jm.remove_node(selected_node);\n            }\n        },\n        handle_toggle: function (_jm, e) {\n            var evt = e || event;\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node) {\n                _jm.toggle_node(selected_node.id);\n                evt.stopPropagation();\n                evt.preventDefault();\n            }\n        },\n        handle_up: function (_jm, e) {\n            var evt = e || event;\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node) {\n                var up_node = _jm.find_node_before(selected_node);\n                if (!up_node) {\n                    var np = _jm.find_node_before(selected_node.parent);\n                    if (!!np && np.children.length > 0) {\n                        up_node = np.children[np.children.length - 1];\n                    }\n                }\n                if (!!up_node) {\n                    _jm.select_node(up_node);\n                }\n                evt.stopPropagation();\n                evt.preventDefault();\n            }\n        },\n\n        handle_down: function (_jm, e) {\n            var evt = e || event;\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node) {\n                var down_node = _jm.find_node_after(selected_node);\n                if (!down_node) {\n                    var np = _jm.find_node_after(selected_node.parent);\n                    if (!!np && np.children.length > 0) {\n                        down_node = np.children[0];\n                    }\n                }\n                if (!!down_node) {\n                    _jm.select_node(down_node);\n                }\n                evt.stopPropagation();\n                evt.preventDefault();\n            }\n        },\n\n        handle_left: function (_jm, e) {\n            this._handle_direction(_jm, e, jm.direction.left);\n        },\n        handle_right: function (_jm, e) {\n            this._handle_direction(_jm, e, jm.direction.right);\n        },\n        _handle_direction: function (_jm, e, d) {\n            var evt = e || event;\n            var selected_node = _jm.get_selected_node();\n            var node = null;\n            if (!!selected_node) {\n                if (selected_node.isroot) {\n                    var c = selected_node.children;\n                    var children = [];\n                    for (var i = 0; i < c.length; i++) {\n                        if (c[i].direction === d) {\n                            children.push(i)\n                        }\n                    }\n                    node = c[children[Math.floor((children.length - 1) / 2)]];\n                }\n                else if (selected_node.direction === d) {\n                    var children = selected_node.children;\n                    var childrencount = children.length;\n                    if (childrencount > 0) {\n                        node = children[Math.floor((childrencount - 1) / 2)]\n                    }\n                } else {\n                    node = selected_node.parent;\n                }\n                if (!!node) {\n                    _jm.select_node(node);\n                }\n                evt.stopPropagation();\n                evt.preventDefault();\n            }\n        },\n    };\n\n\n    // plugin\n    jm.plugin = function (name, init) {\n        this.name = name;\n        this.init = init;\n    };\n\n    jm.plugins = [];\n\n    jm.register_plugin = function (plugin) {\n        if (plugin instanceof jm.plugin) {\n            jm.plugins.push(plugin);\n        }\n    };\n\n    jm.init_plugins = function (sender) {\n        $w.setTimeout(function () {\n            jm._init_plugins(sender);\n        }, 0);\n    };\n\n    jm._init_plugins = function (sender) {\n        var l = jm.plugins.length;\n        var fn_init = null;\n        for (var i = 0; i < l; i++) {\n            fn_init = jm.plugins[i].init;\n            if (typeof fn_init === 'function') {\n                fn_init(sender);\n            }\n        }\n    };\n\n    // quick way\n    jm.show = function (options, mind) {\n        var _jm = new jm(options);\n        _jm.show(mind);\n        return _jm;\n    };\n\n    // export jsmind\n    if (typeof module !== 'undefined' && typeof exports === 'object') {\n        module.exports = jm;\n        $w[__name__] = jm;\n    } else if (typeof define === 'function' && (define.amd || define.cmd)) {\n        define(function () { return jm; });\n    } else {\n        $w[__name__] = jm;\n    }\n})(typeof window !== 'undefined' ? window : global);\n\n"],"sourceRoot":""}