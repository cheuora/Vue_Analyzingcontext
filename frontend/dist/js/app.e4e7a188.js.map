{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?9b05","webpack:///./src/components/JsMind/JsMind.vue?d500","webpack:///./src/App.vue?fe5c","webpack:///src/App.vue","webpack:///./src/App.vue?a7d1","webpack:///./src/App.vue?a938","webpack:///./src/router/index.js","webpack:///./src/components/JsMind/JsMind.vue?0f05","webpack:///src/components/JsMind/JsMind.vue","webpack:///./src/components/JsMind/JsMind.vue?bf52","webpack:///./src/components/JsMind/JsMind.vue?6269","webpack:///./src/components/JsMind/index.js","webpack:///./src/main.js","webpack:///./src/components/JsMind/jsmind.draggable.js","webpack:///./src/components/JsMind/jsmind.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","_v","staticRenderFns","component","Vue","use","VueRouter","routes","path","router","base","process","refresh","style","height","_m","staticStyle","staticClass","props","values","required","options","mounted","init","jm","default_options","updated","watch","methods","jsMind","install","config","productionTip","JsMind","VueAnalytics","id","render","h","App","$mount","$w","$d","__name__","draggable","jdom","util","dom","clear_selection","getSelection","removeAllRanges","selection","empty","line_width","lookup_delay","lookup_interval","e_canvas","canvas_ctx","shadow","shadow_w","shadow_h","active_node","target_node","target_direct","client_w","client_h","offset_x","offset_y","hlookup_delay","hlookup_timer","capture","moved","_create_canvas","_create_shadow","_event_bind","resize","view","e_nodes","width","size","w","e_panel","ctx","getContext","visibility","zIndex","cursor","opacity","reset_shadow","el","innerHTML","left","top","backgroundImage","backgroundSize","transform","clientWidth","clientHeight","show_shadow","hide_shadow","_magnet_shadow","node","lineWidth","strokeStyle","lineCap","_clear_lines","_canvas_lineto","sp","x","y","np","clearRect","x1","y1","x2","y2","beginPath","moveTo","lineTo","stroke","_lookup_close_node","nl","root","get_root","root_location","get_location","root_size","get_size","root_x","sw","sh","sx","offsetLeft","sy","offsetTop","direct","direction","right","nodes","mind","min_distance","Number","MAX_VALUE","distance","closest_node","closest_p","shadow_p","nodeid","isroot","Math","abs","result_node","lookup_close_node","node_data","jd","container","add_event","evt","dragstart","drag","dragend","get_editable","jview","srcElement","tagName","toLowerCase","get_binded_nodeid","get_node","clientX","touches","clientY","client_hw","floor","client_hh","clearInterval","setInterval","preventDefault","px","py","src_node","move_node","inherited","sibling_nodes","children","sc","delta_y","node_before","beforeid","dy","jm_event_handle","event_type","draggable_plugin","plugin","add_event_listener","register_plugin","__version__","__author__","_noop","logger","log","debug","warn","info","$g","getElementById","$c","$t","hasChildNodes","firstChild","nodeValue","createTextNode","$h","HTMLElement","$i","nodeType","ownerDocument","String","startsWith","DEFAULT_OPTIONS","editable","theme","support_html","engine","hmargin","vmargin","line_color","layout","hspace","vspace","pspace","default_event_handle","enable_mousedown_handle","enable_click_handle","enable_dblclick_handle","shortcut","enable","handles","mapping","addchild","addbrother","editnode","delnode","toggle","up","down","current","version","opts","json","merge","inited","event_handles","center","show","edit","select","meta","ctrl","alt","sId","iIndex","sTopic","oData","bIsRoot","oParent","eDirection","bExpanded","index","topic","parent","expanded","_data","compare","node1","node2","i1","i2","pnode","pid","vd","abs_x","abs_y","author","selected","set_root","_put_node","add_node","parent_node","idx","is_node","the_parent_node","nodeindex","isNaN","children_len","_reindex","insert_node_before","the_node_before","node_index","get_node_before","the_node","insert_node_after","node_after","the_node_after","reVal","get_node_after","brothers","parentid","_move_node","_flow_node_direction","len","_move_node_internal","sibling","si","remove_node","ci","k","sort","format","node_tree","example","get_mind","source","df","_parse","get_data","_buildnode","node_root","_extract_data","_extract_subnode","node_json","node_parent","node_array","_array","narray","reverse","root_id","_extract_root","root_json","extract_count","node_direction","sub_extract_count","_array_node","freemind","xml","xml_doc","_parse_xml","xml_root","_find_root","_load_node","xmllines","_buildmap","join","DOMParser","parser","parseFromString","ActiveXObject","async","loadXML","childNodes","parent_id","xml_node","node_id","node_topic","topic_children","topic_child","textContent","_load_attributes","node_expanded","node_position","child","attr","attr_data","pos","ajax","_xhr","xhr","XMLHttpRequest","_eurl","url","encodeURIComponent","param","method","callback","fail_callback","a","tmp_param","onreadystatechange","readyState","status","string2json","responseText","open","setRequestHeader","send","post","addEventListener","attachEvent","file","read","file_data","fn_callback","reader","FileReader","readAsText","save","blob","Blob","BlobBuilder","MozBlobBuilder","WebKitBlobBuilder","MSBlobBuilder","bb","append","getBlob","navigator","msSaveBlob","URL","webkitURL","bloburl","createObjectURL","anchor","download","body","createEvent","initEvent","dispatchEvent","location","json2string","JSON","json_str","stringify","parse","b","toString","uuid","newid","Date","getTime","random","substr","text","is_empty","replace","opts_layout","opts_view","data_provider","layout_provider","view_provider","shortcut_provider","init_plugins","enable_edit","disable_edit","enable_event_handle","event_handle","disable_event_handle","set_theme","theme_old","reset_theme","reset_custom_style","mousedown_handle","click_handle","dblclick_handle","element","select_node","select_clear","isexpander","is_expander","toggle_node","begin_edit","edit_node_begin","end_edit","edit_node_end","save_location","relayout","restore_location","expand_node","collapse_node","expand_all","collapse_all","expand_to_depth","depth","_reset","reset","_show","load","invoke_event_handle","get_meta","data_format","from","reset_node_custom_style","isWhenIncluded","add_YN_tail","afterid","update_node","isInsert","yes_id","no_id","is_visible","get_selected_node","is_node_visible","find_node_before","prev","ni","find_node_after","getthis","set_node_color","bgcolor","fgcolor","set_node_font_style","weight","set_node_background_image","image","rotation","set_node_background_rotation","_invoke_event_handle","mind_data","isside","bounds","cache_valid","layout_direction","layout_offset","_layout_direction_root","layout_data","children_count","side_index","_layout_direction_side","subnode","outer_height","left_nodes","right_nodes","unshift","outer_height_left","_layout_offset_subnodes","outer_height_right","max","total_height","nodes_count","node_outer_height","base_y","pd","set_visible","middle_height","_layout_offset_subnodes_height","get_node_offset","offset_cache","_offset_","offset_p","get_node_point","view_data","get_node_point_in","get_node_point_out","pout_cache","_pout_","get_expander_point","ex_p","ceil","get_min_size","pout","part_layout","target_depth","curr_nodes","curr_depth","root_layout_data","visible","is_expand","graph_canvas","set_size","clear","draw_line","pin","offset","_bezier_to","copy_to","dest_canvas_ctx","drawImage","bezierCurveTo","_line_to","graph_svg","e_svg","lines","createElementNS","line","img","Image","btoa","XMLSerializer","serializeToString","selected_node","editing_node","graph","e_editor","className","actualZoom","zoomStep","minZoom","maxZoom","v","keyCode","stopPropagation","obj","event_name","parentElement","clear_lines","clear_nodes","theme_name","init_nodes","expand_size","min_size","min_width","min_height","init_nodes_size","doc_frag","createDocumentFragment","create_node_element","add_yes_no","d_e","expander","_reset_node_custom_style","clear_node_custom_style","get_editing_node","is_editing","ncs","getComputedStyle","parseInt","getPropertyValue","focus","get_view_offset","_x","_y","show_nodes","show_lines","zoomIn","setZoom","zoomOut","zoom","_center_root","outer_w","outer_h","_offset","scrollLeft","scrollTop","keep_center","_saved_location","node_element","p_expander","expander_text","display","backgroundColor","color","fontSize","fontWeight","fontStyle","scaledImageData","toDataURL","_mapping","handle","handler","handle_addchild","handle_addbrother","handle_editnode","handle_delnode","handle_toggle","handle_up","handle_down","handle_left","handle_right","enable_shortcut","disable_shortcut","kc","metaKey","ctrlKey","altKey","shiftKey","_jm","up_node","down_node","_handle_direction","childrencount","plugins","sender","_init_plugins","fn_init","define","global"],"mappings":"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","file":"js/app.e4e7a188.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-1779c4b4\":\"1e26ddf9\",\"chunk-2d0b16b3\":\"e065f68b\",\"chunk-741f5406\":\"8f49ce40\",\"chunk-1d265b3a\":\"a6c5daa8\",\"chunk-379134ea\":\"80357bc5\",\"chunk-d67babc0\":\"43cb3d31\",\"chunk-e32b1f48\":\"19189654\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"chunk-1d265b3a\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-1779c4b4\":\"31d6cfe0\",\"chunk-2d0b16b3\":\"31d6cfe0\",\"chunk-741f5406\":\"31d6cfe0\",\"chunk-1d265b3a\":\"ea7086bc\",\"chunk-379134ea\":\"31d6cfe0\",\"chunk-d67babc0\":\"31d6cfe0\",\"chunk-e32b1f48\":\"31d6cfe0\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./JsMind.vue?vue&type=style&index=0&id=2313babd&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./JsMind.vue?vue&type=style&index=0&id=2313babd&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('h1',{attrs:{\"id\":\"toc_0\"}},[_c('router-link',{attrs:{\"to\":\"/\"}},[_vm._v(\" Analyzing context\")])],1),_c('p',[_vm._v(\"Tools for analyzing complicate context for developers…\")]),_c('br'),_c('br'),_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n<template>\n  <div id=\"app\">\n    <h1 id=\"toc_0\"><router-link to='/'>\n        Analyzing context</router-link></h1>\n\n    <p>Tools for analyzing complicate context for developers&hellip;</p>\n    <br><br>\n\n    <router-view/>\n\n  </div>\n</template>\n\n<script>\n//import FramePage from './components/FrontPage.vue'\nexport default {\n  name: 'App',\n  // components: {\n  //   FramePage\n  // }\n    methods:{\n        goHome(){\n            var router = this.$router \n            router.push({\n                name:Home,\n            })\n        }\n    }\n\n\n}\n</script>\n\n<style>\n\n@import url(http://fonts.googleapis.com/earlyaccess/notosanskr.css);\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\np,\nblockquote {\n    margin: 0;\n    padding: 0;\n}\nbody {\n    /*font-family: \"Helvetica Neue\", Helvetica, \"Hiragino Sans GB\", Arial, sans-serif;*/\n    font-family: 'Noto Sans KR', sans-serif;\n    font-size: 13px;\n    line-height: 18px;\n    color: #737373;\n    background-color: white;\n    margin: 10px 13px 10px 13px;\n}\ntable {\n\tmargin: 10px 0 15px 0;\n\tborder-collapse: collapse;\n}\ntd,th {\n\tborder: 1px solid #ddd;\n\tpadding: 3px 10px;\n}\nth {\n\tpadding: 5px 10px;\n}\n\na {\n    color: #737373;\n    text-decoration: none;\n}\na:hover {\n    color: #0050a3;\n    text-decoration: none;\n}\na img {\n    border: none;\n}\np {\n    margin-bottom: 9px;\n}\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n    color: #404040;\n    line-height: 36px;\n}\nh1 {\n    margin-bottom: 18px;\n    font-size: 30px;\n}\nh2 {\n    font-size: 24px;\n}\nh3 {\n    font-size: 18px;\n}\nh4 {\n    font-size: 16px;\n}\nh5 {\n    font-size: 14px;\n}\nh6 {\n    font-size: 13px;\n}\nhr {\n    margin: 0 0 19px;\n    border: 0;\n    border-bottom: 1px solid #ccc;\n}\nblockquote {\n    padding: 13px 13px 21px 15px;\n    margin-bottom: 18px;\n    font-family:georgia,serif;\n    font-style: italic;\n}\nblockquote:before {\n    content:\"\\201C\";\n    font-size:40px;\n    margin-left:-10px;\n    font-family:georgia,serif;\n    color:#eee;\n}\nblockquote p {\n    font-size: 14px;\n    font-weight: 300;\n    line-height: 18px;\n    margin-bottom: 0;\n    font-style: italic;\n}\ncode, pre {\n    font-family: Monaco, Andale Mono, Courier New, monospace;\n}\ncode {\n    background-color: #fee9cc;\n    color: rgba(0, 0, 0, 0.75);\n    padding: 1px 3px;\n    font-size: 12px;\n    -webkit-border-radius: 3px;\n    -moz-border-radius: 3px;\n    border-radius: 3px;\n}\npre {\n    display: block;\n    padding: 14px;\n    margin: 0 0 18px;\n    line-height: 16px;\n    font-size: 11px;\n    border: 1px solid #d9d9d9;\n    white-space: pre-wrap;\n    word-wrap: break-word;\n}\npre code {\n    background-color: #fff;\n    color:#737373;\n    font-size: 11px;\n    padding: 0;\n}\nsup {\n    font-size: 0.83em;\n    vertical-align: super;\n    line-height: 0;\n}\n* {\n\t-webkit-print-color-adjust: exact;\n}\n@media screen and (min-width: 914px) {\n    body {\n        width: 854px;\n        margin:10px auto;\n    }\n}\n@media print {\n\tbody,code,pre code,h1,h2,h3,h4,h5,h6 {\n\t\tcolor: black;\n\t}\n\ttable, pre {\n\t\tpage-break-inside: avoid;\n\t}\n}\n\n\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=50f30a52&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport VueRouter from 'vue-router'\n\nVue.use(VueRouter)\n\n  const routes = [\n  {\n    path: '/',\n    name: 'Home',\n    component: () => import ('../components/FrontPage.vue')\n  },\n  {\n    path: '/mindmapinput',\n    name: 'mindmapinput',\n    // route level code-splitting\n    // this generates a separate chunk (about.[hash].js) for this route\n    // which is lazy-loaded when the route is visited.\n    component: () => import('../components/MindmapInput.vue')\n  },\n  {\n    path: '/mindmapresult',\n    name: 'mindmapresult',\n    component: () => import('../components/MindmapResult.vue')\n  },\n  {\n    path: '/mcdcinput',\n    name: 'mcdcinput',\n    component: () => import('../components/MCDCInput.vue')\n  },  {\n    path: '/mcdcresult',\n    name: 'mcdcresult',\n    component: () => import('../components/MCDCResult.vue')\n  },\n  {\n    path: '/errorpage',\n    name: 'errorpage',\n    component: () => import('../components/errorPage.vue')\n  },\n  \n]\n\nconst router = new VueRouter({\n  //mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n})\n\nexport default router\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{key:_vm.refresh,style:({height: _vm.height})},[_c('div',{attrs:{\"id\":\"jsmind_container\"}}),_vm._m(0)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"display\":\"none\"}},[_c('input',{staticClass:\"file\",attrs:{\"type\":\"file\",\"id\":\"image-chooser\",\"accept\":\"image/*\"}})])}]\n\nexport { render, staticRenderFns }","<template>\n<div :key='refresh' :style=\"{height}\">\n      <div id=\"jsmind_container\"></div>\n  \n  <div style=\"display:none\">\n      <input class=\"file\" type=\"file\" id=\"image-chooser\" accept=\"image/*\"/>\n    </div>\n</div>\n</template>\n\n<script>\nimport  \"./jsmind.js\";\nimport \"./jsmind.css\";\nimport './jsmind.draggable.js'\n//import './jsmind.screenshot.js'\nexport default {\n  name: \"jsMind\",\n  props: {\n    values: {\n      type: Object,\n      required: true\n    },\n    options: {\n      type: Object\n    },\n    height:{\n      type:String,\n      required:true\n    }\n  },\n  mounted() {\n    this.init()\n  },\n  data(){\n    return{\n      jm:{},\n      refresh:1,\n      value:{},\n       // 默认配置\n      default_options : {\n      container: \"jsmind_container\",\n      editable: true, // 是否启用编辑\n      theme: \"primary\", // 主题\n      mode: \"full\", // 显示模式\n      support_html: true, // 是否支持节点里的HTML元素\n      view: {\n        engine: \"canvas\", // 思维导图各节点之间线条的绘制引擎\n        hmargin: 100, // 思维导图距容器外框的最小水平距离\n        vmargin: 50, // 思维导图距容器外框的最小垂直距离\n        line_width: 2, // 思维导图线条的粗细\n        line_color: \"#555\" // 思维导图线条的颜色\n      },\n      layout: {\n        hspace: 30, // 节点之间的水平间距\n        vspace: 20, // 节点之间的垂直间距\n        pspace: 13 // 节点与连接线之间的水平间距（用于容纳节点收缩/展开控制器）\n      },\n      shortcut: {\n        enable: true, // 是否启用快捷键\n        handles: {\n          SavePNG(){\n            this.jm.screenshot.shootDownload();\n          }\n        }, // 命名的快捷键事件处理器\n        mapping: {\n          // 快捷键映射\n          addchild: 45, // <Insert>\n          addbrother: 13, // <Enter>\n          editnode: 113, // <F2>\n          delnode: 46, // <Delete>\n          toggle: 32, // <Space>\n          left: 37, // <Left>\n          up: 38, // <Up>\n          right: 39, // <Right>\n          down: 40 ,// <Down>\n          SavePNG:jsMind.key.ctrl + 83\n        }\n      }\n    }\n    }\n  },\n  updated(){\n    this.init()\n  },\n  watch:{\n\n    options(){\n     this.$nextTick(()=>{\n      this.refresh++\n     })\n    }\n  },\n  methods:{\n    init(){\n      if(this.jm.get_data){\n        this.value=this.jm.get_data()\n      }else{\n        this.value=this.values\n      }\n      const options = Object.assign(this.default_options, this.options);\n      this.jm=window.jsMind.show(options,this.value)\n    }\n  }\n};\n</script>\n<style scoped>\n#jsmind_container {\n  height: 100%;\n  width: 100%;\n  border : 1px;\n  border-style:solid;\n\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./JsMind.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./JsMind.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./JsMind.vue?vue&type=template&id=2313babd&scoped=true&\"\nimport script from \"./JsMind.vue?vue&type=script&lang=js&\"\nexport * from \"./JsMind.vue?vue&type=script&lang=js&\"\nimport style0 from \"./JsMind.vue?vue&type=style&index=0&id=2313babd&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2313babd\",\n  null\n  \n)\n\nexport default component.exports","import jsMind from './JsMind.vue'\njsMind.install = Vue => {\n    Vue.component(jsMind.name, jsMind)\n}\n\nif (typeof window !== 'undefined' && window.Vue) {\n    window.Vue.component(jsMind.name, jsMind)\n}\n\nexport default jsMind;\n","import Vue from 'vue'\nimport App from './App.vue'\nimport router from './router'\nimport JsMind from './components/JsMind/index'\nimport VueAnalytics from 'vue-analytics'\n\nVue.config.productionTip = false\nVue.use(JsMind)\nVue.use(VueAnalytics,{\n  id : 'UA-112917851-2',\n  router,\n})\n\nnew Vue({\n  router,\n  render: h => h(App)\n}).$mount('#app')\n\n","/*\n * Released under BSD License\n * Copyright (c) 2014-2015 hizzgdev@163.com\n * \n * Project Home:\n *   https://github.com/hizzgdev/jsmind/\n */\n\n(function ($w) {\n    'use strict';\n    var $d = $w.document;\n    var __name__ = 'jsMind';\n    var jsMind = $w[__name__];\n    if (!jsMind) { return; }\n    if (typeof jsMind.draggable != 'undefined') { return; }\n\n    var jdom = jsMind.util.dom;\n    var clear_selection = 'getSelection' in $w ? function () {\n        $w.getSelection().removeAllRanges();\n    } : function () {\n        $d.selection.empty();\n    };\n\n    var options = {\n        line_width: 5,\n        lookup_delay: 500,\n        lookup_interval: 80\n    };\n\n    jsMind.draggable = function (jm) {\n        this.jm = jm;\n        this.e_canvas = null;\n        this.canvas_ctx = null;\n        this.shadow = null;\n        this.shadow_w = 0;\n        this.shadow_h = 0;\n        this.active_node = null;\n        this.target_node = null;\n        this.target_direct = null;\n        this.client_w = 0;\n        this.client_h = 0;\n        this.offset_x = 0;\n        this.offset_y = 0;\n        this.hlookup_delay = 0;\n        this.hlookup_timer = 0;\n        this.capture = false;\n        this.moved = false;\n    };\n\n    jsMind.draggable.prototype = {\n        init: function () {\n            this._create_canvas();\n            this._create_shadow();\n            this._event_bind();\n        },\n\n        resize: function () {\n            this.jm.view.e_nodes.appendChild(this.shadow);\n            this.e_canvas.width = this.jm.view.size.w;\n            this.e_canvas.height = this.jm.view.size.h;\n        },\n\n        _create_canvas: function () {\n            var c = $d.createElement('canvas');\n            this.jm.view.e_panel.appendChild(c);\n            var ctx = c.getContext('2d');\n            this.e_canvas = c;\n            this.canvas_ctx = ctx;\n        },\n\n        _create_shadow: function () {\n            var s = $d.createElement('jmnode');\n            s.style.visibility = 'hidden';\n            s.style.zIndex = '3';\n            s.style.cursor = 'move';\n            s.style.opacity = '0.7';\n            this.shadow = s;\n        },\n\n        reset_shadow: function (el) {\n            var s = this.shadow.style;\n            this.shadow.innerHTML = el.innerHTML;\n            s.left = el.style.left;\n            s.top = el.style.top;\n            s.width = el.style.width;\n            s.height = el.style.height;\n            s.backgroundImage = el.style.backgroundImage;\n            s.backgroundSize = el.style.backgroundSize;\n            s.transform = el.style.transform;\n            this.shadow_w = this.shadow.clientWidth;\n            this.shadow_h = this.shadow.clientHeight;\n\n        },\n\n        show_shadow: function () {\n            if (!this.moved) {\n                this.shadow.style.visibility = 'visible';\n            }\n        },\n\n        hide_shadow: function () {\n            this.shadow.style.visibility = 'hidden';\n        },\n\n        _magnet_shadow: function (node) {\n            if (!!node) {\n                this.canvas_ctx.lineWidth = options.line_width;\n                this.canvas_ctx.strokeStyle = 'rgba(0,0,0,0.3)';\n                this.canvas_ctx.lineCap = 'round';\n                this._clear_lines();\n                this._canvas_lineto(node.sp.x, node.sp.y, node.np.x, node.np.y);\n            }\n        },\n\n        _clear_lines: function () {\n            this.canvas_ctx.clearRect(0, 0, this.jm.view.size.w, this.jm.view.size.h);\n        },\n\n        _canvas_lineto: function (x1, y1, x2, y2) {\n            this.canvas_ctx.beginPath();\n            this.canvas_ctx.moveTo(x1, y1);\n            this.canvas_ctx.lineTo(x2, y2);\n            this.canvas_ctx.stroke();\n        },\n\n        _lookup_close_node: function () {\n            var root = this.jm.get_root();\n            var root_location = root.get_location();\n            var root_size = root.get_size();\n            var root_x = root_location.x + root_size.w / 2;\n\n            var sw = this.shadow_w;\n            var sh = this.shadow_h;\n            var sx = this.shadow.offsetLeft;\n            var sy = this.shadow.offsetTop;\n\n            var ns, nl;\n\n            var direct = (sx + sw / 2) >= root_x ?\n                jsMind.direction.right : jsMind.direction.left;\n            var nodes = this.jm.mind.nodes;\n            var node = null;\n            var min_distance = Number.MAX_VALUE;\n            var distance = 0;\n            var closest_node = null;\n            var closest_p = null;\n            var shadow_p = null;\n            for (var nodeid in nodes) {\n                var np, sp;\n                node = nodes[nodeid];\n                if (node.isroot || node.direction == direct) {\n                    if (node.id == this.active_node.id) {\n                        continue;\n                    }\n                    ns = node.get_size();\n                    nl = node.get_location();\n                    if (direct == jsMind.direction.right) {\n                        if (sx - nl.x - ns.w <= 0) { continue; }\n                        distance = Math.abs(sx - nl.x - ns.w) + Math.abs(sy + sh / 2 - nl.y - ns.h / 2);\n                        np = { x: nl.x + ns.w - options.line_width, y: nl.y + ns.h / 2 };\n                        sp = { x: sx + options.line_width, y: sy + sh / 2 };\n                    } else {\n                        if (nl.x - sx - sw <= 0) { continue; }\n                        distance = Math.abs(sx + sw - nl.x) + Math.abs(sy + sh / 2 - nl.y - ns.h / 2);\n                        np = { x: nl.x + options.line_width, y: nl.y + ns.h / 2 };\n                        sp = { x: sx + sw - options.line_width, y: sy + sh / 2 };\n                    }\n                    if (distance < min_distance) {\n                        closest_node = node;\n                        closest_p = np;\n                        shadow_p = sp;\n                        min_distance = distance;\n                    }\n                }\n            }\n            var result_node = null;\n            if (!!closest_node) {\n                result_node = {\n                    node: closest_node,\n                    direction: direct,\n                    sp: shadow_p,\n                    np: closest_p\n                };\n            }\n            return result_node;\n        },\n\n        lookup_close_node: function () {\n            var node_data = this._lookup_close_node();\n            if (!!node_data) {\n                this._magnet_shadow(node_data);\n                this.target_node = node_data.node;\n                this.target_direct = node_data.direction;\n            }\n        },\n\n        _event_bind: function () {\n            var jd = this;\n            var container = this.jm.view.container;\n            jdom.add_event(container, 'mousedown', function (e) {\n                var evt = e || event;\n                jd.dragstart.call(jd, evt);\n            });\n            jdom.add_event(container, 'mousemove', function (e) {\n                var evt = e || event;\n                jd.drag.call(jd, evt);\n            });\n            jdom.add_event(container, 'mouseup', function (e) {\n                var evt = e || event;\n                jd.dragend.call(jd, evt);\n            });\n            jdom.add_event(container, 'touchstart', function (e) {\n                var evt = e || event;\n                jd.dragstart.call(jd, evt);\n            });\n            jdom.add_event(container, 'touchmove', function (e) {\n                var evt = e || event;\n                jd.drag.call(jd, evt);\n            });\n            jdom.add_event(container, 'touchend', function (e) {\n                var evt = e || event;\n                jd.dragend.call(jd, evt);\n            });\n        },\n\n        dragstart: function (e) {\n            if (!this.jm.get_editable()) { return; }\n            if (this.capture) { return; }\n            this.active_node = null;\n\n            var jview = this.jm.view;\n            var el = e.target || event.srcElement;\n            if (el.tagName.toLowerCase() != 'jmnode') { return; }\n            var nodeid = jview.get_binded_nodeid(el);\n            if (!!nodeid) {\n                var node = this.jm.get_node(nodeid);\n                if (!node.isroot) {\n                    this.reset_shadow(el);\n                    this.active_node = node;\n                    this.offset_x = (e.clientX || e.touches[0].clientX) - el.offsetLeft;\n                    this.offset_y = (e.clientY || e.touches[0].clientY) - el.offsetTop;\n                    this.client_hw = Math.floor(el.clientWidth / 2);\n                    this.client_hh = Math.floor(el.clientHeight / 2);\n                    if (this.hlookup_delay != 0) {\n                        $w.clearTimeout(this.hlookup_delay);\n                    }\n                    if (this.hlookup_timer != 0) {\n                        $w.clearInterval(this.hlookup_timer);\n                    }\n                    var jd = this;\n                    this.hlookup_delay = $w.setTimeout(function () {\n                        jd.hlookup_delay = 0;\n                        jd.hlookup_timer = $w.setInterval(function () {\n                            jd.lookup_close_node.call(jd);\n                        }, options.lookup_interval);\n                    }, options.lookup_delay);\n                    this.capture = true;\n                }\n            }\n        },\n\n        drag: function (e) {\n            if (!this.jm.get_editable()) { return; }\n            if (this.capture) {\n                e.preventDefault();\n                this.show_shadow();\n                this.moved = true;\n                clear_selection();\n                var px = (e.clientX || e.touches[0].clientX) - this.offset_x;\n                var py = (e.clientY || e.touches[0].clientY) - this.offset_y;\n                var cx = px + this.client_hw;\n                var cy = py + this.client_hh;\n                this.shadow.style.left = px + 'px';\n                this.shadow.style.top = py + 'px';\n                clear_selection();\n            }\n        },\n\n        dragend: function (e) {\n            if (!this.jm.get_editable()) { return; }\n            if (this.capture) {\n                if (this.hlookup_delay != 0) {\n                    $w.clearTimeout(this.hlookup_delay);\n                    this.hlookup_delay = 0;\n                    this._clear_lines();\n                }\n                if (this.hlookup_timer != 0) {\n                    $w.clearInterval(this.hlookup_timer);\n                    this.hlookup_timer = 0;\n                    this._clear_lines();\n                }\n                if (this.moved) {\n                    var src_node = this.active_node;\n                    var target_node = this.target_node;\n                    var target_direct = this.target_direct;\n                    this.move_node(src_node, target_node, target_direct);\n                }\n                this.hide_shadow();\n            }\n            this.moved = false;\n            this.capture = false;\n        },\n\n        move_node: function (src_node, target_node, target_direct) {\n            var shadow_h = this.shadow.offsetTop;\n            if (!!target_node && !!src_node && !jsMind.node.inherited(src_node, target_node)) {\n                // lookup before_node\n                var sibling_nodes = target_node.children;\n                var sc = sibling_nodes.length;\n                var node = null;\n                var delta_y = Number.MAX_VALUE;\n                var node_before = null;\n                var beforeid = '_last_';\n                while (sc--) {\n                    node = sibling_nodes[sc];\n                    if (node.direction == target_direct && node.id != src_node.id) {\n                        var dy = node.get_location().y - shadow_h;\n                        if (dy > 0 && dy < delta_y) {\n                            delta_y = dy;\n                            node_before = node;\n                            beforeid = '_first_';\n                        }\n                    }\n                }\n                if (!!node_before) { beforeid = node_before.id; }\n                this.jm.move_node(src_node.id, beforeid, target_node.id, target_direct);\n            }\n            this.active_node = null;\n            this.target_node = null;\n            this.target_direct = null;\n        },\n\n        jm_event_handle: function (type, data) {\n            if (type === jsMind.event_type.resize) {\n                this.resize();\n            }\n        }\n    };\n\n    var draggable_plugin = new jsMind.plugin('draggable', function (jm) {\n        var jd = new jsMind.draggable(jm);\n        jd.init();\n        jm.add_event_listener(function (type, data) {\n            jd.jm_event_handle.call(jd, type, data);\n        });\n    });\n\n    jsMind.register_plugin(draggable_plugin);\n\n})(window);\n","/*\n * Released under BSD License\n * Copyright (c) 2014-2016 hizzgdev@163.com\n *\n * Project Home:\n *   https://github.com/hizzgdev/jsmind/\n */\n\n; (function ($w) {\n    'use strict';\n    // set 'jsMind' as the library name.\n    // __name__ should be a const value, Never try to change it easily.\n    var __name__ = 'jsMind';\n    // library version\n    var __version__ = '0.4.6';\n    // author\n    var __author__ = 'hizzgdev@163.com';\n\n    // an noop function define\n    var _noop = function () { };\n    var logger = (typeof console === 'undefined') ? {\n        log: _noop, debug: _noop, error: _noop, warn: _noop, info: _noop\n    } : console;\n\n    // check global variables\n    if (typeof module === 'undefined' || !module.exports) {\n        if (typeof $w[__name__] != 'undefined') {\n            logger.log(__name__ + ' has been already exist.');\n            return;\n        }\n    }\n\n    // shortcut of methods in dom\n    var $d = $w.document;\n    var $g = function (id) { return $d.getElementById(id); };\n    var $c = function (tag) { return $d.createElement(tag); };\n    var $t = function (n, t) { if (n.hasChildNodes()) { n.firstChild.nodeValue = t; } else { n.appendChild($d.createTextNode(t)); } };\n\n    var $h = function (n, t) {\n        if (t instanceof HTMLElement) {\n            n.innerHTML = '';\n            n.appendChild(t)\n        } else {\n            n.innerHTML = t;\n        }\n    };\n    // detect isElement\n    var $i = function (el) { return !!el && (typeof el === 'object') && (el.nodeType === 1) && (typeof el.style === 'object') && (typeof el.ownerDocument === 'object'); };\n    if (typeof String.prototype.startsWith != 'function') { String.prototype.startsWith = function (p) { return this.slice(0, p.length) === p; }; }\n\n    var DEFAULT_OPTIONS = {\n        container: '',   // id of the container\n        editable: false, // you can change it in your options\n        theme: null,\n        mode: 'full',    // full or side\n        support_html: true,\n\n        view: {\n            engine: 'canvas',\n            hmargin: 100,\n            vmargin: 50,\n            line_width: 2,\n            line_color: '#555'\n        },\n        layout: {\n            hspace: 30,\n            vspace: 20,\n            pspace: 13\n        },\n        default_event_handle: {\n            enable_mousedown_handle: true,\n            enable_click_handle: true,\n            enable_dblclick_handle: true\n        },\n        shortcut: {\n            enable: true,\n            handles: {\n            },\n            mapping: {\n                addchild: 45, // Insert\n                addbrother: 13, // Enter\n                editnode: 113,// F2\n                delnode: 46, // Delete\n                toggle: 32, // Space\n                left: 37, // Left\n                up: 38, // Up\n                right: 39, // Right\n                down: 40, // Down\n            }\n        },\n    };\n\n    // core object\n    var jm = function (options) {\n        jm.current = this;\n\n        this.version = __version__;\n        var opts = {};\n        jm.util.json.merge(opts, DEFAULT_OPTIONS);\n        jm.util.json.merge(opts, options);\n\n        if (!opts.container) {\n            logger.error('the options.container should not be null or empty.');\n            return;\n        }\n        this.options = opts;\n        this.inited = false;\n        this.mind = null;\n        this.event_handles = [];\n        this.init();\n    };\n\n    // ============= static object =============================================\n    jm.direction = { left: -1, center: 0, right: 1 };\n    jm.event_type = { show: 1, resize: 2, edit: 3, select: 4 };\n    jm.key = { meta: 1 << 13, ctrl: 1 << 12, alt: 1 << 11, shift: 1 << 10 };\n\n    jm.node = function (sId, iIndex, sTopic, oData, bIsRoot, oParent, eDirection, bExpanded) {\n        if (!sId) { logger.error('invalid nodeid'); return; }\n        if (typeof iIndex != 'number') { logger.error('invalid node index'); return; }\n        if (typeof bExpanded === 'undefined') { bExpanded = true; }\n        this.id = sId;\n        this.index = iIndex;\n        this.topic = sTopic;\n        this.data = oData || {};\n        this.isroot = bIsRoot;\n        this.parent = oParent;\n        this.direction = eDirection;\n        this.expanded = !!bExpanded;\n        this.children = [];\n        this._data = {};\n    };\n\n    jm.node.compare = function (node1, node2) {\n        // '-1' is alwary the last\n        var r = 0;\n        var i1 = node1.index;\n        var i2 = node2.index;\n        if (i1 >= 0 && i2 >= 0) {\n            r = i1 - i2;\n        } else if (i1 == -1 && i2 == -1) {\n            r = 0;\n        } else if (i1 == -1) {\n            r = 1;\n        } else if (i2 == -1) {\n            r = -1;\n        } else {\n            r = 0;\n        }\n        //logger.debug(i1+' <> '+i2+'  =  '+r);\n        return r;\n    };\n\n    jm.node.inherited = function (pnode, node) {\n        if (!!pnode && !!node) {\n            if (pnode.id === node.id) {\n                return true;\n            }\n            if (pnode.isroot) {\n                return true;\n            }\n            var pid = pnode.id;\n            var p = node;\n            while (!p.isroot) {\n                p = p.parent;\n                if (p.id === pid) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n\n    jm.node.prototype = {\n        get_location: function () {\n            var vd = this._data.view;\n            return {\n                x: vd.abs_x,\n                y: vd.abs_y\n            };\n        },\n        get_size: function () {\n            var vd = this._data.view;\n            return {\n                w: vd.width,\n                h: vd.height\n            }\n        }\n    };\n\n\n    jm.mind = function () {\n        this.name = null;\n        this.author = null;\n        this.version = null;\n        this.root = null;\n        this.selected = null;\n        this.nodes = {};\n    };\n\n    jm.mind.prototype = {\n        get_node: function (nodeid) {\n            if (nodeid in this.nodes) {\n                return this.nodes[nodeid];\n            } else {\n                logger.warn('the node[id=' + nodeid + '] can not be found');\n                return null;\n            }\n        },\n\n        set_root: function (nodeid, topic, data) {\n            if (this.root == null) {\n                this.root = new jm.node(nodeid, 0, topic, data, true);\n                this._put_node(this.root);\n            } else {\n                logger.error('root node is already exist');\n            }\n        },  \n        add_node: function (parent_node, nodeid, topic, data, idx, direction, expanded) {\n            if (!jm.util.is_node(parent_node)) {\n                var the_parent_node = this.get_node(parent_node);\n                if (!the_parent_node) {\n                    logger.error('the parent_node[id=' + parent_node + '] can not be found.');\n                    return null;\n                } else {\n     \n                    return this.add_node(the_parent_node, nodeid, topic, data, idx, direction, expanded);\n\n                }\n            }\n            var nodeindex = idx || -1;\n            var node = null;\n            if (parent_node.isroot) {\n                var d = jm.direction.right;\n                if (isNaN(direction)) {\n                    var children = parent_node.children;\n                    var children_len = children.length;\n                    var r = 0;\n                    for (var i = 0; i < children_len; i++) { if (children[i].direction === jm.direction.left) { r--; } else { r++; } }\n                    d = (children_len > 1 && r > 0) ? jm.direction.left : jm.direction.right\n                } else {\n                    d = (direction != jm.direction.left) ? jm.direction.right : jm.direction.left;\n                }\n                node = new jm.node(nodeid, nodeindex, topic, data, false, parent_node, d, expanded);\n            } else {\n                node = new jm.node(nodeid, nodeindex, topic, data, false, parent_node, parent_node.direction, expanded);\n            }\n            if (this._put_node(node)) {\n                parent_node.children.push(node);\n                this._reindex(parent_node);\n\n            } else {\n                logger.error('fail, the nodeid \\'' + node.id + '\\' has been already exist.');\n                node = null;\n            }\n            \n            return node;\n        },\n\n\n        insert_node_before: function (node_before, nodeid, topic, data) {\n            if (!jm.util.is_node(node_before)) {\n                var the_node_before = this.get_node(node_before);\n                if (!the_node_before) {\n                    logger.error('the node_before[id=' + node_before + '] can not be found.');\n                    return null;\n                } else {\n                    return this.insert_node_before(the_node_before, nodeid, topic, data);\n                }\n            }\n            var node_index = node_before.index - 0.5;\n            return this.add_node(node_before.parent, nodeid, topic, data, node_index,'','','insert');\n        },\n\n        get_node_before: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return null;\n                } else {\n                    return this.get_node_before(the_node);\n                }\n            }\n            if (node.isroot) { return null; }\n            var idx = node.index - 2;\n            if (idx >= 0) {\n                return node.parent.children[idx];\n            } else {\n                return null;\n            }\n        },\n\n        insert_node_after: function (node_after, nodeid, topic, data) {\n            if (!jm.util.is_node(node_after)) {\n                var the_node_after = this.get_node(node_before);\n                if (!the_node_after) {\n                    logger.error('the node_after[id=' + node_after + '] can not be found.');\n                    return null;\n                } else {\n                    return this.insert_node_after(the_node_after, nodeid, topic, data);\n                }\n            }\n            var node_index = node_after.index + 0.5;\n            var reVal= this.add_node(node_after.parent, nodeid, topic, data, node_index,'','','insert')\n            return reVal\n\n        },\n\n\n\n        get_node_after: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return null;\n                } else {\n                    return this.get_node_after(the_node);\n                }\n            }\n            if (node.isroot) { return null; }\n            var idx = node.index;\n            var brothers = node.parent.children;\n            if (brothers.length >= idx) {\n                return node.parent.children[idx];\n            } else {\n                return null;\n            }\n        },\n\n        move_node: function (node, beforeid, parentid, direction) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return null;\n                } else {\n                    return this.move_node(the_node, beforeid, parentid, direction);\n                }\n            }\n            if (!parentid) {\n                parentid = node.parent.id;\n            }\n            return this._move_node(node, beforeid, parentid, direction);\n        },\n\n        _flow_node_direction: function (node, direction) {\n            if (typeof direction === 'undefined') {\n                direction = node.direction;\n            } else {\n                node.direction = direction;\n            }\n            var len = node.children.length;\n            while (len--) {\n                this._flow_node_direction(node.children[len], direction);\n            }\n        },\n\n        _move_node_internal: function (node, beforeid) {\n            if (!!node && !!beforeid) {\n                if (beforeid == '_last_') {\n                    node.index = -1;\n                    this._reindex(node.parent);\n                } else if (beforeid == '_first_') {\n                    node.index = 0;\n                    this._reindex(node.parent);\n                } else {\n                    var node_before = (!!beforeid) ? this.get_node(beforeid) : null;\n                    if (node_before != null && node_before.parent != null && node_before.parent.id == node.parent.id) {\n                        node.index = node_before.index - 0.5;\n                        this._reindex(node.parent);\n                    }\n                }\n            }\n            return node;\n        },\n\n        _move_node: function (node, beforeid, parentid, direction) {\n            if (!!node && !!parentid) {\n                if (node.parent.id != parentid) {\n                    // remove from parent's children\n                    var sibling = node.parent.children;\n                    var si = sibling.length;\n                    while (si--) {\n                        if (sibling[si].id == node.id) {\n                            sibling.splice(si, 1);\n                            break;\n                        }\n                    }\n                    node.parent = this.get_node(parentid);\n                    node.parent.children.push(node);\n                }\n\n                if (node.parent.isroot) {\n                    if (direction == jm.direction.left) {\n                        node.direction = direction;\n                    } else {\n                        node.direction = jm.direction.right;\n                    }\n                } else {\n                    node.direction = node.parent.direction;\n                }\n                this._move_node_internal(node, beforeid);\n                this._flow_node_direction(node);\n            }\n            return node;\n        },\n\n        remove_node: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return false;\n                } else {\n                    return this.remove_node(the_node);\n                }\n            }\n            if (!node) {\n                logger.error('fail, the node can not be found');\n                return false;\n            }\n            if (node.isroot) {\n                logger.error('fail, can not remove root node');\n                return false;\n            }\n            if (this.selected != null && this.selected.id == node.id) {\n                this.selected = null;\n            }\n            // clean all subordinate nodes\n            var children = node.children;\n            var ci = children.length;\n            while (ci--) {\n                this.remove_node(children[ci]);\n            }\n            // clean all children\n            children.length = 0;\n            // remove from parent's children\n            var sibling = node.parent.children;\n            var si = sibling.length;\n            while (si--) {\n                if (sibling[si].id == node.id) {\n                    sibling.splice(si, 1);\n                    break;\n                }\n            }\n            // remove from global nodes\n            delete this.nodes[node.id];\n            // clean all properties\n            for (var k in node) {\n                delete node[k];\n            }\n            // remove it's self\n            node = null;\n            //delete node;\n            return true;\n        },\n\n        _put_node: function (node) {\n            if (node.id in this.nodes) {\n                logger.warn('the nodeid \\'' + node.id + '\\' has been already exist.');\n                return false;\n            } else {\n                this.nodes[node.id] = node;\n                return true;\n            }\n        },\n\n        _reindex: function (node) {\n            if (node instanceof jm.node) {\n                node.children.sort(jm.node.compare);\n                for (var i = 0; i < node.children.length; i++) {\n                    node.children[i].index = i + 1;\n                }\n            }\n        },\n    };\n\n    jm.format = {\n        node_tree: {\n            example: {\n                \"meta\": {\n                    \"name\": __name__,\n                    \"author\": __author__,\n                    \"version\": __version__\n                },\n                \"format\": \"node_tree\",\n                \"data\": { \"id\": \"root\", \"topic\": \"jsMind Example\" }\n            },\n            get_mind: function (source) {\n                var df = jm.format.node_tree;\n                var mind = new jm.mind();\n                mind.name = source.meta.name;\n                mind.author = source.meta.author;\n                mind.version = source.meta.version;\n                df._parse(mind, source.data);\n                return mind;\n            },\n            get_data: function (mind) {\n                var df = jm.format.node_tree;\n                var json = {};\n                json.meta = {\n                    name: mind.name,\n                    author: mind.author,\n                    version: mind.version\n                };\n                json.format = 'node_tree';\n                json.data = df._buildnode(mind.root);\n                return json;\n            },\n\n            _parse: function (mind, node_root) {\n                var df = jm.format.node_tree;\n                var data = df._extract_data(node_root);\n                mind.set_root(node_root.id, node_root.topic, data);\n                if ('children' in node_root) {\n                    var children = node_root.children;\n                    for (var i = 0; i < children.length; i++) {\n                        df._extract_subnode(mind, mind.root, children[i]);\n                    }\n                }\n            },\n\n            _extract_data: function (node_json) {\n                var data = {};\n                for (var k in node_json) {\n                    if (k == 'id' || k == 'topic' || k == 'children' || k == 'direction' || k == 'expanded') {\n                        continue;\n                    }\n                    data[k] = node_json[k];\n                }\n                return data;\n            },\n\n            _extract_subnode: function (mind, node_parent, node_json) {\n                var df = jm.format.node_tree;\n                var data = df._extract_data(node_json);\n                var d = null;\n                if (node_parent.isroot) {\n                    d = node_json.direction == 'left' ? jm.direction.left : jm.direction.right;\n                }\n                var node = mind.add_node(node_parent, node_json.id, node_json.topic, data, null, d, node_json.expanded);\n                if ('children' in node_json) {\n                    var children = node_json.children;\n                    for (var i = 0; i < children.length; i++) {\n                        df._extract_subnode(mind, node, children[i]);\n                    }\n                }\n            },\n\n            _buildnode: function (node) {\n                var df = jm.format.node_tree;\n                if (!(node instanceof jm.node)) { return; }\n                var o = {\n                    id: node.id,\n                    topic: node.topic,\n                    expanded: node.expanded\n                };\n                if (!!node.parent && node.parent.isroot) {\n                    o.direction = node.direction == jm.direction.left ? 'left' : 'right';\n                }\n                if (node.data != null) {\n                    var node_data = node.data;\n                    for (var k in node_data) {\n                        o[k] = node_data[k];\n                    }\n                }\n                var children = node.children;\n                if (children.length > 0) {\n                    o.children = [];\n                    for (var i = 0; i < children.length; i++) {\n                        o.children.push(df._buildnode(children[i]));\n                    }\n                }\n                return o;\n            }\n        },\n\n        node_array: {\n            example: {\n                \"meta\": {\n                    \"name\": __name__,\n                    \"author\": __author__,\n                    \"version\": __version__\n                },\n                \"format\": \"node_array\",\n                \"data\": [\n                    { \"id\": \"root\", \"topic\": \"jsMind Example\", \"isroot\": true }\n                ]\n            },\n\n            get_mind: function (source) {\n                var df = jm.format.node_array;\n                var mind = new jm.mind();\n                mind.name = source.meta.name;\n                mind.author = source.meta.author;\n                mind.version = source.meta.version;\n                df._parse(mind, source.data);\n                return mind;\n            },\n\n            get_data: function (mind) {\n                var df = jm.format.node_array;\n                var json = {};\n                json.meta = {\n                    name: mind.name,\n                    author: mind.author,\n                    version: mind.version\n                };\n                json.format = 'node_array';\n                json.data = [];\n                df._array(mind, json.data);\n                return json;\n            },\n\n            _parse: function (mind, node_array) {\n                var df = jm.format.node_array;\n                var narray = node_array.slice(0);\n                // reverse array for improving looping performance\n                narray.reverse();\n                var root_id = df._extract_root(mind, narray);\n                if (!!root_id) {\n                    df._extract_subnode(mind, root_id, narray);\n                } else {\n                    logger.error('root node can not be found');\n                }\n            },\n\n            _extract_root: function (mind, node_array) {\n                var df = jm.format.node_array;\n                var i = node_array.length;\n                while (i--) {\n                    if ('isroot' in node_array[i] && node_array[i].isroot) {\n                        var root_json = node_array[i];\n                        var data = df._extract_data(root_json);\n                        mind.set_root(root_json.id, root_json.topic, data);\n                        node_array.splice(i, 1);\n                        return root_json.id;\n                    }\n                }\n                return null;\n            },\n\n            _extract_subnode: function (mind, parentid, node_array) {\n                var df = jm.format.node_array;\n                var i = node_array.length;\n                var node_json = null;\n                var data = null;\n                var extract_count = 0;\n                while (i--) {\n                    node_json = node_array[i];\n                    if (node_json.parentid == parentid) {\n                        data = df._extract_data(node_json);\n                        var d = null;\n                        var node_direction = node_json.direction;\n                        if (!!node_direction) {\n                            d = node_direction == 'left' ? jm.direction.left : jm.direction.right;\n                        }\n                        mind.add_node(parentid, node_json.id, node_json.topic, data, null, d, node_json.expanded);\n                        node_array.splice(i, 1);\n                        extract_count++;\n                        var sub_extract_count = df._extract_subnode(mind, node_json.id, node_array);\n                        if (sub_extract_count > 0) {\n                            // reset loop index after extract subordinate node\n                            i = node_array.length;\n                            extract_count += sub_extract_count;\n                        }\n                    }\n                }\n                return extract_count;\n            },\n\n            _extract_data: function (node_json) {\n                var data = {};\n                for (var k in node_json) {\n                    if (k == 'id' || k == 'topic' || k == 'parentid' || k == 'isroot' || k == 'direction' || k == 'expanded') {\n                        continue;\n                    }\n                    data[k] = node_json[k];\n                }\n                return data;\n            },\n\n            _array: function (mind, node_array) {\n                var df = jm.format.node_array;\n                df._array_node(mind.root, node_array);\n            },\n\n            _array_node: function (node, node_array) {\n                var df = jm.format.node_array;\n                if (!(node instanceof jm.node)) { return; }\n                var o = {\n                    id: node.id,\n                    topic: node.topic,\n                    expanded: node.expanded\n                };\n                if (!!node.parent) {\n                    o.parentid = node.parent.id;\n                }\n                if (node.isroot) {\n                    o.isroot = true;\n                }\n                if (!!node.parent && node.parent.isroot) {\n                    o.direction = node.direction == jm.direction.left ? 'left' : 'right';\n                }\n                if (node.data != null) {\n                    var node_data = node.data;\n                    for (var k in node_data) {\n                        o[k] = node_data[k];\n                    }\n                }\n                node_array.push(o);\n                var ci = node.children.length;\n                for (var i = 0; i < ci; i++) {\n                    df._array_node(node.children[i], node_array);\n                }\n            },\n        },\n\n        freemind: {\n            example: {\n                \"meta\": {\n                    \"name\": __name__,\n                    \"author\": __author__,\n                    \"version\": __version__\n                },\n                \"format\": \"freemind\",\n                \"data\": \"<map version=\\\"1.0.1\\\"><node ID=\\\"root\\\" TEXT=\\\"freemind Example\\\"/></map>\"\n            },\n            get_mind: function (source) {\n                var df = jm.format.freemind;\n                var mind = new jm.mind();\n                mind.name = source.meta.name;\n                mind.author = source.meta.author;\n                mind.version = source.meta.version;\n                var xml = source.data;\n                var xml_doc = df._parse_xml(xml);\n                var xml_root = df._find_root(xml_doc);\n                df._load_node(mind, null, xml_root);\n                return mind;\n            },\n\n            get_data: function (mind) {\n                var df = jm.format.freemind;\n                var json = {};\n                json.meta = {\n                    name: mind.name,\n                    author: mind.author,\n                    version: mind.version\n                };\n                json.format = 'freemind';\n                var xmllines = [];\n                xmllines.push('<map version=\\\"1.0.1\\\">');\n                df._buildmap(mind.root, xmllines);\n                xmllines.push('</map>');\n                json.data = xmllines.join(' ');\n                return json;\n            },\n\n            _parse_xml: function (xml) {\n                var xml_doc = null;\n                if (window.DOMParser) {\n                    var parser = new DOMParser();\n                    xml_doc = parser.parseFromString(xml, 'text/xml');\n                } else { // Internet Explorer\n                    xml_doc = new ActiveXObject('Microsoft.XMLDOM');\n                    xml_doc.async = false;\n                    xml_doc.loadXML(xml);\n                }\n                return xml_doc;\n            },\n\n            _find_root: function (xml_doc) {\n                var nodes = xml_doc.childNodes;\n                var node = null;\n                var root = null;\n                var n = null;\n                for (var i = 0; i < nodes.length; i++) {\n                    n = nodes[i];\n                    if (n.nodeType == 1 && n.tagName == 'map') {\n                        node = n;\n                        break;\n                    }\n                }\n                if (!!node) {\n                    var ns = node.childNodes;\n                    node = null;\n                    for (var i = 0; i < ns.length; i++) {\n                        n = ns[i];\n                        if (n.nodeType == 1 && n.tagName == 'node') {\n                            node = n;\n                            break;\n                        }\n                    }\n                }\n                return node;\n            },\n\n            _load_node: function (mind, parent_id, xml_node) {\n                var df = jm.format.freemind;\n                var node_id = xml_node.getAttribute('ID');\n                var node_topic = xml_node.getAttribute('TEXT');\n                // look for richcontent\n                if (node_topic == null) {\n                    var topic_children = xml_node.childNodes;\n                    var topic_child = null;\n                    for (var i = 0; i < topic_children.length; i++) {\n                        topic_child = topic_children[i];\n                        //logger.debug(topic_child.tagName);\n                        if (topic_child.nodeType == 1 && topic_child.tagName === 'richcontent') {\n                            node_topic = topic_child.textContent;\n                            break;\n                        }\n                    }\n                }\n                var node_data = df._load_attributes(xml_node);\n                var node_expanded = ('expanded' in node_data) ? (node_data.expanded == 'true') : true;\n                delete node_data.expanded;\n\n                var node_position = xml_node.getAttribute('POSITION');\n                var node_direction = null;\n                if (!!node_position) {\n                    node_direction = node_position == 'left' ? jm.direction.left : jm.direction.right;\n                }\n                //logger.debug(node_position +':'+ node_direction);\n                if (!!parent_id) {\n                    mind.add_node(parent_id, node_id, node_topic, node_data, null, node_direction, node_expanded);\n                } else {\n                    mind.set_root(node_id, node_topic, node_data);\n                }\n                var children = xml_node.childNodes;\n                var child = null;\n                for (var i = 0; i < children.length; i++) {\n                    child = children[i];\n                    if (child.nodeType == 1 && child.tagName == 'node') {\n                        df._load_node(mind, node_id, child);\n                    }\n                }\n            },\n\n            _load_attributes: function (xml_node) {\n                var children = xml_node.childNodes;\n                var attr = null;\n                var attr_data = {};\n                for (var i = 0; i < children.length; i++) {\n                    attr = children[i];\n                    if (attr.nodeType == 1 && attr.tagName === 'attribute') {\n                        attr_data[attr.getAttribute('NAME')] = attr.getAttribute('VALUE');\n                    }\n                }\n                return attr_data;\n            },\n\n            _buildmap: function (node, xmllines) {\n                var df = jm.format.freemind;\n                var pos = null;\n                if (!!node.parent && node.parent.isroot) {\n                    pos = node.direction === jm.direction.left ? 'left' : 'right';\n                }\n                xmllines.push('<node');\n                xmllines.push('ID=\\\"' + node.id + '\\\"');\n                if (!!pos) {\n                    xmllines.push('POSITION=\\\"' + pos + '\\\"');\n                }\n                xmllines.push('TEXT=\\\"' + node.topic + '\\\">');\n\n                // store expanded status as an attribute\n                xmllines.push('<attribute NAME=\\\"expanded\\\" VALUE=\\\"' + node.expanded + '\\\"/>');\n\n                // for attributes\n                var node_data = node.data;\n                if (node_data != null) {\n                    for (var k in node_data) {\n                        xmllines.push('<attribute NAME=\\\"' + k + '\\\" VALUE=\\\"' + node_data[k] + '\\\"/>');\n                    }\n                }\n\n                // for children\n                var children = node.children;\n                for (var i = 0; i < children.length; i++) {\n                    df._buildmap(children[i], xmllines);\n                }\n\n                xmllines.push('</node>');\n            },\n        },\n    };\n\n    // ============= utility object =============================================\n\n    jm.util = {\n        is_node: function (node) {\n            return !!node && node instanceof jm.node;\n        },\n        ajax: {\n            _xhr: function () {\n                var xhr = null;\n                if (window.XMLHttpRequest) {\n                    xhr = new XMLHttpRequest();\n                } else {\n                    try {\n                        xhr = new ActiveXObject('Microsoft.XMLHTTP');\n                    } catch (e) { }\n                }\n                return xhr;\n            },\n            _eurl: function (url) {\n                return encodeURIComponent(url);\n            },\n            request: function (url, param, method, callback, fail_callback) {\n                var a = jm.util.ajax;\n                var p = null;\n                var tmp_param = [];\n                for (var k in param) {\n                    tmp_param.push(a._eurl(k) + '=' + a._eurl(param[k]));\n                }\n                if (tmp_param.length > 0) {\n                    p = tmp_param.join('&');\n                }\n                var xhr = a._xhr();\n                if (!xhr) { return; }\n                xhr.onreadystatechange = function () {\n                    if (xhr.readyState == 4) {\n                        if (xhr.status == 200 || xhr.status == 0) {\n                            if (typeof callback === 'function') {\n                                var data = jm.util.json.string2json(xhr.responseText);\n                                if (data != null) {\n                                    callback(data);\n                                } else {\n                                    callback(xhr.responseText);\n                                }\n                            }\n                        } else {\n                            if (typeof fail_callback === 'function') {\n                                fail_callback(xhr);\n                            } else {\n                                logger.error('xhr request failed.', xhr);\n                            }\n                        }\n                    }\n                }\n                method = method || 'GET';\n                xhr.open(method, url, true);\n                xhr.setRequestHeader('If-Modified-Since', '0');\n                if (method == 'POST') {\n                    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded;charset=utf-8');\n                    xhr.send(p);\n                } else {\n                    xhr.send();\n                }\n            },\n            get: function (url, callback) {\n                return jm.util.ajax.request(url, {}, 'GET', callback);\n            },\n            post: function (url, param, callback) {\n                return jm.util.ajax.request(url, param, 'POST', callback);\n            }\n        },\n\n        dom: {\n            //target,eventType,handler\n            add_event: function (t, e, h) {\n                if (!!t.addEventListener) {\n                    t.addEventListener(e, h, false);\n                } else {\n                    t.attachEvent('on' + e, h);\n                }\n            }\n        },\n\n        file: {\n            read: function (file_data, fn_callback) {\n                var reader = new FileReader();\n                reader.onload = function () {\n                    if (typeof fn_callback === 'function') {\n                        fn_callback(this.result, file_data.name);\n                    }\n                };\n                reader.readAsText(file_data);\n            },\n\n            save: function (file_data, type, name) {\n                var blob;\n                if (typeof $w.Blob === 'function') {\n                    blob = new Blob([file_data], { type: type });\n                } else {\n                    var BlobBuilder = $w.BlobBuilder || $w.MozBlobBuilder || $w.WebKitBlobBuilder || $w.MSBlobBuilder;\n                    var bb = new BlobBuilder();\n                    bb.append(file_data);\n                    blob = bb.getBlob(type);\n                }\n                if (navigator.msSaveBlob) {\n                    navigator.msSaveBlob(blob, name);\n                } else {\n                    var URL = $w.URL || $w.webkitURL;\n                    var bloburl = URL.createObjectURL(blob);\n                    var anchor = $c('a');\n                    if ('download' in anchor) {\n                        anchor.style.visibility = 'hidden';\n                        anchor.href = bloburl;\n                        anchor.download = name;\n                        $d.body.appendChild(anchor);\n                        var evt = $d.createEvent('MouseEvents');\n                        evt.initEvent('click', true, true);\n                        anchor.dispatchEvent(evt);\n                        $d.body.removeChild(anchor);\n                    } else {\n                        location.href = bloburl;\n                    }\n                }\n            }\n        },\n\n        json: {\n            json2string: function (json) {\n                if (!!JSON) {\n                    try {\n                        var json_str = JSON.stringify(json);\n                        return json_str;\n                    } catch (e) {\n                        logger.warn(e);\n                        logger.warn('can not convert to string');\n                        return null;\n                    }\n                }\n            },\n            string2json: function (json_str) {\n                if (!!JSON) {\n                    try {\n                        var json = JSON.parse(json_str);\n                        return json;\n                    } catch (e) {\n                        logger.warn(e);\n                        logger.warn('can not parse to json');\n                        return null;\n                    }\n                }\n            },\n            merge: function (b, a) {\n                for (var o in a) {\n                    if (o in b) {\n                        if (typeof b[o] === 'object' &&\n                            Object.prototype.toString.call(b[o]).toLowerCase() == '[object object]' &&\n                            !b[o].length) {\n                            jm.util.json.merge(b[o], a[o]);\n                        } else {\n                            b[o] = a[o];\n                        }\n                    } else {\n                        b[o] = a[o];\n                    }\n                }\n                return b;\n            }\n        },\n\n        uuid: {\n            newid: function () {\n                return (new Date().getTime().toString(16) + Math.random().toString(16).substr(2)).substr(2, 16);\n            }\n        },\n\n        text: {\n            is_empty: function (s) {\n                if (!s) { return true; }\n                return s.replace(/\\s*/, '').length == 0;\n            }\n        }\n    };\n\n    jm.prototype = {\n        init: function () {\n            if (this.inited) { return; }\n            this.inited = true;\n\n            var opts = this.options;\n\n            var opts_layout = {\n                mode: opts.mode,\n                hspace: opts.layout.hspace,\n                vspace: opts.layout.vspace,\n                pspace: opts.layout.pspace\n            }\n            var opts_view = {\n                container: opts.container,\n                support_html: opts.support_html,\n                engine: opts.view.engine,\n                hmargin: opts.view.hmargin,\n                vmargin: opts.view.vmargin,\n                line_width: opts.view.line_width,\n                line_color: opts.view.line_color\n            };\n            // create instance of function provider\n            this.data = new jm.data_provider(this);\n            this.layout = new jm.layout_provider(this, opts_layout);\n            this.view = new jm.view_provider(this, opts_view);\n            this.shortcut = new jm.shortcut_provider(this, opts.shortcut);\n\n            this.data.init();\n            this.layout.init();\n            this.view.init();\n            this.shortcut.init();\n\n            this._event_bind();\n\n            jm.init_plugins(this);\n        },\n\n        enable_edit: function () {\n            this.options.editable = true;\n        },\n\n        disable_edit: function () {\n            this.options.editable = false;\n        },\n\n        // call enable_event_handle('dblclick')\n        // options are 'mousedown', 'click', 'dblclick'\n        enable_event_handle: function (event_handle) {\n            this.options.default_event_handle['enable_' + event_handle + '_handle'] = true;\n        },\n\n        // call disable_event_handle('dblclick')\n        // options are 'mousedown', 'click', 'dblclick'\n        disable_event_handle: function (event_handle) {\n            this.options.default_event_handle['enable_' + event_handle + '_handle'] = false;\n        },\n\n        get_editable: function () {\n            return this.options.editable;\n        },\n\n        set_theme: function (theme) {\n            var theme_old = this.options.theme;\n            this.options.theme = (!!theme) ? theme : null;\n            if (theme_old != this.options.theme) {\n                this.view.reset_theme();\n                this.view.reset_custom_style();\n            }\n        },\n        _event_bind: function () {\n            this.view.add_event(this, 'mousedown', this.mousedown_handle);\n            this.view.add_event(this, 'click', this.click_handle);\n            this.view.add_event(this, 'dblclick', this.dblclick_handle);\n        },\n\n        mousedown_handle: function (e) {\n            if (!this.options.default_event_handle['enable_mousedown_handle']) {\n                return;\n            }\n            var element = e.target || event.srcElement;\n            var nodeid = this.view.get_binded_nodeid(element);\n            if (!!nodeid) {\n                if (element.tagName.toLowerCase() == 'jmnode') {\n                    this.select_node(nodeid);\n                }\n            } else {\n                this.select_clear();\n            }\n        },\n\n        click_handle: function (e) {\n            if (!this.options.default_event_handle['enable_click_handle']) {\n                return;\n            }\n            var element = e.target || event.srcElement;\n            var isexpander = this.view.is_expander(element);\n            if (isexpander) {\n                var nodeid = this.view.get_binded_nodeid(element);\n                if (!!nodeid) {\n                    this.toggle_node(nodeid);\n                }\n            }\n        },\n\n        dblclick_handle: function (e) {\n            if (!this.options.default_event_handle['enable_dblclick_handle']) {\n                return;\n            }\n            if (this.get_editable()) {\n                var element = e.target || event.srcElement;\n                var nodeid = this.view.get_binded_nodeid(element);\n                if (!!nodeid) {\n                    this.begin_edit(nodeid);\n                }\n            }\n        },\n\n        begin_edit: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return false;\n                } else {\n                    return this.begin_edit(the_node);\n                }\n            }\n            if (this.get_editable()) {\n                this.view.edit_node_begin(node);\n            } else {\n                logger.error('fail, this mind map is not editable.');\n                return;\n            }\n        },\n\n        end_edit: function () {\n            this.view.edit_node_end();\n        },\n\n        toggle_node: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.toggle_node(the_node);\n                }\n            }\n            if (node.isroot) { return; }\n            this.view.save_location(node);\n            this.layout.toggle_node(node);\n            this.view.relayout();\n            this.view.restore_location(node);\n        },\n\n        expand_node: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.expand_node(the_node);\n                }\n            }\n            if (node.isroot) { return; }\n            this.view.save_location(node);\n            this.layout.expand_node(node);\n            this.view.relayout();\n            this.view.restore_location(node);\n        },\n\n        collapse_node: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.collapse_node(the_node);\n                }\n            }\n            if (node.isroot) { return; }\n            this.view.save_location(node);\n            this.layout.collapse_node(node);\n            this.view.relayout();\n            this.view.restore_location(node);\n        },\n\n        expand_all: function () {\n            this.layout.expand_all();\n            this.view.relayout();\n        },\n\n        collapse_all: function () {\n            this.layout.collapse_all();\n            this.view.relayout();\n        },\n\n        expand_to_depth: function (depth) {\n            this.layout.expand_to_depth(depth);\n            this.view.relayout();\n        },\n\n        _reset: function () {\n            this.view.reset();\n            this.layout.reset();\n            this.data.reset();\n        },\n\n        _show: function (mind) {\n            var m = mind || jm.format.node_array.example;\n\n            this.mind = this.data.load(m);\n            if (!this.mind) {\n                logger.error('data.load error');\n                return;\n            } else {\n                logger.debug('data.load ok');\n            }\n\n            this.view.load();\n            logger.debug('view.load ok');\n\n            this.layout.layout();\n            logger.debug('layout.layout ok');\n\n            this.view.show(true);\n            logger.debug('view.show ok');\n\n            this.invoke_event_handle(jm.event_type.show, { data: [mind] });\n        },\n\n        show: function (mind) {\n            this._reset();\n            this._show(mind);\n        },\n\n        get_meta: function () {\n            return {\n                name: this.mind.name,\n                author: this.mind.author,\n                version: this.mind.version\n            };\n        },\n\n        get_data: function (data_format) {\n            var df = data_format || 'node_tree';\n            return this.data.get_data(df);\n        },\n\n        get_root: function () {\n            return this.mind.root;\n        },\n\n        get_node: function (nodeid) {\n            return this.mind.get_node(nodeid);\n        },\n\n        add_node: function (parent_node, nodeid, topic, data, from) {\n            if (this.get_editable()) {\n                var node = this.mind.add_node(parent_node, nodeid, topic, data);\n                if (!!node) {\n                    this.view.add_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                    this.view.reset_node_custom_style(node);\n                    this.expand_node(parent_node);\n                    this.invoke_event_handle(jm.event_type.edit, { evt: 'add_node', data: [parent_node.id, nodeid, topic, data], node: nodeid });\n                }\n\n                if (this.isWhenIncluded(node) && from != 'break'){\n                    this.add_YN_tail(node, true)\n                }\n\n                return node;\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        insert_node_before: function (node_before, nodeid, topic, data) {\n            if (this.get_editable()) {\n                var beforeid = jm.util.is_node(node_before) ? node_before.id : node_before;\n                var node = this.mind.insert_node_before(node_before, nodeid, topic, data);\n                if (!!node) {\n                    this.view.add_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                    this.invoke_event_handle(jm.event_type.edit, { evt: 'insert_node_before', data: [beforeid, nodeid, topic, data], node: nodeid });\n                }\n                return node;\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        insert_node_after: function (node_after, nodeid, topic, data) {\n\n            if (this.get_editable()) {\n                var afterid = jm.util.is_node(node_after) ? node_after.id : node_after;\n                var node = this.mind.insert_node_after(node_after, nodeid, topic, data);\n                if (!!node) {\n                    this.view.add_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                    this.invoke_event_handle(jm.event_type.edit, { evt: 'insert_node_after', data: [afterid, nodeid, topic, data], node: nodeid });\n                }\n                if (this.isWhenIncluded(node)){\n                    this.add_YN_tail(node, true)\n\n                }\n                return node;\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n        isWhenIncluded: function(node) {\n\n            if (node['isroot']==true){\n                return false\n            }\n\n            if (node['id']=='when'){\n                \n                return true \n\n            }\n            \n            return this.isWhenIncluded(node['parent']);\n                        \n\n        },\n\n        remove_node: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return false;\n                } else {\n                    return this.remove_node(the_node);\n                }\n            }\n            if (this.get_editable()) {\n                if (node.isroot) {\n                    logger.error('fail, can not remove root node');\n                    return false;\n                }\n                var nodeid = node.id;\n                var parentid = node.parent.id;\n                var parent_node = this.get_node(parentid);\n                this.view.save_location(parent_node);\n                this.view.remove_node(node);\n                this.mind.remove_node(node);\n                this.layout.layout();\n                this.view.show(false);\n                this.view.restore_location(parent_node);\n                this.invoke_event_handle(jm.event_type.edit, { evt: 'remove_node', data: [nodeid], node: parentid });\n                return true;\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return false;\n            }\n        },\n\n        update_node: function (nodeid, topic) {\n            if (this.get_editable()) {\n                if (jm.util.text.is_empty(topic)) {\n                    logger.warn('fail, topic can not be empty');\n                    return;\n                }\n                var node = this.get_node(nodeid);\n                if (!!node) {\n                    if (node.topic === topic) {\n                        logger.info('nothing changed');\n                        this.view.update_node(node);\n                        return;\n                    }\n                    node.topic = topic;\n                    this.view.update_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                    this.invoke_event_handle(jm.event_type.edit, { evt: 'update_node', data: [nodeid, topic], node: nodeid });\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return;\n            }\n        },\n\n        move_node: function (nodeid, beforeid, parentid, direction) {\n            if (this.get_editable()) {\n                var node = this.mind.move_node(nodeid, beforeid, parentid, direction);\n                if (!!node) {\n                    this.view.update_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                    this.invoke_event_handle(jm.event_type.edit, { evt: 'move_node', data: [nodeid, beforeid, parentid, direction], node: nodeid });\n                }\n                console.log(\"move_node\")\n                if (this.isWhenIncluded(node)){\n                    this.add_YN_tail(node)\n\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return;\n            }\n        },\n        add_YN_tail: function(node, isInsert = false){\n            var yes_id = jm.util.uuid.newid();\n            var no_id = jm.util.uuid.newid();\n            \n            if ((node['parent']['topic'] == 'Yes' || node['parent']['topic'] == 'No') && isInsert == false){\n                console.log('add_YN is not working')\n            }\n            else{\n                this.add_node(node,yes_id,\"Yes\",'','break')\n                this.add_node(node,no_id,\"No\",'','break')\n            }\n            // this.add_node(node,yes_id,\"Yes\",'','break')\n            // this.add_node(node,no_id,\"No\",'','break')\n\n\n        },\n\n        select_node: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.select_node(the_node);\n                }\n            }\n            if (!this.layout.is_visible(node)) {\n                return;\n            }\n            this.mind.selected = node;\n            this.view.select_node(node);\n        },\n\n        get_selected_node: function () {\n            if (!!this.mind) {\n                return this.mind.selected;\n            } else {\n                return null;\n            }\n        },\n\n        select_clear: function () {\n            if (!!this.mind) {\n                this.mind.selected = null;\n                this.view.select_clear();\n            }\n        },\n\n        is_node_visible: function (node) {\n            return this.layout.is_visible(node);\n        },\n\n        find_node_before: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.find_node_before(the_node);\n                }\n            }\n            if (node.isroot) { return null; }\n            var n = null;\n            if (node.parent.isroot) {\n                var c = node.parent.children;\n                var prev = null;\n                var ni = null;\n                for (var i = 0; i < c.length; i++) {\n                    ni = c[i];\n                    if (node.direction === ni.direction) {\n                        if (node.id === ni.id) {\n                            n = prev;\n                        }\n                        prev = ni;\n                    }\n                }\n            } else {\n                n = this.mind.get_node_before(node);\n            }\n            return n;\n        },\n\n        find_node_after: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.find_node_after(the_node);\n                }\n            }\n            if (node.isroot) { return null; }\n            var n = null;\n            if (node.parent.isroot) {\n                var c = node.parent.children;\n                var getthis = false;\n                var ni = null;\n                for (var i = 0; i < c.length; i++) {\n                    ni = c[i];\n                    if (node.direction === ni.direction) {\n                        if (getthis) {\n                            n = ni;\n                            break;\n                        }\n                        if (node.id === ni.id) {\n                            getthis = true;\n                        }\n                    }\n                }\n            } else {\n                n = this.mind.get_node_after(node);\n            }\n            return n;\n        },\n\n        set_node_color: function (nodeid, bgcolor, fgcolor) {\n            if (this.get_editable()) {\n                var node = this.mind.get_node(nodeid);\n                if (!!node) {\n                    if (!!bgcolor) {\n                        node.data['background-color'] = bgcolor;\n                    }\n                    if (!!fgcolor) {\n                        node.data['foreground-color'] = fgcolor;\n                    }\n                    this.view.reset_node_custom_style(node);\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        set_node_font_style: function (nodeid, size, weight, style) {\n            if (this.get_editable()) {\n                var node = this.mind.get_node(nodeid);\n                if (!!node) {\n                    if (!!size) {\n                        node.data['font-size'] = size;\n                    }\n                    if (!!weight) {\n                        node.data['font-weight'] = weight;\n                    }\n                    if (!!style) {\n                        node.data['font-style'] = style;\n                    }\n                    this.view.reset_node_custom_style(node);\n                    this.view.update_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        set_node_background_image: function (nodeid, image, width, height, rotation) {\n            if (this.get_editable()) {\n                var node = this.mind.get_node(nodeid);\n                if (!!node) {\n                    if (!!image) {\n                        node.data['background-image'] = image;\n                    }\n                    if (!!width) {\n                        node.data['width'] = width;\n                    }\n                    if (!!height) {\n                        node.data['height'] = height;\n                    }\n                    if (!!rotation) {\n                        node.data['background-rotation'] = rotation;\n                    }\n                    this.view.reset_node_custom_style(node);\n                    this.view.update_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        set_node_background_rotation: function (nodeid, rotation) {\n            if (this.get_editable()) {\n                var node = this.mind.get_node(nodeid);\n                if (!!node) {\n                    if (!node.data['background-image']) {\n                        logger.error('fail, only can change rotation angle of node with background image');\n                        return null;\n                    }\n                    node.data['background-rotation'] = rotation;\n                    this.view.reset_node_custom_style(node);\n                    this.view.update_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        resize: function () {\n            this.view.resize();\n        },\n\n        // callback(type ,data)\n        add_event_listener: function (callback) {\n            if (typeof callback === 'function') {\n                this.event_handles.push(callback);\n            }\n        },\n\n        invoke_event_handle: function (type, data) {\n            var j = this;\n            $w.setTimeout(function () {\n                j._invoke_event_handle(type, data);\n            }, 0);\n        },\n\n        _invoke_event_handle: function (type, data) {\n            var l = this.event_handles.length;\n            for (var i = 0; i < l; i++) {\n                this.event_handles[i](type, data);\n            }\n        },\n\n\n    };\n\n    // ============= data provider =============================================\n\n    jm.data_provider = function (jm) {\n        this.jm = jm;\n    };\n\n    jm.data_provider.prototype = {\n        init: function () {\n            logger.debug('data.init');\n        },\n\n        reset: function () {\n            logger.debug('data.reset');\n        },\n\n        load: function (mind_data) {\n            var df = null;\n            var mind = null;\n            if (typeof mind_data === 'object') {\n                if (!!mind_data.format) {\n                    df = mind_data.format;\n                } else {\n                    df = 'node_tree';\n                }\n            } else {\n                df = 'freemind';\n            }\n\n            if (df == 'node_array') {\n                mind = jm.format.node_array.get_mind(mind_data);\n            } else if (df == 'node_tree') {\n                mind = jm.format.node_tree.get_mind(mind_data);\n            } else if (df == 'freemind') {\n                mind = jm.format.freemind.get_mind(mind_data);\n            } else {\n                logger.warn('unsupported format');\n            }\n            return mind;\n        },\n\n        get_data: function (data_format) {\n            var data = null;\n            if (data_format == 'node_array') {\n                data = jm.format.node_array.get_data(this.jm.mind);\n            } else if (data_format == 'node_tree') {\n                data = jm.format.node_tree.get_data(this.jm.mind);\n            } else if (data_format == 'freemind') {\n                data = jm.format.freemind.get_data(this.jm.mind);\n            } else {\n                logger.error('unsupported ' + data_format + ' format');\n            }\n            return data;\n        },\n    };\n\n    // ============= layout provider ===========================================\n\n    jm.layout_provider = function (jm, options) {\n        this.opts = options;\n        this.jm = jm;\n        this.isside = (this.opts.mode == 'side');\n        this.bounds = null;\n\n        this.cache_valid = false;\n    };\n\n    jm.layout_provider.prototype = {\n        init: function () {\n            logger.debug('layout.init');\n        },\n        reset: function () {\n            logger.debug('layout.reset');\n            this.bounds = { n: 0, s: 0, w: 0, e: 0 };\n        },\n        layout: function () {\n            logger.debug('layout.layout');\n            this.layout_direction();\n            this.layout_offset();\n        },\n\n        layout_direction: function () {\n            this._layout_direction_root();\n        },\n\n        _layout_direction_root: function () {\n            var node = this.jm.mind.root;\n            // logger.debug(node);\n            var layout_data = null;\n            if ('layout' in node._data) {\n                layout_data = node._data.layout;\n            } else {\n                layout_data = {};\n                node._data.layout = layout_data;\n            }\n            var children = node.children;\n            var children_count = children.length;\n            layout_data.direction = jm.direction.center;\n            layout_data.side_index = 0;\n            if (this.isside) {\n                var i = children_count;\n                while (i--) {\n                    this._layout_direction_side(children[i], jm.direction.right, i);\n                }\n            } else {\n                var i = children_count;\n                var subnode = null;\n                while (i--) {\n                    subnode = children[i];\n                    if (subnode.direction == jm.direction.left) {\n                        this._layout_direction_side(subnode, jm.direction.left, i);\n                    } else {\n                        this._layout_direction_side(subnode, jm.direction.right, i);\n                    }\n                }\n                /*\n                var boundary = Math.ceil(children_count/2);\n                var i = children_count;\n                while(i--){\n                    if(i>=boundary){\n                        this._layout_direction_side(children[i],jm.direction.left, children_count-i-1);\n                    }else{\n                        this._layout_direction_side(children[i],jm.direction.right, i);\n                    }\n                }*/\n\n            }\n        },\n\n        _layout_direction_side: function (node, direction, side_index) {\n            var layout_data = null;\n            if ('layout' in node._data) {\n                layout_data = node._data.layout;\n            } else {\n                layout_data = {};\n                node._data.layout = layout_data;\n            }\n            var children = node.children;\n            var children_count = children.length;\n\n            layout_data.direction = direction;\n            layout_data.side_index = side_index;\n            var i = children_count;\n            while (i--) {\n                this._layout_direction_side(children[i], direction, i);\n            }\n        },\n\n        layout_offset: function () {\n            var node = this.jm.mind.root;\n            var layout_data = node._data.layout;\n            layout_data.offset_x = 0;\n            layout_data.offset_y = 0;\n            layout_data.outer_height = 0;\n            var children = node.children;\n            var i = children.length;\n            var left_nodes = [];\n            var right_nodes = [];\n            var subnode = null;\n            while (i--) {\n                subnode = children[i];\n                if (subnode._data.layout.direction == jm.direction.right) {\n                    right_nodes.unshift(subnode);\n                } else {\n                    left_nodes.unshift(subnode);\n                }\n            }\n            layout_data.left_nodes = left_nodes;\n            layout_data.right_nodes = right_nodes;\n            layout_data.outer_height_left = this._layout_offset_subnodes(left_nodes);\n            layout_data.outer_height_right = this._layout_offset_subnodes(right_nodes);\n            this.bounds.e = node._data.view.width / 2;\n            this.bounds.w = 0 - this.bounds.e;\n            //logger.debug(this.bounds.w);\n            this.bounds.n = 0;\n            this.bounds.s = Math.max(layout_data.outer_height_left, layout_data.outer_height_right);\n        },\n\n        // layout both the x and y axis\n        _layout_offset_subnodes: function (nodes) {\n            var total_height = 0;\n            var nodes_count = nodes.length;\n            var i = nodes_count;\n            var node = null;\n            var node_outer_height = 0;\n            var layout_data = null;\n            var base_y = 0;\n            var pd = null; // parent._data\n            while (i--) {\n                node = nodes[i];\n                layout_data = node._data.layout;\n                if (pd == null) {\n                    pd = node.parent._data;\n                }\n\n                node_outer_height = this._layout_offset_subnodes(node.children);\n                if (!node.expanded) {\n                    node_outer_height = 0;\n                    this.set_visible(node.children, false);\n                }\n                node_outer_height = Math.max(node._data.view.height, node_outer_height);\n\n                layout_data.outer_height = node_outer_height;\n                layout_data.offset_y = base_y - node_outer_height / 2;\n                layout_data.offset_x = this.opts.hspace * layout_data.direction + pd.view.width * (pd.layout.direction + layout_data.direction) / 2;\n                if (!node.parent.isroot) {\n                    layout_data.offset_x += this.opts.pspace * layout_data.direction;\n                }\n\n                base_y = base_y - node_outer_height - this.opts.vspace;\n                total_height += node_outer_height;\n            }\n            if (nodes_count > 1) {\n                total_height += this.opts.vspace * (nodes_count - 1);\n            }\n            i = nodes_count;\n            var middle_height = total_height / 2;\n            while (i--) {\n                node = nodes[i];\n                node._data.layout.offset_y += middle_height;\n            }\n            return total_height;\n        },\n\n        // layout the y axis only, for collapse/expand a node\n        _layout_offset_subnodes_height: function (nodes) {\n            var total_height = 0;\n            var nodes_count = nodes.length;\n            var i = nodes_count;\n            var node = null;\n            var node_outer_height = 0;\n            var layout_data = null;\n            var base_y = 0;\n            var pd = null; // parent._data\n            while (i--) {\n                node = nodes[i];\n                layout_data = node._data.layout;\n                if (pd == null) {\n                    pd = node.parent._data;\n                }\n\n                node_outer_height = this._layout_offset_subnodes_height(node.children);\n                if (!node.expanded) {\n                    node_outer_height = 0;\n                }\n                node_outer_height = Math.max(node._data.view.height, node_outer_height);\n\n                layout_data.outer_height = node_outer_height;\n                layout_data.offset_y = base_y - node_outer_height / 2;\n                base_y = base_y - node_outer_height - this.opts.vspace;\n                total_height += node_outer_height;\n            }\n            if (nodes_count > 1) {\n                total_height += this.opts.vspace * (nodes_count - 1);\n            }\n            i = nodes_count;\n            var middle_height = total_height / 2;\n            while (i--) {\n                node = nodes[i];\n                node._data.layout.offset_y += middle_height;\n                //logger.debug(node.topic);\n                //logger.debug(node._data.layout.offset_y);\n            }\n            return total_height;\n        },\n\n        get_node_offset: function (node) {\n            var layout_data = node._data.layout;\n            var offset_cache = null;\n            if (('_offset_' in layout_data) && this.cache_valid) {\n                offset_cache = layout_data._offset_;\n            } else {\n                offset_cache = { x: -1, y: -1 };\n                layout_data._offset_ = offset_cache;\n            }\n            if (offset_cache.x == -1 || offset_cache.y == -1) {\n                var x = layout_data.offset_x;\n                var y = layout_data.offset_y;\n                if (!node.isroot) {\n                    var offset_p = this.get_node_offset(node.parent);\n                    x += offset_p.x;\n                    y += offset_p.y;\n                }\n                offset_cache.x = x;\n                offset_cache.y = y;\n            }\n            return offset_cache;\n        },\n\n        get_node_point: function (node) {\n            var view_data = node._data.view;\n            var offset_p = this.get_node_offset(node);\n            //logger.debug(offset_p);\n            var p = {};\n            p.x = offset_p.x + view_data.width * (node._data.layout.direction - 1) / 2;\n            p.y = offset_p.y - view_data.height / 2;\n            //logger.debug(p);\n            return p;\n        },\n\n        get_node_point_in: function (node) {\n            var p = this.get_node_offset(node);\n            return p;\n        },\n\n        get_node_point_out: function (node) {\n            var layout_data = node._data.layout;\n            var pout_cache = null;\n            if (('_pout_' in layout_data) && this.cache_valid) {\n                pout_cache = layout_data._pout_;\n            } else {\n                pout_cache = { x: -1, y: -1 };\n                layout_data._pout_ = pout_cache;\n            }\n            if (pout_cache.x == -1 || pout_cache.y == -1) {\n                if (node.isroot) {\n                    pout_cache.x = 0;\n                    pout_cache.y = 0;\n                } else {\n                    var view_data = node._data.view;\n                    var offset_p = this.get_node_offset(node);\n                    pout_cache.x = offset_p.x + (view_data.width + this.opts.pspace) * node._data.layout.direction;\n                    pout_cache.y = offset_p.y;\n                    //logger.debug('pout');\n                    //logger.debug(pout_cache);\n                }\n            }\n            return pout_cache;\n        },\n\n        get_expander_point: function (node) {\n            var p = this.get_node_point_out(node);\n            var ex_p = {};\n            if (node._data.layout.direction == jm.direction.right) {\n                ex_p.x = p.x - this.opts.pspace;\n            } else {\n                ex_p.x = p.x;\n            }\n            ex_p.y = p.y - Math.ceil(this.opts.pspace / 2);\n            return ex_p;\n        },\n\n        get_min_size: function () {\n            var nodes = this.jm.mind.nodes;\n            var node = null;\n            var pout = null;\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                pout = this.get_node_point_out(node);\n                if (pout.x > this.bounds.e) { this.bounds.e = pout.x; }\n                if (pout.x < this.bounds.w) { this.bounds.w = pout.x; }\n            }\n            return {\n                w: this.bounds.e - this.bounds.w,\n                h: this.bounds.s - this.bounds.n\n            }\n        },\n\n        toggle_node: function (node) {\n            if (node.isroot) {\n                return;\n            }\n            if (node.expanded) {\n                this.collapse_node(node);\n            } else {\n                this.expand_node(node);\n            }\n        },\n\n        expand_node: function (node) {\n            node.expanded = true;\n            this.part_layout(node);\n            this.set_visible(node.children, true);\n        },\n\n        collapse_node: function (node) {\n            node.expanded = false;\n            this.part_layout(node);\n            this.set_visible(node.children, false);\n        },\n\n        expand_all: function () {\n            var nodes = this.jm.mind.nodes;\n            var c = 0;\n            var node;\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                if (!node.expanded) {\n                    node.expanded = true;\n                    c++;\n                }\n            }\n            if (c > 0) {\n                var root = this.jm.mind.root;\n                this.part_layout(root);\n                this.set_visible(root.children, true);\n            }\n        },\n\n        collapse_all: function () {\n            var nodes = this.jm.mind.nodes;\n            var c = 0;\n            var node;\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                if (node.expanded && !node.isroot) {\n                    node.expanded = false\n                    c++;\n                }\n            }\n            if (c > 0) {\n                var root = this.jm.mind.root;\n                this.part_layout(root);\n                this.set_visible(root.children, true);\n            }\n        },\n\n        expand_to_depth: function (target_depth, curr_nodes, curr_depth) {\n            if (target_depth < 1) { return; }\n            var nodes = curr_nodes || this.jm.mind.root.children;\n            var depth = curr_depth || 1;\n            var i = nodes.length;\n            var node = null;\n            while (i--) {\n                node = nodes[i];\n                if (depth < target_depth) {\n                    if (!node.expanded) {\n                        this.expand_node(node);\n                    }\n                    this.expand_to_depth(target_depth, node.children, depth + 1);\n                }\n                if (depth == target_depth) {\n                    if (node.expanded) {\n                        this.collapse_node(node);\n                    }\n                }\n            }\n        },\n\n        part_layout: function (node) {\n            var root = this.jm.mind.root;\n            if (!!root) {\n                var root_layout_data = root._data.layout;\n                if (node.isroot) {\n                    root_layout_data.outer_height_right = this._layout_offset_subnodes_height(root_layout_data.right_nodes);\n                    root_layout_data.outer_height_left = this._layout_offset_subnodes_height(root_layout_data.left_nodes);\n                } else {\n                    if (node._data.layout.direction == jm.direction.right) {\n                        root_layout_data.outer_height_right = this._layout_offset_subnodes_height(root_layout_data.right_nodes);\n                    } else {\n                        root_layout_data.outer_height_left = this._layout_offset_subnodes_height(root_layout_data.left_nodes);\n                    }\n                }\n                this.bounds.s = Math.max(root_layout_data.outer_height_left, root_layout_data.outer_height_right);\n                this.cache_valid = false;\n            } else {\n                logger.warn('can not found root node');\n            }\n        },\n\n        set_visible: function (nodes, visible) {\n            var i = nodes.length;\n            var node = null;\n            var layout_data = null;\n            while (i--) {\n                node = nodes[i];\n                layout_data = node._data.layout;\n                if (node.expanded) {\n                    this.set_visible(node.children, visible);\n                } else {\n                    this.set_visible(node.children, false);\n                }\n                if (!node.isroot) {\n                    node._data.layout.visible = visible;\n                }\n            }\n        },\n\n        is_expand: function (node) {\n            return node.expanded;\n        },\n\n        is_visible: function (node) {\n            var layout_data = node._data.layout;\n            if (('visible' in layout_data) && !layout_data.visible) {\n                return false;\n            } else {\n                return true;\n            }\n        }\n    };\n\n    jm.graph_canvas = function (view) {\n        this.opts = view.opts;\n        this.e_canvas = $c('canvas');\n        this.canvas_ctx = this.e_canvas.getContext('2d');\n        this.size = { w: 0, h: 0 };\n    };\n\n    jm.graph_canvas.prototype = {\n        element: function () {\n            return this.e_canvas;\n        },\n\n        set_size: function (w, h) {\n            this.size.w = w;\n            this.size.h = h;\n            this.e_canvas.width = w;\n            this.e_canvas.height = h;\n        },\n\n        clear: function () {\n            this.canvas_ctx.clearRect(0, 0, this.size.w, this.size.h);\n        },\n\n        draw_line: function (pout, pin, offset) {\n            var ctx = this.canvas_ctx;\n            ctx.strokeStyle = this.opts.line_color;\n            ctx.lineWidth = this.opts.line_width;\n            ctx.lineCap = 'round';\n\n            this._bezier_to(ctx,\n                pin.x + offset.x,\n                pin.y + offset.y,\n                pout.x + offset.x,\n                pout.y + offset.y);\n        },\n\n        copy_to: function (dest_canvas_ctx, callback) {\n            dest_canvas_ctx.drawImage(this.e_canvas, 0, 0);\n            !!callback && callback();\n        },\n\n        _bezier_to: function (ctx, x1, y1, x2, y2) {\n            ctx.beginPath();\n            ctx.moveTo(x1, y1);\n            ctx.bezierCurveTo(x1 + (x2 - x1) * 2 / 3, y1, x1, y2, x2, y2);\n            ctx.stroke();\n        },\n\n        _line_to: function (ctx, x1, y1, x2, y2) {\n            ctx.beginPath();\n            ctx.moveTo(x1, y1);\n            ctx.lineTo(x2, y2);\n            ctx.stroke();\n        }\n    };\n\n    jm.graph_svg = function (view) {\n        this.view = view;\n        this.opts = view.opts;\n        this.e_svg = jm.graph_svg.c('svg');\n        this.size = { w: 0, h: 0 };\n        this.lines = [];\n    };\n\n    jm.graph_svg.c = function (tag) {\n        return $d.createElementNS('http://www.w3.org/2000/svg', tag);\n    };\n\n    jm.graph_svg.prototype = {\n        element: function () {\n            return this.e_svg;\n        },\n\n        set_size: function (w, h) {\n            this.size.w = w;\n            this.size.h = h;\n            this.e_svg.setAttribute('width', w);\n            this.e_svg.setAttribute('height', h);\n        },\n\n        clear: function () {\n            var len = this.lines.length;\n            while (len--) {\n                this.e_svg.removeChild(this.lines[len]);\n            }\n            this.lines.length = 0;\n        },\n\n        draw_line: function (pout, pin, offset) {\n            var line = jm.graph_svg.c('path');\n            line.setAttribute('stroke', this.opts.line_color);\n            line.setAttribute('stroke-width', this.opts.line_width);\n            line.setAttribute('fill', 'transparent');\n            this.lines.push(line);\n            this.e_svg.appendChild(line);\n            this._bezier_to(line, pin.x + offset.x, pin.y + offset.y, pout.x + offset.x, pout.y + offset.y);\n        },\n\n        copy_to: function (dest_canvas_ctx, callback) {\n            var img = new Image();\n            img.onload = function () {\n                dest_canvas_ctx.drawImage(img, 0, 0);\n                !!callback && callback();\n            }\n            img.src = 'data:image/svg+xml;base64,' + btoa(new XMLSerializer().serializeToString(this.e_svg));\n        },\n\n        _bezier_to: function (path, x1, y1, x2, y2) {\n            path.setAttribute('d', 'M' + x1 + ' ' + y1 + ' C ' + (x1 + (x2 - x1) * 2 / 3) + ' ' + y1 + ', ' + x1 + ' ' + y2 + ', ' + x2 + ' ' + y2);\n        },\n\n        _line_to: function (path, x1, y1, x2, y2) {\n            path.setAttribute('d', 'M ' + x1 + ' ' + y1 + ' L ' + x2 + ' ' + y2);\n        }\n    };\n\n    // view provider\n    jm.view_provider = function (jm, options) {\n        this.opts = options;\n        this.jm = jm;\n        this.layout = jm.layout;\n\n        this.container = null;\n        this.e_panel = null;\n        this.e_nodes = null;\n\n        this.size = { w: 0, h: 0 };\n\n        this.selected_node = null;\n        this.editing_node = null;\n\n        this.graph = null;\n    };\n\n    jm.view_provider.prototype = {\n        init: function () {\n            logger.debug('view.init');\n\n            this.container = $i(this.opts.container) ? this.opts.container : $g(this.opts.container);\n            if (!this.container) {\n                logger.error('the options.view.container was not be found in dom');\n                return;\n            }\n            this.e_panel = $c('div');\n            this.e_nodes = $c('jmnodes');\n            this.e_editor = $c('input');\n\n            this.graph = this.opts.engine.toLowerCase() === 'svg' ? new jm.graph_svg(this) : new jm.graph_canvas(this);\n\n            this.e_panel.className = 'jsmind-inner';\n            this.e_panel.appendChild(this.graph.element());\n            this.e_panel.appendChild(this.e_nodes);\n\n            this.e_editor.className = 'jsmind-editor';\n            this.e_editor.type = 'text';\n\n            this.actualZoom = 1;\n            this.zoomStep = 0.1;\n            this.minZoom = 0.5;\n            this.maxZoom = 2;\n\n            var v = this;\n            jm.util.dom.add_event(this.e_editor, 'keydown', function (e) {\n                var evt = e || event;\n                if (evt.keyCode == 13) { v.edit_node_end(); evt.stopPropagation(); }\n            });\n            jm.util.dom.add_event(this.e_editor, 'blur', function (e) {\n                v.edit_node_end();\n            });\n\n            this.container.appendChild(this.e_panel);\n        },\n\n        add_event: function (obj, event_name, event_handle) {\n            jm.util.dom.add_event(this.e_nodes, event_name, function (e) {\n                var evt = e || event;\n                event_handle.call(obj, evt);\n            });\n        },\n\n        get_binded_nodeid: function (element) {\n            if (element == null) {\n                return null;\n            }\n            var tagName = element.tagName.toLowerCase();\n            if (tagName == 'jmnodes' || tagName == 'body' || tagName == 'html') {\n                return null;\n            }\n            if (tagName == 'jmnode' || tagName == 'jmexpander') {\n                return element.getAttribute('nodeid');\n            } else {\n                return this.get_binded_nodeid(element.parentElement);\n            }\n        },\n\n        is_expander: function (element) {\n            return (element.tagName.toLowerCase() == 'jmexpander');\n        },\n\n        reset: function () {\n            logger.debug('view.reset');\n            this.selected_node = null;\n            this.clear_lines();\n            this.clear_nodes();\n            this.reset_theme();\n        },\n\n        reset_theme: function () {\n            var theme_name = this.jm.options.theme;\n            if (!!theme_name) {\n                this.e_nodes.className = 'theme-' + theme_name;\n            } else {\n                this.e_nodes.className = '';\n            }\n        },\n\n        reset_custom_style: function () {\n            var nodes = this.jm.mind.nodes;\n            for (var nodeid in nodes) {\n                this.reset_node_custom_style(nodes[nodeid]);\n            }\n        },\n\n        load: function () {\n            logger.debug('view.load');\n            this.init_nodes();\n        },\n\n        expand_size: function () {\n            var min_size = this.layout.get_min_size();\n            var min_width = min_size.w + this.opts.hmargin * 2;\n            var min_height = min_size.h + this.opts.vmargin * 2;\n            var client_w = this.e_panel.clientWidth;\n            var client_h = this.e_panel.clientHeight;\n            if (client_w < min_width) { client_w = min_width; }\n            if (client_h < min_height) { client_h = min_height; }\n            this.size.w = client_w;\n            this.size.h = client_h;\n        },\n\n        init_nodes_size: function (node) {\n            var view_data = node._data.view;\n            view_data.width = view_data.element.clientWidth;\n            view_data.height = view_data.element.clientHeight;\n        },\n\n        init_nodes: function () {\n            var nodes = this.jm.mind.nodes;\n            var doc_frag = $d.createDocumentFragment();\n            for (var nodeid in nodes) {\n                this.create_node_element(nodes[nodeid], doc_frag);\n            }\n            this.e_nodes.appendChild(doc_frag);\n            for (var nodeid in nodes) {\n                this.init_nodes_size(nodes[nodeid]);\n            }\n        },\n\n        add_node: function (node) {\n            this.create_node_element(node, this.e_nodes);\n            this.init_nodes_size(node);\n            \n        },\n        add_yes_no: function(node_after){\n            var yes_id = jm.util.uuid.newid();\n            var no_id = jm.util.uuid.newid();\n\n        },\n        isWhenIncluded: function(node) {\n\n            if (node['isroot']==true){\n                return false\n            }\n\n            if (node['topic']=='When'){\n                \n                return true \n\n            }\n            \n            return this.isWhenIncluded(node['parent']);\n                        \n\n        },\n\n\n        create_node_element: function (node, parent_node) {\n            var view_data = null;\n            if ('view' in node._data) {\n                view_data = node._data.view;\n            } else {\n                view_data = {};\n                node._data.view = view_data;\n            }\n\n            var d = $c('jmnode');\n            if (node.isroot) {\n                d.className = 'root';\n            } else {\n                var d_e = $c('jmexpander');\n                $t(d_e, '-');\n                d_e.setAttribute('nodeid', node.id);\n                d_e.style.visibility = 'hidden';\n                parent_node.appendChild(d_e);\n                view_data.expander = d_e;\n            }\n            if (!!node.topic) {\n                if (this.opts.support_html) {\n                    $h(d, node.topic);\n                } else {\n                    $t(d, node.topic);\n                }\n            }\n            d.setAttribute('nodeid', node.id);\n            d.style.visibility = 'hidden';\n            this._reset_node_custom_style(d, node.data);\n\n            parent_node.appendChild(d);\n            view_data.element = d;\n        },\n\n        remove_node: function (node) {\n            if (this.selected_node != null && this.selected_node.id == node.id) {\n                this.selected_node = null;\n            }\n            if (this.editing_node != null && this.editing_node.id == node.id) {\n                node._data.view.element.removeChild(this.e_editor);\n                this.editing_node = null;\n            }\n            var children = node.children;\n            var i = children.length;\n            while (i--) {\n                this.remove_node(children[i]);\n            }\n            if (node._data.view) {\n                var element = node._data.view.element;\n                var expander = node._data.view.expander;\n                this.e_nodes.removeChild(element);\n                this.e_nodes.removeChild(expander);\n                node._data.view.element = null;\n                node._data.view.expander = null;\n            }\n        },\n\n        update_node: function (node) {\n            var view_data = node._data.view;\n            var element = view_data.element;\n            if (!!node.topic) {\n                if (this.opts.support_html) {\n                    $h(element, node.topic);\n                } else {\n                    $t(element, node.topic);\n                }\n            }\n            view_data.width = element.clientWidth;\n            view_data.height = element.clientHeight;\n        },\n\n        select_node: function (node) {\n            if (!!this.selected_node) {\n                this.selected_node._data.view.element.className =\n                    this.selected_node._data.view.element.className.replace(/\\s*selected\\b/i, '');\n                this.reset_node_custom_style(this.selected_node);\n            }\n            if (!!node) {\n                this.selected_node = node;\n                node._data.view.element.className += ' selected';\n                this.clear_node_custom_style(node);\n            }\n        },\n\n        select_clear: function () {\n            this.select_node(null);\n        },\n\n        get_editing_node: function () {\n            return this.editing_node;\n        },\n\n        is_editing: function () {\n            return (!!this.editing_node);\n        },\n\n        edit_node_begin: function (node) {\n            if (!node.topic) {\n                logger.warn(\"don't edit image nodes\");\n                return;\n            }\n            if (this.editing_node != null) {\n                this.edit_node_end();\n            }\n            this.editing_node = node;\n            var view_data = node._data.view;\n            var element = view_data.element;\n            var topic = node.topic;\n            var ncs = getComputedStyle(element);\n            this.e_editor.value = topic;\n            this.e_editor.style.width = (element.clientWidth - parseInt(ncs.getPropertyValue('padding-left')) - parseInt(ncs.getPropertyValue('padding-right'))) + 'px';\n            element.innerHTML = '';\n            element.appendChild(this.e_editor);\n            element.style.zIndex = 5;\n            this.e_editor.focus();\n            this.e_editor.select();\n        },\n\n        edit_node_end: function () {\n            if (this.editing_node != null) {\n                var node = this.editing_node;\n                this.editing_node = null;\n                var view_data = node._data.view;\n                var element = view_data.element;\n                var topic = this.e_editor.value;\n                element.style.zIndex = 'auto';\n                element.removeChild(this.e_editor);\n                if (jm.util.text.is_empty(topic) || node.topic === topic) {\n                    if (this.opts.support_html) {\n                        $h(element, node.topic);\n                    } else {\n                        $t(element, node.topic);\n                    }\n                } else {\n                    this.jm.update_node(node.id, topic);\n                }\n            }\n        },\n\n        get_view_offset: function () {\n            var bounds = this.layout.bounds;\n            var _x = (this.size.w - bounds.e - bounds.w) / 2;\n            var _y = this.size.h / 2;\n            return { x: _x, y: _y };\n        },\n\n        resize: function () {\n            this.graph.set_size(1, 1);\n            this.e_nodes.style.width = '1px';\n            this.e_nodes.style.height = '1px';\n\n            this.expand_size();\n            this._show();\n        },\n\n        _show: function () {\n            this.graph.set_size(this.size.w, this.size.h);\n            this.e_nodes.style.width = this.size.w + 'px';\n            this.e_nodes.style.height = this.size.h + 'px';\n            this.show_nodes();\n            this.show_lines();\n            //this.layout.cache_valid = true;\n            this.jm.invoke_event_handle(jm.event_type.resize, { data: [] });\n        },\n\n        zoomIn: function () {\n            return this.setZoom(this.actualZoom + this.zoomStep);\n        },\n\n        zoomOut: function () {\n            return this.setZoom(this.actualZoom - this.zoomStep);\n        },\n\n        setZoom: function (zoom) {\n            if ((zoom < this.minZoom) || (zoom > this.maxZoom)) {\n                return false;\n            }\n            this.actualZoom = zoom;\n            for (var i = 0; i < this.e_panel.children.length; i++) {\n                this.e_panel.children[i].style.transform = 'scale(' + zoom + ')';\n            };\n            this.show(true);\n            return true;\n\n        },\n\n        _center_root: function () {\n            // center root node\n            var outer_w = this.e_panel.clientWidth;\n            var outer_h = this.e_panel.clientHeight;\n            if (this.size.w > outer_w) {\n                var _offset = this.get_view_offset();\n                this.e_panel.scrollLeft = _offset.x - outer_w / 2;\n            }\n            if (this.size.h > outer_h) {\n                this.e_panel.scrollTop = (this.size.h - outer_h) / 2;\n            }\n        },\n\n        show: function (keep_center) {\n            logger.debug('view.show');\n            this.expand_size();\n            this._show();\n            if (!!keep_center) {\n                this._center_root();\n            }\n        },\n\n        relayout: function () {\n            this.expand_size();\n            this._show();\n        },\n\n        save_location: function (node) {\n            var vd = node._data.view;\n            vd._saved_location = {\n                x: parseInt(vd.element.style.left) - this.e_panel.scrollLeft,\n                y: parseInt(vd.element.style.top) - this.e_panel.scrollTop,\n            };\n        },\n\n        restore_location: function (node) {\n            var vd = node._data.view;\n            this.e_panel.scrollLeft = parseInt(vd.element.style.left) - vd._saved_location.x;\n            this.e_panel.scrollTop = parseInt(vd.element.style.top) - vd._saved_location.y;\n        },\n\n        clear_nodes: function () {\n            var mind = this.jm.mind;\n            if (mind == null) {\n                return;\n            }\n            var nodes = mind.nodes;\n            var node = null;\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                node._data.view.element = null;\n                node._data.view.expander = null;\n            }\n            this.e_nodes.innerHTML = '';\n        },\n\n        show_nodes: function () {\n            var nodes = this.jm.mind.nodes;\n            var node = null;\n            var node_element = null;\n            var expander = null;\n            var p = null;\n            var p_expander = null;\n            var expander_text = '-';\n            var view_data = null;\n            var _offset = this.get_view_offset();\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                view_data = node._data.view;\n                node_element = view_data.element;\n                expander = view_data.expander;\n                if (!this.layout.is_visible(node)) {\n                    node_element.style.display = 'none';\n                    expander.style.display = 'none';\n                    continue;\n                }\n                this.reset_node_custom_style(node);\n                p = this.layout.get_node_point(node);\n                view_data.abs_x = _offset.x + p.x;\n                view_data.abs_y = _offset.y + p.y;\n                node_element.style.left = (_offset.x + p.x) + 'px';\n                node_element.style.top = (_offset.y + p.y) + 'px';\n                node_element.style.display = '';\n                node_element.style.visibility = 'visible';\n                if (!node.isroot && node.children.length > 0) {\n                    expander_text = node.expanded ? '-' : '+';\n                    p_expander = this.layout.get_expander_point(node);\n                    expander.style.left = (_offset.x + p_expander.x) + 'px';\n                    expander.style.top = (_offset.y + p_expander.y) + 'px';\n                    expander.style.display = '';\n                    expander.style.visibility = 'visible';\n                    $t(expander, expander_text);\n                }\n                // hide expander while all children have been removed\n                if (!node.isroot && node.children.length == 0) {\n                    expander.style.display = 'none';\n                    expander.style.visibility = 'hidden';\n                }\n            }\n        },\n\n        reset_node_custom_style: function (node) {\n            this._reset_node_custom_style(node._data.view.element, node.data);\n        },\n\n        _reset_node_custom_style: function (node_element, node_data) {\n            if ('background-color' in node_data) {\n                node_element.style.backgroundColor = node_data['background-color'];\n            }\n            if ('foreground-color' in node_data) {\n                node_element.style.color = node_data['foreground-color'];\n            }\n            if ('width' in node_data) {\n                node_element.style.width = node_data['width'] + 'px';\n            }\n            if ('height' in node_data) {\n                node_element.style.height = node_data['height'] + 'px';\n            }\n            if ('font-size' in node_data) {\n                node_element.style.fontSize = node_data['font-size'] + 'px';\n            }\n            if ('font-weight' in node_data) {\n                node_element.style.fontWeight = node_data['font-weight'];\n            }\n            if ('font-style' in node_data) {\n                node_element.style.fontStyle = node_data['font-style'];\n            }\n            if ('background-image' in node_data) {\n                var backgroundImage = node_data['background-image'];\n                if (backgroundImage.startsWith('data') && node_data['width'] && node_data['height']) {\n                    var img = new Image();\n\n                    img.onload = function () {\n                        var c = $c('canvas');\n                        c.width = node_element.clientWidth;\n                        c.height = node_element.clientHeight;\n                        var img = this;\n                        if (c.getContext) {\n                            var ctx = c.getContext('2d');\n                            ctx.drawImage(img, 2, 2, node_element.clientWidth, node_element.clientHeight);\n                            var scaledImageData = c.toDataURL();\n                            node_element.style.backgroundImage = 'url(' + scaledImageData + ')';\n                        }\n                    };\n                    img.src = backgroundImage;\n\n                } else {\n                    node_element.style.backgroundImage = 'url(' + backgroundImage + ')';\n                }\n                node_element.style.backgroundSize = '99%';\n\n                if ('background-rotation' in node_data) {\n                    node_element.style.transform = 'rotate(' + node_data['background-rotation'] + 'deg)';\n                }\n            }\n        },\n\n        clear_node_custom_style: function (node) {\n            var node_element = node._data.view.element;\n            node_element.style.backgroundColor = \"\";\n            node_element.style.color = \"\";\n        },\n\n        clear_lines: function () {\n            this.graph.clear();\n        },\n\n        show_lines: function () {\n            this.clear_lines();\n            var nodes = this.jm.mind.nodes;\n            var node = null;\n            var pin = null;\n            var pout = null;\n            var _offset = this.get_view_offset();\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                if (!!node.isroot) { continue; }\n                if (('visible' in node._data.layout) && !node._data.layout.visible) { continue; }\n                pin = this.layout.get_node_point_in(node);\n                pout = this.layout.get_node_point_out(node.parent);\n                this.graph.draw_line(pout, pin, _offset);\n            }\n        },\n    };\n\n    // shortcut provider\n    jm.shortcut_provider = function (jm, options) {\n        this.jm = jm;\n        this.opts = options;\n        this.mapping = options.mapping;\n        this.handles = options.handles;\n        this._mapping = {};\n    };\n\n    jm.shortcut_provider.prototype = {\n        init: function () {\n            jm.util.dom.add_event($d, 'keydown', this.handler.bind(this));\n\n            this.handles['addchild'] = this.handle_addchild;\n            this.handles['addbrother'] = this.handle_addbrother;\n            this.handles['editnode'] = this.handle_editnode;\n            this.handles['delnode'] = this.handle_delnode;\n            this.handles['toggle'] = this.handle_toggle;\n            this.handles['up'] = this.handle_up;\n            this.handles['down'] = this.handle_down;\n            this.handles['left'] = this.handle_left;\n            this.handles['right'] = this.handle_right;\n\n            for (var handle in this.mapping) {\n                if (!!this.mapping[handle] && (handle in this.handles)) {\n                    this._mapping[this.mapping[handle]] = this.handles[handle];\n                }\n            }\n        },\n\n        enable_shortcut: function () {\n            this.opts.enable = true;\n        },\n\n        disable_shortcut: function () {\n            this.opts.enable = false;\n        },\n\n        handler: function (e) {\n            if (this.jm.view.is_editing()) { return; }\n            var evt = e || event;\n            if (!this.opts.enable) { return true; }\n            var kc = evt.keyCode + (evt.metaKey << 13) + (evt.ctrlKey << 12) + (evt.altKey << 11) + (evt.shiftKey << 10);\n            if (kc in this._mapping) {\n                this._mapping[kc].call(this, this.jm, e);\n            }\n        },\n\n        handle_addchild: function (_jm, e) {\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node) {\n                var nodeid = jm.util.uuid.newid();\n                var node = _jm.add_node(selected_node, nodeid, 'New Node');\n                if (!!node) {\n                    _jm.select_node(nodeid);\n                    _jm.begin_edit(nodeid);\n                }\n            }\n        },\n        handle_addbrother: function (_jm, e) {\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node && !selected_node.isroot) {\n                var nodeid = jm.util.uuid.newid();\n                var node = _jm.insert_node_after(selected_node, nodeid, 'New Node');\n                if (!!node) {\n                    _jm.select_node(nodeid);\n                    _jm.begin_edit(nodeid);\n                }\n            }\n        },\n        handle_editnode: function (_jm, e) {\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node) {\n                _jm.begin_edit(selected_node);\n            }\n        },\n        handle_delnode: function (_jm, e) {\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node && !selected_node.isroot) {\n                _jm.select_node(selected_node.parent);\n                _jm.remove_node(selected_node);\n            }\n        },\n        handle_toggle: function (_jm, e) {\n            var evt = e || event;\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node) {\n                _jm.toggle_node(selected_node.id);\n                evt.stopPropagation();\n                evt.preventDefault();\n            }\n        },\n        handle_up: function (_jm, e) {\n            var evt = e || event;\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node) {\n                var up_node = _jm.find_node_before(selected_node);\n                if (!up_node) {\n                    var np = _jm.find_node_before(selected_node.parent);\n                    if (!!np && np.children.length > 0) {\n                        up_node = np.children[np.children.length - 1];\n                    }\n                }\n                if (!!up_node) {\n                    _jm.select_node(up_node);\n                }\n                evt.stopPropagation();\n                evt.preventDefault();\n            }\n        },\n\n        handle_down: function (_jm, e) {\n            var evt = e || event;\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node) {\n                var down_node = _jm.find_node_after(selected_node);\n                if (!down_node) {\n                    var np = _jm.find_node_after(selected_node.parent);\n                    if (!!np && np.children.length > 0) {\n                        down_node = np.children[0];\n                    }\n                }\n                if (!!down_node) {\n                    _jm.select_node(down_node);\n                }\n                evt.stopPropagation();\n                evt.preventDefault();\n            }\n        },\n\n        handle_left: function (_jm, e) {\n            this._handle_direction(_jm, e, jm.direction.left);\n        },\n        handle_right: function (_jm, e) {\n            this._handle_direction(_jm, e, jm.direction.right);\n        },\n        _handle_direction: function (_jm, e, d) {\n            var evt = e || event;\n            var selected_node = _jm.get_selected_node();\n            var node = null;\n            if (!!selected_node) {\n                if (selected_node.isroot) {\n                    var c = selected_node.children;\n                    var children = [];\n                    for (var i = 0; i < c.length; i++) {\n                        if (c[i].direction === d) {\n                            children.push(i)\n                        }\n                    }\n                    node = c[children[Math.floor((children.length - 1) / 2)]];\n                }\n                else if (selected_node.direction === d) {\n                    var children = selected_node.children;\n                    var childrencount = children.length;\n                    if (childrencount > 0) {\n                        node = children[Math.floor((childrencount - 1) / 2)]\n                    }\n                } else {\n                    node = selected_node.parent;\n                }\n                if (!!node) {\n                    _jm.select_node(node);\n                }\n                evt.stopPropagation();\n                evt.preventDefault();\n            }\n        },\n    };\n\n\n    // plugin\n    jm.plugin = function (name, init) {\n        this.name = name;\n        this.init = init;\n    };\n\n    jm.plugins = [];\n\n    jm.register_plugin = function (plugin) {\n        if (plugin instanceof jm.plugin) {\n            jm.plugins.push(plugin);\n        }\n    };\n\n    jm.init_plugins = function (sender) {\n        $w.setTimeout(function () {\n            jm._init_plugins(sender);\n        }, 0);\n    };\n\n    jm._init_plugins = function (sender) {\n        var l = jm.plugins.length;\n        var fn_init = null;\n        for (var i = 0; i < l; i++) {\n            fn_init = jm.plugins[i].init;\n            if (typeof fn_init === 'function') {\n                fn_init(sender);\n            }\n        }\n    };\n\n    // quick way\n    jm.show = function (options, mind) {\n        var _jm = new jm(options);\n        _jm.show(mind);\n        return _jm;\n    };\n\n    // export jsmind\n    if (typeof module !== 'undefined' && typeof exports === 'object') {\n        module.exports = jm;\n        $w[__name__] = jm;\n    } else if (typeof define === 'function' && (define.amd || define.cmd)) {\n        define(function () { return jm; });\n    } else {\n        $w[__name__] = jm;\n    }\n})(typeof window !== 'undefined' ? window : global);\n\n"],"sourceRoot":""}